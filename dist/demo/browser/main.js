var X8=Object.defineProperty,Q8=Object.defineProperties;var Z8=Object.getOwnPropertyDescriptors;var np=Object.getOwnPropertySymbols,J8=Object.getPrototypeOf,yb=Object.prototype.hasOwnProperty,_b=Object.prototype.propertyIsEnumerable,e6=Reflect.get;var vb=(n,e,t)=>e in n?X8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,G=(n,e)=>{for(var t in e||={})yb.call(e,t)&&vb(n,t,e[t]);if(np)for(var t of np(e))_b.call(e,t)&&vb(n,t,e[t]);return n},le=(n,e)=>Q8(n,Z8(e));var ey=(n,e)=>{var t={};for(var r in n)yb.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&np)for(var r of np(n))e.indexOf(r)<0&&_b.call(n,r)&&(t[r]=n[r]);return t};var to=(n,e,t)=>e6(J8(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var ty;function ny(){return ty}function no(n){let e=ty;return ty=n,e}var t6=Symbol("NotFound"),rp=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function Oc(n){return n===t6||n?.name==="\u0275NotFound"}function cp(n,e){return Object.is(n,e)}var cn=null,ip=!1,ry=1,n6=null,Mn=Symbol("SIGNAL");function Fe(n){let e=cn;return cn=n,e}function up(){return cn}var oa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Pc(n){if(ip)throw new Error("");if(cn===null)return;cn.consumerOnSignalRead(n);let e=cn.nextProducerIndex++;if(hp(cn),e<cn.producerNode.length&&cn.producerNode[e]!==n&&ed(cn)){let t=cn.producerNode[e];fp(t,cn.producerIndexOfThis[e])}cn.producerNode[e]!==n&&(cn.producerNode[e]=n,cn.producerIndexOfThis[e]=ed(cn)?wb(n,cn,e):0),cn.producerLastReadVersion[e]=n.version}function Eb(){ry++}function lp(n){if(!(ed(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ry)){if(!n.producerMustRecompute(n)&&!td(n)){ap(n);return}n.producerRecomputeValue(n),ap(n)}}function iy(n){if(n.liveConsumerNode===void 0)return;let e=ip;ip=!0;try{for(let t of n.liveConsumerNode)t.dirty||r6(t)}finally{ip=e}}function oy(){return cn?.consumerAllowSignalWrites!==!1}function r6(n){n.dirty=!0,iy(n),n.consumerMarkedDirty?.(n)}function ap(n){n.dirty=!1,n.lastCleanEpoch=ry}function sa(n){return n&&(n.nextProducerIndex=0),Fe(n)}function Mc(n,e){if(Fe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ed(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)fp(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function td(n){hp(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(lp(t),r!==t.version))return!0}return!1}function dp(n){if(hp(n),ed(n))for(let e=0;e<n.producerNode.length;e++)fp(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function wb(n,e,t){if(Ib(n),n.liveConsumerNode.length===0&&Cb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=wb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function fp(n,e){if(Ib(n),n.liveConsumerNode.length===1&&Cb(n))for(let r=0;r<n.producerNode.length;r++)fp(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];hp(i),i.producerIndexOfThis[r]=e}}function ed(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function hp(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ib(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Cb(n){return n.producerNode!==void 0}function pp(n){n6?.(n)}function gp(n,e){let t=Object.create(i6);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(lp(t),Pc(t),t.value===Jl)throw t.error;return t.value};return r[Mn]=t,pp(t),r}var op=Symbol("UNSET"),sp=Symbol("COMPUTING"),Jl=Symbol("ERRORED"),i6=le(G({},oa),{value:op,dirty:!0,error:null,equal:cp,kind:"computed",producerMustRecompute(n){return n.value===op||n.value===sp},producerRecomputeValue(n){if(n.value===sp)throw new Error("");let e=n.value;n.value=sp;let t=sa(n),r,i=!1;try{r=n.computation(),Fe(null),i=e!==op&&e!==Jl&&r!==Jl&&n.equal(e,r)}catch(o){r=Jl,n.error=o}finally{Mc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function o6(){throw new Error}var xb=o6;function Ab(n){xb(n)}function sy(n){xb=n}var s6=null;function ay(n,e){let t=Object.create(vp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Sb(t);return r[Mn]=t,pp(t),r}function Sb(n){return Pc(n),n.value}function aa(n,e){oy()||Ab(n),n.equal(n.value,e)||(n.value=e,a6(n))}function mp(n,e){oy()||Ab(n),aa(n,e(n.value))}var vp=le(G({},oa),{equal:cp,value:void 0,kind:"signal"});function a6(n){n.version++,Eb(),iy(n),s6?.(n)}function Se(n){return typeof n=="function"}function kc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var yp=kc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ca(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ft=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Se(r))try{r()}catch(o){e=o instanceof yp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Tb(o)}catch(s){e=e??[],s instanceof yp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Tb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ca(t,e)}remove(e){let{_finalizers:t}=this;t&&ca(t,e),e instanceof n&&e._removeParent(this)}};Ft.EMPTY=(()=>{let n=new Ft;return n.closed=!0,n})();var cy=Ft.EMPTY;function _p(n){return n instanceof Ft||n&&"closed"in n&&Se(n.remove)&&Se(n.add)&&Se(n.unsubscribe)}function Tb(n){Se(n)?n():n.unsubscribe()}var Kr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Fc={setTimeout(n,e,...t){let{delegate:r}=Fc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Fc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ep(n){Fc.setTimeout(()=>{let{onUnhandledError:e}=Kr;if(e)e(n);else throw n})}function nd(){}var bb=uy("C",void 0,void 0);function Db(n){return uy("E",void 0,n)}function Rb(n){return uy("N",n,void 0)}function uy(n,e,t){return{kind:n,value:e,error:t}}var ua=null;function Lc(n){if(Kr.useDeprecatedSynchronousErrorHandling){let e=!ua;if(e&&(ua={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ua;if(ua=null,t)throw r}}else n()}function Nb(n){Kr.useDeprecatedSynchronousErrorHandling&&ua&&(ua.errorThrown=!0,ua.error=n)}var la=class extends Ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_p(e)&&e.add(this)):this.destination=l6}static create(e,t,r){return new Vc(e,t,r)}next(e){this.isStopped?dy(Rb(e),this):this._next(e)}error(e){this.isStopped?dy(Db(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dy(bb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},c6=Function.prototype.bind;function ly(n,e){return c6.call(n,e)}var fy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wp(r)}else wp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wp(t)}}},Vc=class extends la{constructor(e,t,r){super();let i;if(Se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Kr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ly(e.next,o),error:e.error&&ly(e.error,o),complete:e.complete&&ly(e.complete,o)}):i=e}this.destination=new fy(i)}};function wp(n){Kr.useDeprecatedSynchronousErrorHandling?Nb(n):Ep(n)}function u6(n){throw n}function dy(n,e){let{onStoppedNotification:t}=Kr;t&&Fc.setTimeout(()=>t(n,e))}var l6={closed:!0,next:nd,error:u6,complete:nd};var Bc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yr(n){return n}function hy(...n){return py(n)}function py(n){return n.length===0?yr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=f6(t)?t:new Vc(t,r,i);return Lc(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ob(r),new r((i,o)=>{let s=new Vc({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Bc](){return this}pipe(...t){return py(t)(this)}toPromise(t){return t=Ob(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Ob(n){var e;return(e=n??Kr.Promise)!==null&&e!==void 0?e:Promise}function d6(n){return n&&Se(n.next)&&Se(n.error)&&Se(n.complete)}function f6(n){return n&&n instanceof la||d6(n)&&_p(n)}function gy(n){return Se(n?.lift)}function ze(n){return e=>{if(gy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ue(n,e,t,r,i){return new my(n,e,t,r,i)}var my=class extends la{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Uc(){return ze((n,e)=>{let t=null;n._refCount++;let r=Ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var jc=class extends Re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,gy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ft;let t=this.getSubject();e.add(this.source.subscribe(Ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ft.EMPTY)}return e}refCount(){return Uc()(this)}};var Pb=kc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Gt=(()=>{class n extends Re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ip(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Pb}next(t){Lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cy:(this.currentObservers=null,o.push(t),new Ft(()=>{this.currentObservers=null,ca(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Re;return t.source=this,t}}return n.create=(e,t)=>new Ip(e,t),n})(),Ip=class extends Gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:cy}};var un=class extends Gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var vy={now(){return(vy.delegate||Date).now()},delegate:void 0};var Cp=class extends Ft{constructor(e,t){super()}schedule(e,t=0){return this}};var rd={setInterval(n,e,...t){let{delegate:r}=rd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=rd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Hc=class extends Cp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return rd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&rd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ca(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var $c=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};$c.now=vy.now;var Gc=class extends $c{constructor(e,t=$c.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var yy=new Gc(Hc);var xp=class extends Hc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ap=class extends Gc{};var _y=new Ap(xp);var or=new Re(n=>n.complete());function Mb(n){return n&&Se(n.schedule)}function kb(n){return n[n.length-1]}function Sp(n){return Se(kb(n))?n.pop():void 0}function Zo(n){return Mb(kb(n))?n.pop():void 0}function Ey(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Lb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function Fb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function da(n){return this instanceof da?(this.v=n,this):new da(n)}function Vb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(m){return Promise.resolve(m).then(p,f)}}function a(p,m){r[p]&&(i[p]=function(y){return new Promise(function(w,S){o.push([p,y,w,S])>1||c(p,y)})},m&&(i[p]=m(i[p])))}function c(p,m){try{u(r[p](m))}catch(y){h(o[0][3],y)}}function u(p){p.value instanceof da?Promise.resolve(p.value.v).then(l,f):h(o[0][2],p)}function l(p){c("next",p)}function f(p){c("throw",p)}function h(p,m){p(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Bb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Fb=="function"?Fb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Tp=n=>n&&typeof n.length=="number"&&typeof n!="function";function bp(n){return Se(n?.then)}function Dp(n){return Se(n[Bc])}function Rp(n){return Symbol.asyncIterator&&Se(n?.[Symbol.asyncIterator])}function Np(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function h6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Op=h6();function Pp(n){return Se(n?.[Op])}function Mp(n){return Vb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield da(t.read());if(i)return yield da(void 0);yield yield da(r)}}finally{t.releaseLock()}})}function kp(n){return Se(n?.getReader)}function Zt(n){if(n instanceof Re)return n;if(n!=null){if(Dp(n))return p6(n);if(Tp(n))return g6(n);if(bp(n))return m6(n);if(Rp(n))return Ub(n);if(Pp(n))return v6(n);if(kp(n))return y6(n)}throw Np(n)}function p6(n){return new Re(e=>{let t=n[Bc]();if(Se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function g6(n){return new Re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function m6(n){return new Re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ep)})}function v6(n){return new Re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Ub(n){return new Re(e=>{_6(n,e).catch(t=>e.error(t))})}function y6(n){return Ub(Mp(n))}function _6(n,e){var t,r,i,o;return Lb(this,void 0,void 0,function*(){try{for(t=Bb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function sr(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Jo(n,e=0){return ze((t,r)=>{t.subscribe(Ue(r,i=>sr(r,n,()=>r.next(i),e),()=>sr(r,n,()=>r.complete(),e),i=>sr(r,n,()=>r.error(i),e)))})}function es(n,e=0){return ze((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function jb(n,e){return Zt(n).pipe(es(e),Jo(e))}function Hb(n,e){return Zt(n).pipe(es(e),Jo(e))}function $b(n,e){return new Re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Gb(n,e){return new Re(t=>{let r;return sr(t,e,()=>{r=n[Op](),sr(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Se(r?.return)&&r.return()})}function Fp(n,e){if(!n)throw new Error("Iterable cannot be null");return new Re(t=>{sr(t,e,()=>{let r=n[Symbol.asyncIterator]();sr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function zb(n,e){return Fp(Mp(n),e)}function Wb(n,e){if(n!=null){if(Dp(n))return jb(n,e);if(Tp(n))return $b(n,e);if(bp(n))return Hb(n,e);if(Rp(n))return Fp(n,e);if(Pp(n))return Gb(n,e);if(kp(n))return zb(n,e)}throw Np(n)}function We(n,e){return e?Wb(n,e):Zt(n)}function ve(...n){let e=Zo(n);return We(n,e)}function zc(n,e){let t=Se(n)?n:()=>n,r=i=>i.error(t());return new Re(e?i=>e.schedule(r,0,i):r)}function wy(n){return!!n&&(n instanceof Re||Se(n.lift)&&Se(n.subscribe))}var ro=kc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function we(n,e){return ze((t,r)=>{let i=0;t.subscribe(Ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:E6}=Array;function w6(n,e){return E6(e)?n(...e):n(e)}function Lp(n){return we(e=>w6(n,e))}var{isArray:I6}=Array,{getPrototypeOf:C6,prototype:x6,keys:A6}=Object;function Vp(n){if(n.length===1){let e=n[0];if(I6(e))return{args:e,keys:null};if(S6(e)){let t=A6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function S6(n){return n&&typeof n=="object"&&C6(n)===x6}function Bp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function id(...n){let e=Zo(n),t=Sp(n),{args:r,keys:i}=Vp(n);if(r.length===0)return We([],e);let o=new Re(T6(r,e,i?s=>Bp(i,s):yr));return t?o.pipe(Lp(t)):o}function T6(n,e,t=yr){return r=>{qb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)qb(e,()=>{let u=We(n[c],e),l=!1;u.subscribe(Ue(r,f=>{o[c]=f,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qb(n,e,t){n?sr(t,n,e):e()}function Kb(n,e,t,r,i,o,s,a){let c=[],u=0,l=0,f=!1,h=()=>{f&&!c.length&&!u&&e.complete()},p=y=>u<r?m(y):c.push(y),m=y=>{o&&e.next(y),u++;let w=!1;Zt(t(y,l++)).subscribe(Ue(e,S=>{i?.(S),o?p(S):e.next(S)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<r;){let S=c.shift();s?sr(e,s,()=>m(S)):m(S)}h()}catch(S){e.error(S)}}))};return n.subscribe(Ue(e,p,()=>{f=!0,h()})),()=>{a?.()}}function zt(n,e,t=1/0){return Se(e)?zt((r,i)=>we((o,s)=>e(r,o,i,s))(Zt(n(r,i))),t):(typeof e=="number"&&(t=e),ze((r,i)=>Kb(r,i,n,t)))}function Wc(n=1/0){return zt(yr,n)}function Yb(){return Wc(1)}function qc(...n){return Yb()(We(n,Zo(n)))}function od(n){return new Re(e=>{Zt(n()).subscribe(e)})}function Iy(...n){let e=Sp(n),{args:t,keys:r}=Vp(n),i=new Re(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let f=!1;Zt(t[l]).subscribe(Ue(o,h=>{f||(f=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Bp(r,a):a),o.complete())}))}});return e?i.pipe(Lp(e)):i}function ar(n,e){return ze((t,r)=>{let i=0;t.subscribe(Ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function io(n){return ze((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ue(t,void 0,void 0,s=>{o=Zt(n(s,io(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Xb(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Ue(s,l=>{let f=u++;c=a?n(c,l,f):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ts(n,e){return Se(e)?zt(n,e,1):zt(n,1)}function ns(n){return ze((e,t)=>{let r=!1;e.subscribe(Ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function _r(n){return n<=0?()=>or:ze((e,t)=>{let r=0;e.subscribe(Ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Up(n=b6){return ze((e,t)=>{let r=!1;e.subscribe(Ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function b6(){return new ro}function sd(n){return ze((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function oo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ar((i,o)=>n(i,o,r)):yr,_r(1),t?ns(e):Up(()=>new ro))}function Kc(n){return n<=0?()=>or:ze((e,t)=>{let r=[];e.subscribe(Ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Cy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ar((i,o)=>n(i,o,r)):yr,Kc(1),t?ns(e):Up(()=>new ro))}function xy(n,e){return ze(Xb(n,e,arguments.length>=2,!0))}function Ay(...n){let e=Zo(n);return ze((t,r)=>{(e?qc(n,t,e):qc(n,t)).subscribe(r)})}function kn(n,e){return ze((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ue(r,c=>{i?.unsubscribe();let u=0,l=o++;Zt(n(c,l)).subscribe(i=Ue(r,f=>r.next(e?e(c,f,l,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jp(n){return ze((e,t)=>{Zt(n).subscribe(Ue(t,()=>t.complete(),nd)),!t.closed&&e.subscribe(t)})}function pn(n,e,t){let r=Se(n)||e||t?{next:n,error:e,complete:t}:n;return r?ze((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ue(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):yr}function Qb(n){let e=Fe(null);try{return n()}finally{Fe(e)}}var Wp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,t){super(ld(e,t)),this.code=e}};function D6(n){return`NG0${Math.abs(n)}`}function ld(n,e){return`${D6(n)}${e?": "+e:""}`}var co=globalThis;function St(n){for(let e in n)if(n[e]===St)return e;throw Error("")}function t2(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function cr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(cr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function qp(n,e){return n?e?`${n} ${e}`:n:e||""}var R6=St({__forward_ref__:St});function Dr(n){return n.__forward_ref__=Dr,n.toString=function(){return cr(this())},n}function Sn(n){return Vy(n)?n():n}function Vy(n){return typeof n=="function"&&n.hasOwnProperty(R6)&&n.__forward_ref__===Dr}function n2(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rr(n){return{providers:n.providers||[],imports:n.imports||[]}}function dd(n){return N6(n,Kp)}function By(n){return dd(n)!==null}function N6(n,e){return n.hasOwnProperty(e)&&n[e]||null}function O6(n){let e=n?.[Kp]??null;return e||null}function Ty(n){return n&&n.hasOwnProperty($p)?n[$p]:null}var Kp=St({\u0275prov:St}),$p=St({\u0275inj:St}),ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Uy(n){return n&&!!n.\u0275providers}var jy=St({\u0275cmp:St}),Hy=St({\u0275dir:St}),$y=St({\u0275pipe:St}),Gy=St({\u0275mod:St}),cd=St({\u0275fac:St}),ma=St({__NG_ELEMENT_ID__:St}),Zb=St({__NG_ENV_ID__:St});function fd(n){return typeof n=="string"?n:n==null?"":String(n)}function r2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():fd(n)}function zy(n,e){throw new re(-200,n)}function Yp(n,e){throw new re(-201,!1)}var by;function i2(){return by}function Kn(n){let e=by;return by=n,e}function Wy(n,e,t){let r=dd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Yp(n,"Injector")}var P6={},fa=P6,Dy="__NG_DI_FLAG__",Ry=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ha(t)||0;try{return this.injector.get(e,r&8?null:fa,r)}catch(i){if(Oc(i))return i;throw i}}},Gp="ngTempTokenPath",M6="ngTokenPath",k6=/\n/gm,F6="\u0275",Jb="__source";function L6(n,e=0){let t=ny();if(t===void 0)throw new re(-203,!1);if(t===null)return Wy(n,void 0,e);{let r=V6(e),i=t.retrieve(n,r);if(Oc(i)){if(r.optional)return null;throw i}return i}}function fe(n,e=0){return(i2()||L6)(Sn(n),e)}function z(n,e){return fe(n,ha(e))}function ha(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function V6(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ny(n){let e=[];for(let t=0;t<n.length;t++){let r=Sn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=B6(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(fe(i,o))}else e.push(fe(r))}return e}function qy(n,e){return n[Dy]=e,n.prototype[Dy]=e,n}function B6(n){return n[Dy]}function U6(n,e,t,r){let i=n[Gp];throw e[Jb]&&i.unshift(e[Jb]),n.message=j6(`
`+n.message,i,t,r),n[M6]=i,n[Gp]=null,n}function j6(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==F6?n.slice(2):n;let i=cr(e);if(Array.isArray(e))i=e.map(cr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):cr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(k6,`
  `)}`}function rs(n,e){let t=n.hasOwnProperty(cd);return t?n[cd]:null}function o2(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function s2(n){return n.flat(Number.POSITIVE_INFINITY)}function Xp(n,e){n.forEach(t=>Array.isArray(t)?Xp(t,e):e(t))}function Ky(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function a2(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Qp(n,e,t){let r=Xc(n,e);return r>=0?n[r|1]=t:(r=~r,a2(n,r,e,t)),r}function Zp(n,e){let t=Xc(n,e);if(t>=0)return n[t|1]}function Xc(n,e){return H6(n,e,1)}function H6(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var os={},Yn=[],ss=new ce(""),Yy=new ce("",-1),Xy=new ce(""),ud=class{get(e,t=fa){if(t===fa)throw new rp(`NullInjectorError: No provider for ${cr(e)}!`);return t}};function Qy(n){return n[Gy]||null}function uo(n){return n[jy]||null}function Zy(n){return n[Hy]||null}function c2(n){return n[$y]||null}function Xr(n){return{\u0275providers:n}}function u2(...n){return{\u0275providers:Jy(!0,n),\u0275fromNgModule:!0}}function Jy(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Xp(e,s=>{let a=s;zp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&l2(i,o),t}function l2(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];e_(i,o=>{e(o,r)})}}function zp(n,e,t,r){if(n=Sn(n),!n)return!1;let i=null,o=Ty(n),s=!o&&uo(n);if(!o&&!s){let c=n.ngModule;if(o=Ty(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)zp(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Xp(o.imports,l=>{zp(l,e,t,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&l2(u,e)}if(!a){let u=rs(i)||(()=>new i);e({provide:i,useFactory:u,deps:Yn},i),e({provide:Xy,useValue:i,multi:!0},i),e({provide:ss,useValue:()=>fe(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;e_(c,l=>{e(l,u)})}}else return!1;return i!==n&&n.providers!==void 0}function e_(n,e){for(let t of n)Uy(t)&&(t=t.\u0275providers),Array.isArray(t)?e_(t,e):e(t)}var $6=St({provide:String,useValue:St});function d2(n){return n!==null&&typeof n=="object"&&$6 in n}function G6(n){return!!(n&&n.useExisting)}function z6(n){return!!(n&&n.useFactory)}function pa(n){return typeof n=="function"}function f2(n){return!!n.useClass}var pd=new ce(""),Hp={},e2={},Sy;function gd(){return Sy===void 0&&(Sy=new ud),Sy}var Wt=class{},ga=class extends Wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Py(e,s=>this.processProvider(s)),this.records.set(Yy,Yc(void 0,this)),i.has("environment")&&this.records.set(Wt,Yc(void 0,this));let o=this.records.get(pd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Xy,Yn,{self:!0}))}retrieve(e,t){let r=ha(t)||0;try{return this.get(e,fa,r)}catch(i){if(Oc(i))return i;throw i}}destroy(){ad(this),this._destroyed=!0;let e=Fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Fe(e)}}onDestroy(e){return ad(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ad(this);let t=no(this),r=Kn(void 0),i;try{return e()}finally{no(t),Kn(r)}}get(e,t=fa,r){if(ad(this),e.hasOwnProperty(Zb))return e[Zb](this);let i=ha(r),o,s=no(this),a=Kn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let l=X6(e)&&dd(e);l&&this.injectableDefInScope(l)?u=Yc(Oy(e),Hp):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=i&2?gd():this.parent;return t=i&8&&t===fa?null:t,c.get(e,t)}catch(c){if(Oc(c)){if((c[Gp]=c[Gp]||[]).unshift(cr(e)),s)throw c;return U6(c,e,"R3InjectorError",this.source)}else throw c}finally{Kn(a),no(s)}}resolveInjectorInitializers(){let e=Fe(null),t=no(this),r=Kn(void 0),i;try{let o=this.get(ss,Yn,{self:!0});for(let s of o)s()}finally{no(t),Kn(r),Fe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(cr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Sn(e);let t=pa(e)?e:Sn(e&&e.provide),r=q6(e);if(!pa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Yc(void 0,Hp,!0),i.factory=()=>Ny(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Fe(null);try{return t.value===e2?zy(cr(e)):t.value===Hp&&(t.value=e2,t.value=t.factory()),typeof t.value=="object"&&t.value&&Y6(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Sn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Oy(n){let e=dd(n),t=e!==null?e.factory:rs(n);if(t!==null)return t;if(n instanceof ce)throw new re(204,!1);if(n instanceof Function)return W6(n);throw new re(204,!1)}function W6(n){if(n.length>0)throw new re(204,!1);let t=O6(n);return t!==null?()=>t.factory(n):()=>new n}function q6(n){if(d2(n))return Yc(void 0,n.useValue);{let e=t_(n);return Yc(e,Hp)}}function t_(n,e,t){let r;if(pa(n)){let i=Sn(n);return rs(i)||Oy(i)}else if(d2(n))r=()=>Sn(n.useValue);else if(z6(n))r=()=>n.useFactory(...Ny(n.deps||[]));else if(G6(n))r=()=>fe(Sn(n.useExisting));else{let i=Sn(n&&(n.useClass||n.provide));if(K6(n))r=()=>new i(...Ny(n.deps));else return rs(i)||Oy(i)}return r}function ad(n){if(n.destroyed)throw new re(205,!1)}function Yc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function K6(n){return!!n.deps}function Y6(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function X6(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Py(n,e){for(let t of n)Array.isArray(t)?Py(t,e):t&&Uy(t)?Py(t.\u0275providers,e):e(t)}function mn(n,e){let t;n instanceof ga?(ad(n),t=n):t=new Ry(n);let r,i=no(t),o=Kn(void 0);try{return e()}finally{no(i),Kn(o)}}function n_(){return i2()!==void 0||ny()!=null}function r_(n){if(!n_())throw new re(-203,!1)}var Qr=0,Ne=1,Ce=2,gn=3,Nr=4,Or=5,md=6,Qc=7,Fn=8,va=9,Ci=10,Vt=11,Zc=12,i_=13,ya=14,Pr=15,as=16,_a=17,xi=18,vd=19,o_=20,so=21,Jp=22,yd=23,Er=24,Ea=25,Xn=26,h2=1;var cs=7,_d=8,wa=9,Qn=10;function Ai(n){return Array.isArray(n)&&typeof n[h2]=="object"}function Zr(n){return Array.isArray(n)&&n[h2]===!0}function s_(n){return(n.flags&4)!==0}function us(n){return n.componentOffset>-1}function eg(n){return(n.flags&1)===1}function Si(n){return!!n.template}function Jc(n){return(n[Ce]&512)!==0}function eu(n){return(n[Ce]&256)===256}var a_="svg",p2="math";function Mr(n){for(;Array.isArray(n);)n=n[Qr];return n}function c_(n,e){return Mr(e[n])}function Jr(n,e){return Mr(e[n.index])}function tg(n,e){return n.data[e]}function ng(n,e){return n[e]}function u_(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function kr(n,e){let t=e[n];return Ai(t)?t:t[Qr]}function g2(n){return(n[Ce]&4)===4}function rg(n){return(n[Ce]&128)===128}function m2(n){return Zr(n[gn])}function Ed(n,e){return e==null?null:n[e]}function l_(n){n[_a]=0}function d_(n){n[Ce]&1024||(n[Ce]|=1024,rg(n)&&tu(n))}function v2(n,e){for(;n>0;)e=e[ya],n--;return e}function wd(n){return!!(n[Ce]&9216||n[Er]?.dirty)}function ig(n){n[Ci].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),wd(n)&&tu(n)}function tu(n){n[Ci].changeDetectionScheduler?.notify(0);let e=is(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!rg(e)));)e=is(e)}function f_(n,e){if(eu(n))throw new re(911,!1);n[so]===null&&(n[so]=[]),n[so].push(e)}function y2(n,e){if(n[so]===null)return;let t=n[so].indexOf(e);t!==-1&&n[so].splice(t,1)}function is(n){let e=n[gn];return Zr(e)?e[gn]:e}function h_(n){return n[Qc]??=[]}function p_(n){return n.cleanup??=[]}function _2(n,e,t,r){let i=h_(e);i.push(t),n.firstCreatePass&&p_(n).push(r,i.length-1)}var Me={lFrame:M2(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Id=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Id||{}),Q6=0,My=!1;function E2(){return Me.lFrame.elementDepthCount}function w2(){Me.lFrame.elementDepthCount++}function I2(){Me.lFrame.elementDepthCount--}function g_(){return Me.bindingsEnabled}function C2(){return Me.skipHydrationRootTNode!==null}function x2(n){return Me.skipHydrationRootTNode===n}function A2(){Me.skipHydrationRootTNode=null}function je(){return Me.lFrame.lView}function vn(){return Me.lFrame.tView}function at(n){return Me.lFrame.contextLView=n,n[Fn]}function ct(n){return Me.lFrame.contextLView=null,n}function Ln(){let n=m_();for(;n!==null&&n.type===64;)n=n.parent;return n}function m_(){return Me.lFrame.currentTNode}function S2(){let n=Me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function nu(n,e){let t=Me.lFrame;t.currentTNode=n,t.isParent=e}function v_(){return Me.lFrame.isParent}function T2(){Me.lFrame.isParent=!1}function y_(n){n2("Must never be called in production mode"),Q6=n}function __(){return My}function E_(n){let e=My;return My=n,e}function og(){let n=Me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function b2(n){return Me.lFrame.bindingIndex=n}function Cd(){return Me.lFrame.bindingIndex++}function w_(n){let e=Me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function D2(){return Me.lFrame.inI18n}function R2(n,e){let t=Me.lFrame;t.bindingIndex=t.bindingRootIndex=n,sg(e)}function N2(){return Me.lFrame.currentDirectiveIndex}function sg(n){Me.lFrame.currentDirectiveIndex=n}function O2(n){let e=Me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function I_(){return Me.lFrame.currentQueryIndex}function ag(n){Me.lFrame.currentQueryIndex=n}function Z6(n){let e=n[Ne];return e.type===2?e.declTNode:e.type===1?n[Or]:null}function C_(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Z6(o),i===null||(o=o[ya],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Me.lFrame=P2();return r.currentTNode=e,r.lView=n,!0}function cg(n){let e=P2(),t=n[Ne];Me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function P2(){let n=Me.lFrame,e=n===null?null:n.child;return e===null?M2(n):e}function M2(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function k2(){let n=Me.lFrame;return Me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var x_=k2;function ug(){let n=k2();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function F2(n){return(Me.lFrame.contextLView=v2(n,Me.lFrame.contextLView))[Fn]}function ls(){return Me.lFrame.selectedIndex}function ds(n){Me.lFrame.selectedIndex=n}function lg(){let n=Me.lFrame;return tg(n.tView,n.selectedIndex)}function ue(){Me.lFrame.currentNamespace=a_}function ye(){J6()}function J6(){Me.lFrame.currentNamespace=null}function L2(){return Me.lFrame.currentNamespace}var V2=!0;function dg(){return V2}function fg(n){V2=n}function ky(n,e=null,t=null,r){let i=A_(n,e,t,r);return i.resolveInjectorInitializers(),i}function A_(n,e=null,t=null,r,i=new Set){let o=[t||Yn,u2(n)];return r=r||(typeof n=="object"?void 0:cr(n)),new ga(o,e||gd(),r||null,i)}var Lt=class n{static THROW_IF_NOT_FOUND=fa;static NULL=new ud;static create(e,t){if(Array.isArray(e))return ky({name:""},t,e,"");{let r=e.name??"";return ky({name:r},e.parent,e.providers,r)}}static \u0275prov=ie({token:n,providedIn:"any",factory:()=>fe(Yy)});static __NG_ELEMENT_ID__=-1},Jt=new ce(""),fs=(()=>{class n{static __NG_ELEMENT_ID__=e5;static __NG_ENV_ID__=t=>t}return n})(),Fy=class extends fs{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return f_(t,e),()=>y2(t,e)}};function e5(){return new Fy(je())}var Yr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ur=new ce("",{providedIn:"root",factory:()=>{let n=z(Wt),e;return t=>{e??=n.get(Yr),e.handleError(t)}}}),B2={provide:ss,useValue:()=>void z(Yr),multi:!0};function S_(n){return typeof n=="function"&&n[Mn]!==void 0}function Ti(n,e){let t=ay(n,e?.equal),r=t[Mn];return t.set=i=>aa(r,i),t.update=i=>mp(r,i),t.asReadonly=U2.bind(t),t}function U2(){let n=this[Mn];if(n.readonlyFn===void 0){let e=()=>this();e[Mn]=n,n.readonlyFn=e}return n.readonlyFn}function T_(n){return S_(n)&&typeof n.set=="function"}var ao=class{},hg=new ce("",{providedIn:"root",factory:()=>!1});var b_=new ce(""),D_=new ce("");var pg=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=t5}return n})();function t5(){return new pg(je(),Ln())}var lo=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new un(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Re(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),ru=(()=>{class n{internalPendingTasks=z(lo);scheduler=z(ao);errorHandler=z(ur);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})();function xd(...n){}var R_=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new Ly})}return n})(),Ly=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function au(n){return{toString:n}.toString()}var gg="__parameters__";function a5(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function vD(n,e,t){return au(()=>{let r=a5(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let f=c.hasOwnProperty(gg)?c[gg]:Object.defineProperty(c,gg,{value:[]})[gg];for(;f.length<=l;)f.push(null);return(f[l]=f[l]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var lr=qy(vD("Optional"),8);var yD=qy(vD("SkipSelf"),4);function c5(n){return typeof n=="function"}var Ig=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function _D(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ni=(()=>{let n=()=>ED;return n.ngInherit=!0,n})();function ED(n){return n.type.prototype.ngOnChanges&&(n.setInput=l5),u5}function u5(){let n=ID(this),e=n?.current;if(e){let t=n.previous;if(t===os)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function l5(n,e,t,r,i){let o=this.declaredInputs[r],s=ID(n)||d5(n,{previous:os,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ig(u&&u.currentValue,t,c===os),_D(n,e,i,t)}var wD="__ngSimpleChanges__";function ID(n){return n[wD]||null}function d5(n,e){return n[wD]=e}var j2=[];var ut=function(n,e=null,t){for(let r=0;r<j2.length;r++){let i=j2[r];i(n,e,t)}};function f5(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ED(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function CD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),l!=null&&(n.destroyHooks??=[]).push(t,l)}}function yg(n,e,t){xD(n,e,3,t)}function _g(n,e,t,r){(n[Ce]&3)===t&&xD(n,e,t,r)}function N_(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function xD(n,e,t,r){let i=r!==void 0?n[_a]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[_a]+=65536),(a<o||o==-1)&&(h5(n,t,e,c),n[_a]=(n[_a]&4294901760)+c+2),c++}function H2(n,e){ut(4,n,e);let t=Fe(null);try{e.call(n)}finally{Fe(t),ut(5,n,e)}}function h5(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Ce]>>14<n[_a]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,H2(a,o)):H2(a,o)}var ou=-1,xa=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function p5(n){return(n.flags&8)!==0}function g5(n){return(n.flags&16)!==0}function m5(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];v5(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function AD(n){return n===3||n===4||n===6}function v5(n){return n.charCodeAt(0)===64}function Td(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?$2(n,t,i,null,e[++r]):$2(n,t,i,null,null))}}return n}function $2(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function SD(n){return n!==ou}function Cg(n){return n&32767}function y5(n){return n>>16}function xg(n,e){let t=y5(n),r=e;for(;t>0;)r=r[ya],t--;return r}var H_=!0;function Ag(n){let e=H_;return H_=n,e}var _5=256,TD=_5-1,bD=5,E5=0,bi={};function w5(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ma)&&(r=t[ma]),r==null&&(r=t[ma]=E5++);let i=r&TD,o=1<<i;e.data[n+(i>>bD)]|=o}function Sg(n,e){let t=DD(n,e);if(t!==-1)return t;let r=e[Ne];r.firstCreatePass&&(n.injectorIndex=e.length,O_(r.data,n),O_(e,null),O_(r.blueprint,null));let i=pE(n,e),o=n.injectorIndex;if(SD(i)){let s=Cg(i),a=xg(i,e),c=a[Ne].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function O_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function DD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function pE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=MD(i),r===null)return ou;if(t++,i=i[ya],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ou}function $_(n,e,t){w5(n,e,t)}function I5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(AD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function RD(n,e,t){if(t&8||n!==void 0)return n;Yp(e,"NodeInjector")}function ND(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[va],o=Kn(void 0);try{return i?i.get(e,r,t&8):Wy(e,r,t&8)}finally{Kn(o)}}return RD(r,e,t)}function OD(n,e,t,r=0,i){if(n!==null){if(e[Ce]&2048&&!(r&2)){let s=S5(n,e,t,r,bi);if(s!==bi)return s}let o=PD(n,e,t,r,bi);if(o!==bi)return o}return ND(e,t,r,i)}function PD(n,e,t,r,i){let o=x5(t);if(typeof o=="function"){if(!C_(e,n,r))return r&1?RD(i,t,r):ND(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Yp(t);else return s}finally{x_()}}else if(typeof o=="number"){let s=null,a=DD(n,e),c=ou,u=r&1?e[Pr][Or]:null;for((a===-1||r&4)&&(c=a===-1?pE(n,e):e[a+8],c===ou||!z2(r,!1)?a=-1:(s=e[Ne],a=Cg(c),e=xg(c,e)));a!==-1;){let l=e[Ne];if(G2(o,a,l.data)){let f=C5(a,e,t,s,r,u);if(f!==bi)return f}c=e[a+8],c!==ou&&z2(r,e[Ne].data[a+8]===u)&&G2(o,a,e)?(s=l,a=Cg(c),e=xg(c,e)):a=-1}}return i}function C5(n,e,t,r,i,o){let s=e[Ne],a=s.data[n+8],c=r==null?us(a)&&H_:r!=s&&(a.type&3)!==0,u=i&1&&o===a,l=Eg(a,s,t,c,u);return l!==null?bd(e,s,l,a):bi}function Eg(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,l=o>>20,f=r?a:a+l,h=i?a+l:u;for(let p=f;p<h;p++){let m=s[p];if(p<c&&t===m||p>=c&&m.type===t)return p}if(i){let p=s[c];if(p&&Si(p)&&p.type===t)return c}return null}function bd(n,e,t,r){let i=n[t],o=e.data;if(i instanceof xa){let s=i;s.resolving&&zy(r2(o[t]));let a=Ag(s.canSeeViewProviders);s.resolving=!0;let c=o[t].type||o[t],u,l=s.injectImpl?Kn(s.injectImpl):null,f=C_(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&f5(t,o[t],e)}finally{l!==null&&Kn(l),Ag(a),s.resolving=!1,x_()}}return i}function x5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ma)?n[ma]:void 0;return typeof e=="number"?e>=0?e&TD:A5:e}function G2(n,e,t){let r=1<<n;return!!(t[e+(n>>bD)]&r)}function z2(n,e){return!(n&2)&&!(n&1&&e)}var Ca=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return OD(this._tNode,this._lView,e,ha(r),t)}};function A5(){return new Ca(Ln(),je())}function ho(n){return au(()=>{let e=n.prototype.constructor,t=e[cd]||G_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[cd]||G_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function G_(n){return Vy(n)?()=>{let e=G_(Sn(n));return e&&e()}:rs(n)}function S5(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Ce]&2048&&!Jc(s);){let a=PD(o,s,t,r|2,bi);if(a!==bi)return a;let c=o.parent;if(!c){let u=s[o_];if(u){let l=u.get(t,bi,r);if(l!==bi)return l}c=MD(s),s=s[ya]}o=c}return i}function MD(n){let e=n[Ne],t=e.type;return t===2?e.declTNode:t===1?n[Or]:null}function Od(n){return I5(Ln(),n)}function T5(){return cu(Ln(),je())}function cu(n,e){return new dr(Jr(n,e))}var dr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=T5}return n})();function b5(n){return n instanceof dr?n.nativeElement:n}function D5(){return this._results[Symbol.iterator]()}var Tg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Gt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=s2(e);(this._changesDetected=!o2(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=D5};function kD(n){return(n.flags&128)===128}var gE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gE||{}),FD=new Map,R5=0;function N5(){return R5++}function O5(n){FD.set(n[vd],n)}function z_(n){FD.delete(n[vd])}var W2="__ngContext__";function Pd(n,e){Ai(e)?(n[W2]=e[vd],O5(e)):n[W2]=e}function LD(n){return BD(n[Zc])}function VD(n){return BD(n[Nr])}function BD(n){for(;n!==null&&!Zr(n);)n=n[Nr];return n}var W_;function mE(n){W_=n}function UD(){if(W_!==void 0)return W_;if(typeof document<"u")return document;throw new re(210,!1)}var Bg=new ce("",{providedIn:"root",factory:()=>P5}),P5="ng",Ug=new ce(""),gs=new ce("",{providedIn:"platform",factory:()=>"unknown"});var jg=new ce("",{providedIn:"root",factory:()=>UD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var M5="h",k5="b";var jD=!1,HD=new ce("",{providedIn:"root",factory:()=>jD});var F5=(n,e,t,r)=>{};function L5(n,e,t,r){F5(n,e,t,r)}var V5=()=>null;function $D(n,e,t=!1){return V5(n,e,t)}function GD(n,e){let t=n.contentQueries;if(t!==null){let r=Fe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ag(o),a.contentQueries(2,e[s],s)}}}finally{Fe(r)}}}function q_(n,e,t){ag(0);let r=Fe(null);try{e(n,t)}finally{Fe(r)}}function zD(n,e,t){if(s_(e)){let r=Fe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Fe(r)}}}var fo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(fo||{});var mg;function B5(){if(mg===void 0&&(mg=null,co.trustedTypes))try{mg=co.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return mg}function q2(n){return B5()?.createScriptURL(n)||n}var bg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wp})`}};function uu(n){return n instanceof bg?n.changingThisBreaksApplicationSecurity:n}function vE(n,e){let t=WD(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Wp})`)}return t===e}function WD(n){return n instanceof bg&&n.getTypeName()||null}var U5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qD(n){return n=String(n),n.match(U5)?n:"unsafe:"+n}var Hg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Hg||{});function ms(n){let e=YD();return e?e.sanitize(Hg.URL,n)||"":vE(n,"URL")?uu(n):qD(fd(n))}function KD(n){let e=YD();if(e)return q2(e.sanitize(Hg.RESOURCE_URL,n)||"");if(vE(n,"ResourceURL"))return q2(uu(n));throw new re(904,!1)}function j5(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?KD:ms}function yE(n,e,t){return j5(e,t)(n)}function YD(){let n=je();return n&&n[Ci].sanitizer}function XD(n){return n instanceof Function?n():n}function H5(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var QD="ng-template";function $5(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&H5(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(_E(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function _E(n){return n.type===4&&n.value!==QD}function G5(n,e,t){let r=n.type===4&&!t?QD:n.value;return e===r}function z5(n,e,t){let r=4,i=n.attrs,o=i!==null?K5(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ei(r)&&!ei(c))return!1;if(s&&ei(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!G5(n,c,t)||c===""&&e.length===1){if(ei(r))return!1;s=!0}}else if(r&8){if(i===null||!$5(n,i,c,t)){if(ei(r))return!1;s=!0}}else{let u=e[++a],l=W5(c,i,_E(n),t);if(l===-1){if(ei(r))return!1;s=!0;continue}if(u!==""){let f;if(l>o?f="":f=i[l+1].toLowerCase(),r&2&&u!==f){if(ei(r))return!1;s=!0}}}}return ei(r)||s}function ei(n){return(n&1)===0}function W5(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Y5(e,n)}function q5(n,e,t=!1){for(let r=0;r<e.length;r++)if(z5(n,e[r],t))return!0;return!1}function K5(n){for(let e=0;e<n.length;e++){let t=n[e];if(AD(t))return e}return n.length}function Y5(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function K2(n,e){return n?":not("+e.trim()+")":e}function X5(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ei(s)&&(e+=K2(o,i),i=""),r=s,o=o||!ei(r);t++}return i!==""&&(e+=K2(o,i)),e}function Q5(n){return n.map(X5).join(",")}function Z5(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ei(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var ri={};function J5(n,e){return n.createText(e)}function eV(n,e,t){n.setValue(e,t)}function ZD(n,e,t){return n.createElement(e,t)}function Dg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function Y2(n,e,t,r,i){r!==null?Dg(n,e,t,r,i):JD(n,e,t)}function tV(n,e,t){n.removeChild(null,e,t)}function nV(n,e,t){n.setAttribute(e,"style",t)}function rV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function eR(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&m5(n,e,r),i!==null&&rV(n,e,i),o!==null&&nV(n,e,o)}function EE(n,e,t,r,i,o,s,a,c,u,l){let f=Xn+r,h=f+i,p=iV(f,h),m=typeof u=="function"?u():u;return p[Ne]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:l}}function iV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ri);return t}function oV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=EE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wE(n,e,t,r,i,o,s,a,c,u,l){let f=e.blueprint.slice();return f[Qr]=i,f[Ce]=r|4|128|8|64|1024,(u!==null||n&&n[Ce]&2048)&&(f[Ce]|=2048),l_(f),f[gn]=f[ya]=n,f[Fn]=t,f[Ci]=s||n&&n[Ci],f[Vt]=a||n&&n[Vt],f[va]=c||n&&n[va]||null,f[Or]=o,f[vd]=N5(),f[md]=l,f[o_]=u,f[Pr]=e.type==2?n[Pr]:f,f}function sV(n,e,t){let r=Jr(e,n),i=oV(t),o=n[Ci].rendererFactory,s=IE(n,wE(n,i,null,tR(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function tR(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function nR(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function IE(n,e){return n[Zc]?n[i_][Nr]=e:n[Zc]=e,n[i_]=e,e}function U(n=1){rR(vn(),je(),ls()+n,!1)}function rR(n,e,t,r){if(!r)if((e[Ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&yg(e,o,t)}else{let o=n.preOrderHooks;o!==null&&_g(e,o,0,t)}ds(t)}var $g=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($g||{});function K_(n,e,t,r){let i=Fe(null);try{let[o,s,a]=n.inputs[t],c=null;(s&$g.SignalBased)!==0&&(c=e[o][Mn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):_D(e,c,o,r)}finally{Fe(i)}}function iR(n,e,t,r,i){let o=ls(),s=r&2;try{ds(-1),s&&e.length>Xn&&rR(n,e,Xn,!1),ut(s?2:0,i,t),t(r,i)}finally{ds(o),ut(s?3:1,i,t)}}function CE(n,e,t){hV(n,e,t),(t.flags&64)===64&&pV(n,e,t)}function oR(n,e,t=Jr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function aV(n,e,t,r){let o=r.get(HD,jD)||t===fo.ShadowDom,s=n.selectRootElement(e,o);return cV(s),s}function cV(n){uV(n)}var uV=()=>null;function lV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sR(n,e,t,r,i,o){let s=e[Ne];if(xE(n,s,e,t,r)){us(n)&&fV(e,n.index);return}dV(n,e,t,r,i,o)}function dV(n,e,t,r,i,o){if(n.type&3){let s=Jr(n,e);t=lV(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function fV(n,e){let t=kr(e,n);t[Ce]&16||(t[Ce]|=64)}function hV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;us(t)&&sV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Sg(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=bd(e,n,s,t);if(Pd(c,e),o!==null&&yV(e,s-r,c,a,t,o),Si(a)){let u=kr(t.index,e);u[Fn]=bd(e,n,s,t)}}}function pV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=N2();try{ds(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];sg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&gV(c,u)}}finally{ds(-1),sg(s)}}function gV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function aR(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];q5(e,o.selectors,!1)&&(r??=[],Si(o)?r.unshift(o):r.push(o))}return r}function mV(n,e,t,r,i,o){let s=Jr(n,e);vV(e[Vt],s,o,n.value,t,r,i)}function vV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?fd(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function yV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];K_(r,t,c,u)}}function _V(n,e){let t=n[va];if(!t)return;t.get(ur,null)?.(e)}function xE(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],f=e.data[u];K_(f,t[u],l,i),a=!0}if(o)for(let c of o){let u=t[c],l=e.data[c];K_(l,u,r,i),a=!0}return a}function EV(n,e){let t=kr(e,n),r=t[Ne];wV(r,t);let i=t[Qr];i!==null&&t[md]===null&&(t[md]=$D(i,t[va])),ut(18),AE(r,t,t[Fn]),ut(19,t[Fn])}function wV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function AE(n,e,t){cg(e);try{let r=n.viewQuery;r!==null&&q_(1,r,t);let i=n.template;i!==null&&iR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xi]?.finishViewCreation(n),n.staticContentQueries&&GD(n,e),n.staticViewQueries&&q_(2,n.viewQuery,t);let o=n.components;o!==null&&IV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,ug()}}function IV(n,e){for(let t=0;t<e.length;t++)EV(n,e[t])}function CV(n,e,t,r){let i=Fe(null);try{let o=e.tView,a=n[Ce]&4096?4096:16,c=wE(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[as]=u;let l=n[xi];return l!==null&&(c[xi]=l.createEmbeddedView(o)),AE(o,c,t),c}finally{Fe(i)}}function X2(n,e){return!e||e.firstChild===null||kD(n)}var Q2=!1,xV=new ce(""),AV;function SE(n,e){return AV(n,e)}var Di=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Di||{});function TE(n){return(n.flags&32)===32}function iu(n,e,t,r,i){if(r!=null){let o,s=!1;Zr(r)?o=r:Ai(r)&&(s=!0,r=r[Qr]);let a=Mr(r);n===0&&t!==null?i==null?JD(e,t,a):Dg(e,t,a,i||null,!0):n===1&&t!==null?Dg(e,t,a,i||null,!0):n===2?tV(e,a,s):n===3&&e.destroyNode(a),o!=null&&LV(e,n,o,t,i)}}function SV(n,e){cR(n,e),e[Qr]=null,e[Or]=null}function TV(n,e,t,r,i,o){r[Qr]=i,r[Or]=e,Gg(n,r,t,1,i,o)}function cR(n,e){e[Ci].changeDetectionScheduler?.notify(9),Gg(n,e,e[Vt],2,null,null)}function bV(n){let e=n[Zc];if(!e)return P_(n[Ne],n);for(;e;){let t=null;if(Ai(e))t=e[Zc];else{let r=e[Qn];r&&(t=r)}if(!t){for(;e&&!e[Nr]&&e!==n;)Ai(e)&&P_(e[Ne],e),e=e[gn];e===null&&(e=n),Ai(e)&&P_(e[Ne],e),t=e&&e[Nr]}e=t}}function bE(n,e){let t=n[wa],r=t.indexOf(e);t.splice(r,1)}function uR(n,e){if(eu(e))return;let t=e[Vt];t.destroyNode&&Gg(n,e,t,3,null,null),bV(e)}function P_(n,e){if(eu(e))return;let t=Fe(null);try{e[Ce]&=-129,e[Ce]|=256,e[Er]&&dp(e[Er]),RV(n,e),DV(n,e),e[Ne].type===1&&e[Vt].destroy();let r=e[as];if(r!==null&&Zr(e[gn])){r!==e[gn]&&bE(r,e);let i=e[xi];i!==null&&i.detachView(n)}z_(e)}finally{Fe(t)}}function DV(n,e){let t=n.cleanup,r=e[Qc];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Qc]=null);let i=e[so];if(i!==null){e[so]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[yd];if(o!==null){e[yd]=null;for(let s of o)s.destroy()}}function RV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof xa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ut(4,a,c);try{c.call(a)}finally{ut(5,a,c)}}else{ut(4,i,o);try{o.call(i)}finally{ut(5,i,o)}}}}}function NV(n,e,t){return OV(n,e.parent,t)}function OV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qr];if(us(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===fo.None||i===fo.Emulated)return null}return Jr(r,t)}function PV(n,e,t){return kV(n,e,t)}function MV(n,e,t){return n.type&40?Jr(n,t):null}var kV=MV,Z2;function DE(n,e,t,r){let i=NV(n,r,e),o=e[Vt],s=r.parent||e[Or],a=PV(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Y2(o,i,t[c],a,!1);else Y2(o,i,t,a,!1);Z2!==void 0&&Z2(o,r,e,t,i)}function Ad(n,e){if(e!==null){let t=e.type;if(t&3)return Jr(e,n);if(t&4)return Y_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ad(n,r);{let i=n[e.index];return Zr(i)?Y_(-1,i):Mr(i)}}else{if(t&128)return Ad(n,e.next);if(t&32)return SE(e,n)()||Mr(n[e.index]);{let r=lR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=is(n[Pr]);return Ad(i,r)}else return Ad(n,e.next)}}}return null}function lR(n,e){if(e!==null){let r=n[Pr][Or],i=e.projection;return r.projection[i]}return null}function Y_(n,e){let t=Qn+n+1;if(t<e.length){let r=e[t],i=r[Ne].firstChild;if(i!==null)return Ad(r,i)}return e[cs]}function RE(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Pd(Mr(a),r),t.flags|=2),!TE(t))if(c&8)RE(n,e,t.child,r,i,o,!1),iu(e,n,i,a,o);else if(c&32){let u=SE(t,r),l;for(;l=u();)iu(e,n,i,l,o);iu(e,n,i,a,o)}else c&16?FV(n,e,r,t,i,o):iu(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Gg(n,e,t,r,i,o){RE(t,r,n.firstChild,e,i,o,!1)}function FV(n,e,t,r,i,o){let s=t[Pr],c=s[Or].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];iu(e,n,i,l,o)}else{let u=c,l=s[gn];kD(r)&&(u.flags|=128),RE(n,e,u,l,i,o,!0)}}function LV(n,e,t,r,i){let o=t[cs],s=Mr(t);o!==s&&iu(e,n,r,o,i);for(let a=Qn;a<t.length;a++){let c=t[a];Gg(c[Ne],c,n,e,r,o)}}function VV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Di.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Di.Important),n.setStyle(t,r,i,o))}}function Dd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Mr(o)),Zr(o)&&dR(o,r);let s=t.type;if(s&8)Dd(n,e,t.child,r);else if(s&32){let a=SE(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=lR(e,t);if(Array.isArray(a))r.push(...a);else{let c=is(e[Pr]);Dd(c[Ne],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function dR(n,e){for(let t=Qn;t<n.length;t++){let r=n[t],i=r[Ne].firstChild;i!==null&&Dd(r[Ne],r,i,e)}n[cs]!==n[Qr]&&e.push(n[cs])}function fR(n){if(n[Ea]!==null){for(let e of n[Ea])e.impl.addSequence(e);n[Ea].length=0}}var hR=[];function BV(n){return n[Er]??UV(n)}function UV(n){let e=hR.pop()??Object.create(HV);return e.lView=n,e}function jV(n){n.lView[Er]!==n&&(n.lView=null,hR.push(n))}var HV=le(G({},oa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{tu(n.lView)},consumerOnSignalRead(){this.lView[Er]=this}});function $V(n){let e=n[Er]??Object.create(GV);return e.lView=n,e}var GV=le(G({},oa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=is(n.lView);for(;e&&!pR(e[Ne]);)e=is(e);e&&d_(e)},consumerOnSignalRead(){this.lView[Er]=this}});function pR(n){return n.type!==2}function gR(n){if(n[yd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[yd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ce]&8192)}}var zV=100;function NE(n,e=0){let r=n[Ci].rendererFactory,i=!1;i||r.begin?.();try{WV(n,e)}finally{i||r.end?.()}}function WV(n,e){let t=__();try{E_(!0),X_(n,e);let r=0;for(;wd(n);){if(r===zV)throw new re(103,!1);r++,X_(n,1)}}finally{E_(t)}}function mR(n,e){y_(e?Id.Exhaustive:Id.OnlyDirtyViews);try{NE(n)}finally{y_(Id.Off)}}function qV(n,e,t,r){if(eu(e))return;let i=e[Ce],o=!1,s=!1;cg(e);let a=!0,c=null,u=null;o||(pR(n)?(u=BV(e),c=sa(u)):up()===null?(a=!1,u=$V(e),c=sa(u)):e[Er]&&(dp(e[Er]),e[Er]=null));try{l_(e),b2(n.bindingStartIndex),t!==null&&iR(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let p=n.preOrderCheckHooks;p!==null&&yg(e,p,null)}else{let p=n.preOrderHooks;p!==null&&_g(e,p,0,null),N_(e,0)}if(s||KV(e),gR(e),vR(e,0),n.contentQueries!==null&&GD(n,e),!o)if(l){let p=n.contentCheckHooks;p!==null&&yg(e,p)}else{let p=n.contentHooks;p!==null&&_g(e,p,1),N_(e,1)}XV(n,e);let f=n.components;f!==null&&_R(e,f,0);let h=n.viewQuery;if(h!==null&&q_(2,h,r),!o)if(l){let p=n.viewCheckHooks;p!==null&&yg(e,p)}else{let p=n.viewHooks;p!==null&&_g(e,p,2),N_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Jp]){for(let p of e[Jp])p();e[Jp]=null}o||(fR(e),e[Ce]&=-73)}catch(l){throw o||tu(e),l}finally{u!==null&&(Mc(u,c),a&&jV(u)),ug()}}function vR(n,e){for(let t=LD(n);t!==null;t=VD(t))for(let r=Qn;r<t.length;r++){let i=t[r];yR(i,e)}}function KV(n){for(let e=LD(n);e!==null;e=VD(e)){if(!(e[Ce]&2))continue;let t=e[wa];for(let r=0;r<t.length;r++){let i=t[r];d_(i)}}}function YV(n,e,t){ut(18);let r=kr(e,n);yR(r,t),ut(19,r[Fn])}function yR(n,e){rg(n)&&X_(n,e)}function X_(n,e){let r=n[Ne],i=n[Ce],o=n[Er],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&td(o)),s||=!1,o&&(o.dirty=!1),n[Ce]&=-9217,s)qV(r,n,r.template,n[Fn]);else if(i&8192){gR(n),vR(n,1);let a=r.components;a!==null&&_R(n,a,1),fR(n)}}function _R(n,e,t){for(let r=0;r<e.length;r++)YV(n,e[r],t)}function XV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ds(~i);else{let o=i,s=t[++r],a=t[++r];R2(s,o);let c=e[o];ut(24,c),a(2,c),ut(25,c)}}}finally{ds(-1)}}function OE(n,e){let t=__()?64:1088;for(n[Ci].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=is(n);if(Jc(n)&&!r)return n;n=r}return null}function ER(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function QV(n,e,t,r=!0){let i=e[Ne];if(ZV(i,e,n,t),r){let s=Y_(t,n),a=e[Vt],c=a.parentNode(n[cs]);c!==null&&TV(i,n[Or],a,e,c,s)}let o=e[md];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Q_(n,e){if(n.length<=Qn)return;let t=Qn+e,r=n[t];if(r){let i=r[as];i!==null&&i!==n&&bE(i,r),e>0&&(n[t-1][Nr]=r[Nr]);let o=hd(n,Qn+e);SV(r[Ne],r);let s=o[xi];s!==null&&s.detachView(o[Ne]),r[gn]=null,r[Nr]=null,r[Ce]&=-129}return r}function ZV(n,e,t,r){let i=Qn+r,o=t.length;r>0&&(t[i-1][Nr]=e),r<o-Qn?(e[Nr]=t[i],Ky(t,Qn+r,e)):(t.push(e),e[Nr]=null),e[gn]=t;let s=e[as];s!==null&&t!==s&&wR(s,e);let a=e[xi];a!==null&&a.insertView(n),ig(e),e[Ce]|=128}function wR(n,e){let t=n[wa],r=e[gn];if(Ai(r))n[Ce]|=2;else{let i=r[gn][Pr];e[Pr]!==i&&(n[Ce]|=2)}t===null?n[wa]=[e]:t.push(e)}var hs=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ne];return Dd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return eu(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gn];if(Zr(e)){let t=e[_d],r=t?t.indexOf(this):-1;r>-1&&(Q_(e,r),hd(t,r))}this._attachedToViewContainer=!1}uR(this._lView[Ne],this._lView)}onDestroy(e){f_(this._lView,e)}markForCheck(){OE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){ig(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,NE(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[va].get(xV,Q2)}catch{this.exhaustive=Q2}}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Jc(this._lView),t=this._lView[as];t!==null&&!e&&bE(t,this._lView),cR(this._lView[Ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=Jc(this._lView),r=this._lView[as];r!==null&&!t&&wR(r,this._lView),ig(this._lView)}};var ps=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=JV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=CV(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new hs(o)}}return n})();function JV(){return PE(Ln(),je())}function PE(n,e){return n.type&4?new ps(e,n,cu(n,e)):null}function ME(n,e,t,r,i){let o=n.data[e];if(o===null)o=e9(n,e,t,r,i),D2()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=S2();o.injectorIndex=s===null?-1:s.injectorIndex}return nu(o,!0),o}function e9(n,e,t,r,i){let o=m_(),s=v_(),a=s?o:o&&o.parent,c=n.data[e]=n9(n,a,t,e,r,i);return t9(n,c,o,s),c}function t9(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function n9(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return C2()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Ule=new RegExp(`^(\\d+)*(${k5}|${M5})*(.*)`);var r9=()=>null;function J2(n,e){return r9(n,e)}var IR=class{},zg=class{},Z_=class{resolveComponentFactory(e){throw new re(917,!1)}},Md=class{static NULL=new Z_},Aa=class{},Ni=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>i9()}return n})();function i9(){let n=je(),e=Ln(),t=kr(e.index,n);return(Ai(t)?t:n)[Vt]}var CR=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>null})}return n})();var wg={},J_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,wg,r);return i!==wg||t===wg?i:this.parentInjector.get(e,t,r)}};function eD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qp(i,a);else if(o==2){let c=a,u=e[++s];r=qp(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function J(n,e=0){let t=je();if(t===null)return fe(n,e);let r=Ln();return OD(r,t,Sn(n),e)}function kE(){let n="invalid";throw new Error(n)}function xR(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let l of s)if(l.resolveHostDirectives!==null){[a,c,u]=l.resolveHostDirectives(s);break}a9(n,e,t,a,o,c,u)}o!==null&&r!==null&&o9(t,r,o)}function o9(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function s9(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function a9(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let h=0;h<a;h++){let p=r[h];!c&&Si(p)&&(c=!0,s9(n,t,h)),$_(Sg(t,e),n,p.type)}h9(t,n.data.length,a);for(let h=0;h<a;h++){let p=r[h];p.providersResolver&&p.providersResolver(p)}let u=!1,l=!1,f=nR(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=r[h];if(t.mergedAttrs=Td(t.mergedAttrs,p.hostAttrs),u9(n,t,e,f,p),f9(f,p,i),s!==null&&s.has(p)){let[y,w]=s.get(p);t.directiveToIndex.set(p.type,[f,y+t.directiveStart,w+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,f);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let m=p.type.prototype;!u&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!l&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),f++}c9(n,t,o)}function c9(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))tD(0,e,i,r),tD(1,e,i,r),rD(e,r,!1);else{let o=t.get(i);nD(0,e,o,r),nD(1,e,o,r),rD(e,r,!0)}}}function tD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),AR(e,o)}}function nD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),AR(e,s)}}function AR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function rD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||_E(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function u9(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=rs(i.type,!0)),s=new xa(o,Si(i),J);n.blueprint[r]=s,t[r]=s,l9(n,e,r,nR(n,t,i.hostVars,ri),i)}function l9(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;d9(s)!=a&&s.push(a),s.push(t,r,o)}}function d9(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function f9(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Si(e)&&(t[""]=n)}}function h9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function SR(n,e,t,r,i,o,s,a){let c=e.consts,u=Ed(c,s),l=ME(e,n,2,r,u);return o&&xR(e,t,l,Ed(c,a),i),l.mergedAttrs=Td(l.mergedAttrs,l.attrs),l.attrs!==null&&eD(l,l.attrs,!1),l.mergedAttrs!==null&&eD(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function TR(n,e){CD(n,e),s_(e)&&n.queries.elementEnd(e)}function FE(n){return DR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function bR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function DR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function LE(n,e,t){return n[e]=t}function Ri(n,e,t){if(t===ri)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function RR(n,e,t,r){let i=Ri(n,e,t);return Ri(n,e+1,r)||i}function p9(n,e,t,r,i){let o=RR(n,e,t,r);return Ri(n,e+2,i)||o}function M_(n,e,t){return function r(i){let o=us(n)?kr(n.index,e):e;OE(o,5);let s=e[Fn],a=iD(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=iD(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function iD(n,e,t,r){let i=Fe(null);try{return ut(6,e,t),t(r)!==!1}catch(o){return _V(n,o),!1}finally{ut(7,e,t),Fe(i)}}function g9(n,e,t,r,i,o,s,a){let c=eg(n),u=!1,l=null;if(!r&&c&&(l=m9(e,t,o,n.index)),l!==null){let f=l.__ngLastListenerFn__||l;f.__ngNextListenerFn__=s,l.__ngLastListenerFn__=s,u=!0}else{let f=Jr(n,t),h=r?r(f):f;L5(t,h,o,a);let p=i.listen(h,o,a),m=r?y=>r(Mr(y[n.index])):n.index;NR(m,e,t,o,a,p,!1)}return u}function m9(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Qc],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function NR(n,e,t,r,i,o,s){let a=e.firstCreatePass?p_(e):null,c=h_(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function oD(n,e,t,r,i,o){let s=e[t],a=e[Ne],u=a.data[t].outputs[r],f=s[u].subscribe(o);NR(n.index,a,e,i,o,f,!0)}var eE=Symbol("BINDING");var Rg=class extends Md{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=uo(e);return new Sa(t,this.ngModule)}};function v9(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&$g.SignalBased)!==0};return i&&(o.transform=i),o})}function y9(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function _9(n,e,t){let r=e instanceof Wt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new J_(t,r):t}function E9(n){let e=n.get(Aa,null);if(e===null)throw new re(407,!1);let t=n.get(CR,null),r=n.get(ao,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function w9(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return ZD(e,t,t==="svg"?a_:t==="math"?p2:null)}var Sa=class extends zg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=v9(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=y9(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Q5(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ut(22);let a=Fe(null);try{let c=this.componentDef,u=I9(r,c,s,o),l=_9(c,i||this.ngModule,e),f=E9(l),h=f.rendererFactory.createRenderer(null,c),p=r?aV(h,r,c.encapsulation,l):w9(c,h),m=s?.some(sD)||o?.some(S=>typeof S!="function"&&S.bindings.some(sD)),y=wE(null,u,null,512|tR(c),null,null,f,h,l,null,$D(p,l,!0));y[Xn]=p,cg(y);let w=null;try{let S=SR(Xn,u,y,"#host",()=>u.directiveRegistry,!0,0);p&&(eR(h,p,S),Pd(p,y)),CE(u,y,S),zD(u,S,y),TR(u,S),t!==void 0&&x9(S,this.ngContentSelectors,t),w=kr(S.index,y),y[Fn]=w[Fn],AE(u,y,null)}catch(S){throw w!==null&&z_(w),z_(y),S}finally{ut(23),ug()}return new Ng(this.componentType,y,!!m)}finally{Fe(a)}}};function I9(n,e,t,r){let i=n?["ng-version","20.0.0"]:Z5(e.selectors[0]),o=null,s=null,a=0;if(t)for(let l of t)a+=l[eE].requiredVars,l.create&&(l.targetIdx=0,(o??=[]).push(l)),l.update&&(l.targetIdx=0,(s??=[]).push(l));if(r)for(let l=0;l<r.length;l++){let f=r[l];if(typeof f!="function")for(let h of f.bindings){a+=h[eE].requiredVars;let p=l+1;h.create&&(h.targetIdx=p,(o??=[]).push(h)),h.update&&(h.targetIdx=p,(s??=[]).push(h))}}let c=[e];if(r)for(let l of r){let f=typeof l=="function"?l:l.type,h=Zy(f);c.push(h)}return EE(0,null,C9(o,s),1,a,c,null,null,null,[i],null)}function C9(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function sD(n){let e=n[eE].kind;return e==="input"||e==="twoWay"}var Ng=class extends IR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=tg(t[Ne],Xn),this.location=cu(this._tNode,t),this.instance=kr(this._tNode.index,t)[Fn],this.hostView=this.changeDetectorRef=new hs(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=xE(r,i[Ne],i,e,t);this.previousInputValues.set(e,t);let s=kr(r.index,i);OE(s,1)}get injector(){return new Ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function x9(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var po=(()=>{class n{static __NG_ELEMENT_ID__=A9}return n})();function A9(){let n=Ln();return PR(n,je())}var S9=po,OR=class extends S9{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return cu(this._hostTNode,this._hostLView)}get injector(){return new Ca(this._hostTNode,this._hostLView)}get parentInjector(){let e=pE(this._hostTNode,this._hostLView);if(SD(e)){let t=xg(e,this._hostLView),r=Cg(e),i=t[Ne].data[r+8];return new Ca(i,t)}else return new Ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=aD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Qn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=J2(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,X2(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!c5(e),u;if(c)u=t;else{let w=t||{};u=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}let l=c?e:new Sa(uo(e)),f=r||this.parentInjector;if(!o&&l.ngModule==null){let S=(c?f:this.parentInjector).get(Wt,null);S&&(o=S)}let h=uo(l.componentType??{}),p=J2(this._lContainer,h?.id??null),m=p?.firstChild??null,y=l.create(f,i,m,o,s,a);return this.insertImpl(y.hostView,u,X2(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(m2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[gn],u=new OR(c,c[Or],c[gn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return QV(s,i,o,r),e.attachToViewContainerRef(),Ky(k_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=aD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Q_(this._lContainer,t);r&&(hd(k_(this._lContainer),t),uR(r[Ne],r))}detach(e){let t=this._adjustIndex(e,-1),r=Q_(this._lContainer,t);return r&&hd(k_(this._lContainer),t)!=null?new hs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function aD(n){return n[_d]}function k_(n){return n[_d]||(n[_d]=[])}function PR(n,e){let t,r=e[n.index];return Zr(r)?t=r:(t=ER(r,e,null,n),e[n.index]=t,IE(e,t)),b9(t,e,n,r),new OR(t,n,e)}function T9(n,e){let t=n[Vt],r=t.createComment(""),i=Jr(e,n),o=t.parentNode(i);return Dg(t,o,r,t.nextSibling(i),!1),r}var b9=N9,D9=()=>!1;function R9(n,e,t){return D9(n,e,t)}function N9(n,e,t,r){if(n[cs])return;let i;t.type&8?i=Mr(r):i=T9(e,t),n[cs]=i}var tE=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},nE=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)VE(e,t).matches!==null&&this.queries[t].setDirty()}},rE=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=B9(e):this.predicate=e}},iE=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},oE=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,O9(t,o)),this.matchTNodeWithReadOption(e,t,Eg(t,e,o,!1,!1))}else r===ps?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Eg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===dr||i===po||i===ps&&t.type&4)this.addMatch(t.index,-2);else{let o=Eg(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function O9(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function P9(n,e){return n.type&11?cu(n,e):n.type&4?PE(n,e):null}function M9(n,e,t,r){return t===-1?P9(e,n):t===-2?k9(n,e,r):bd(n,n[Ne],t,e)}function k9(n,e,t){if(t===dr)return cu(e,n);if(t===ps)return PE(e,n);if(t===po)return PR(e,n)}function MR(n,e,t,r){let i=e[xi].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=o[u];a.push(M9(e,l,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function sE(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=MR(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],l=e[-c];for(let f=Qn;f<l.length;f++){let h=l[f];h[as]===h[gn]&&sE(h[Ne],h,u,r)}if(l[wa]!==null){let f=l[wa];for(let h=0;h<f.length;h++){let p=f[h];sE(p[Ne],p,u,r)}}}}}return r}function F9(n,e){return n[xi].queries[e].queryList}function L9(n,e,t){let r=new Tg((t&4)===4);return _2(n,e,r,r.destroy),(e[xi]??=new nE).queries.push(new tE(r))-1}function V9(n,e,t){let r=vn();return r.firstCreatePass&&(U9(r,new rE(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),L9(r,je(),e)}function B9(n){return n.split(",").map(e=>e.trim())}function U9(n,e,t){n.queries===null&&(n.queries=new iE),n.queries.track(new oE(e,t))}function VE(n,e){return n.queries.getByIndex(e)}function j9(n,e){let t=n[Ne],r=VE(t,e);return r.crossesNgTemplate?sE(t,n,e,[]):MR(t,n,r,e)}var cD=new Set;function lu(n){cD.has(n)||(cD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ta=class{},Wg=class{};var Og=class extends Ta{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Rg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Qy(e);this._bootstrapComponents=XD(o.bootstrap),this._r3Injector=A_(e,t,[{provide:Ta,useValue:this},{provide:Md,useValue:this.componentFactoryResolver},...r],cr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pg=class extends Wg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Og(this.moduleType,e,[])}};var Rd=class extends Ta{injector;componentFactoryResolver=new Rg(this);instance=null;constructor(e){super();let t=new ga([...e.providers,{provide:Ta,useValue:this},{provide:Md,useValue:this.componentFactoryResolver}],e.parent||gd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function du(n,e,t=null){return new Rd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var H9=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Jy(!1,t.type),i=r.length>0?du([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(fe(Wt))})}return n})();function Kt(n){return au(()=>{let e=kR(n),t=le(G({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(H9).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||fo.Emulated,styles:n.styles||Yn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&lu("NgStandalone"),FR(t);let r=n.dependencies;return t.directiveDefs=uD(r,!1),t.pipeDefs=uD(r,!0),t.id=q9(t),t})}function $9(n){return uo(n)||Zy(n)}function G9(n){return n!==null}function ii(n){return au(()=>({type:n.type,bootstrap:n.bootstrap||Yn,declarations:n.declarations||Yn,imports:n.imports||Yn,exports:n.exports||Yn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function z9(n,e){if(n==null)return os;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=$g.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function W9(n){if(n==null)return os;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Tt(n){return au(()=>{let e=kR(n);return FR(e),e})}function fu(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function kR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||os,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Yn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:z9(n.inputs,e),outputs:W9(n.outputs),debugInfo:null}}function FR(n){n.features?.forEach(e=>e(n))}function uD(n,e){if(!n)return null;let t=e?c2:$9;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(G9)}function q9(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function K9(n){return Object.getPrototypeOf(n.prototype).constructor}function wr(n){let e=K9(n.type),t=!0,r=[n];for(;e;){let i;if(Si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=F_(n.inputs),s.declaredInputs=F_(n.declaredInputs),s.outputs=F_(n.outputs);let a=i.hostBindings;a&&J9(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&Q9(n,c),u&&Z9(n,u),Y9(n,i),t2(n.outputs,i.outputs),Si(i)&&i.data.animation){let l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===wr&&(t=!1)}}e=Object.getPrototypeOf(e)}X9(r)}function Y9(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function X9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Td(i.hostAttrs,t=Td(t,i.hostAttrs))}}function F_(n){return n===os?{}:n===Yn?[]:n}function Q9(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Z9(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function J9(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function eB(n,e,t,r,i,o,s,a,c){let u=e.consts,l=ME(e,n,4,s||null,a||null);g_()&&xR(e,t,l,Ed(u,c),aR),l.mergedAttrs=Td(l.mergedAttrs,l.attrs),CD(e,l);let f=l.tView=EE(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),f.queries=e.queries.embeddedTView(l)),l}function tB(n,e,t,r,i,o,s,a,c,u,l){let f=t+Xn,h=e.firstCreatePass?eB(f,e,n,r,i,o,s,a,u):e.data[f];c&&(h.flags|=c),nu(h,!1);let p=nB(e,n,h,t);dg()&&DE(e,n,p,h),Pd(p,n);let m=ER(p,n,p,h);return n[f]=m,IE(n,m),R9(m,h,n),eg(h)&&CE(e,n,h),u!=null&&oR(n,h,l),h}function xe(n,e,t,r,i,o,s,a){let c=je(),u=vn(),l=Ed(u.consts,o);return tB(c,u,n,e,t,r,i,l,void 0,s,a),xe}var nB=rB;function rB(n,e,t,r){return fg(!0),e[Vt].createComment("")}var qg=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(qg||{}),Da=new ce(""),LR=!1,aE=class extends Gt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,n_()&&(this.destroyRef=z(fs,{optional:!0})??void 0,this.pendingTasks=z(lo,{optional:!0})??void 0)}emit(e){let t=Fe(null);try{super.next(e)}finally{Fe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ft&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},qt=aE;function VR(n){let e,t;function r(){n=xd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function lD(n){return queueMicrotask(()=>n()),()=>{n=xd}}var BE="isAngularZone",Mg=BE+"_ID",iB=0,nt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new qt(!1);onMicrotaskEmpty=new qt(!1);onStable=new qt(!1);onError=new qt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=LR}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,aB(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(BE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,oB,xd,xd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},oB={};function UE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){VR(()=>{n.callbackScheduled=!1,cE(n),n.isCheckStableRunning=!0,UE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),cE(n)}function aB(n){let e=()=>{sB(n)},t=iB++;n._inner=n._inner.fork({name:"angular",properties:{[BE]:!0,[Mg]:t,[Mg+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(cB(c))return r.invokeTask(o,s,a,c);try{return dD(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),fD(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return dD(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uB(c)&&e(),fD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,cE(n),UE(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function cE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function dD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fD(n){n._nesting--,UE(n)}var kg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new qt;onMicrotaskEmpty=new qt;onStable=new qt;onError=new qt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function cB(n){return BR(n,"__ignore_ng_zone__")}function uB(n){return BR(n,"__scheduler_tick__")}function BR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var jE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),UR=[0,1,2,3],jR=(()=>{class n{ngZone=z(nt);scheduler=z(ao);errorHandler=z(Yr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){z(Da,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ut(16),this.executing=!0;for(let r of UR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ut(17)}register(t){let{view:r}=t;r!==void 0?((r[Ea]??=[]).push(t),tu(r),r[Ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(qg.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ea];e&&(this.view[Ea]=e.filter(t=>t!==this))}};function Kg(n,e){!e?.injector&&r_(Kg);let t=e?.injector??z(Lt);return lu("NgAfterNextRender"),dB(n,t,e,!0)}function lB(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function dB(n,e,t,r){let i=e.get(jE);i.impl??=e.get(jR);let o=e.get(Da,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(fs):null,a=e.get(pg,null,{optional:!0}),c=new Fg(i.impl,lB(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var HE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var $E=new ce("");function vs(n){return!!n&&typeof n.then=="function"}function GE(n){return!!n&&typeof n.subscribe=="function"}var zE=new ce("");function Yg(n){return Xr([{provide:zE,multi:!0,useValue:n}])}var WE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=z(zE,{optional:!0})??[];injector=z(Lt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=mn(this.injector,i);if(vs(o))t.push(o);else if(GE(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kd=new ce("");function HR(){sy(()=>{let n="";throw new re(600,n)})}function $R(n){return n.isBoundToModule}var fB=10;var Ra=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=z(ur);afterRenderManager=z(jE);zonelessEnabled=z(hg);rootEffectScheduler=z(R_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Gt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=z(lo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(we(t=>!t))}constructor(){z(Da,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=z(Wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Lt.NULL){return this._injector.get(nt).run(()=>{ut(10);let s=t instanceof zg;if(!this._injector.get(WE).done){let m="";throw new re(405,m)}let c;s?c=t:c=this._injector.get(Md).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=$R(c)?void 0:this._injector.get(Ta),l=r||c.selector,f=c.create(i,[],l,u),h=f.location.nativeElement,p=f.injector.get($E,null);return p?.registerApplication(h),f.onDestroy(()=>{this.detachView(f.hostView),Sd(this.components,f),p?.unregisterApplication(h)}),this._loadComponent(f),ut(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ut(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(qg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let t=Fe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Fe(t),this.afterTick.next(),ut(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Aa,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<fB;)ut(14),this.synchronizeOnce(),ut(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!wd(i))continue;let o=r&&!this.zonelessEnabled?0:1;NE(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Sd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(kd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hu(n,e,t,r){let i=je(),o=Cd();if(Ri(i,o,e)){let s=vn(),a=lg();mV(a,i,n,e,t,r)}return hu}function oe(n,e,t){let r=je(),i=Cd();if(Ri(r,i,e)){let o=vn(),s=lg();sR(s,r,n,e,r[Vt],t)}return oe}function uE(n,e,t,r,i){xE(e,n,t,i?"class":"style",r)}function _(n,e,t,r){let i=je(),o=vn(),s=Xn+n,a=i[Vt],c=o.firstCreatePass?SR(s,o,i,e,aR,g_(),t,r):o.data[s],u=hB(o,i,c,a,e,n);i[s]=u;let l=eg(c);return nu(c,!0),eR(a,u,c),!TE(c)&&dg()&&DE(o,i,u,c),(E2()===0||l)&&Pd(u,i),w2(),l&&(CE(o,i,c),zD(o,c,i)),r!==null&&oR(i,c),_}function C(){let n=Ln();v_()?T2():(n=n.parent,nu(n,!1));let e=n;x2(e)&&A2(),I2();let t=vn();return t.firstCreatePass&&TR(t,e),e.classesWithoutHost!=null&&p5(e)&&uE(t,e,je(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&g5(e)&&uE(t,e,je(),e.stylesWithoutHost,!1),C}function te(n,e,t,r){return _(n,e,t,r),C(),te}var hB=(n,e,t,r,i,o)=>(fg(!0),ZD(r,i,L2()));function Nt(){return je()}var Ia=void 0;function pB(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var gB=["en",[["a","p"],["AM","PM"],Ia],[["AM","PM"],Ia,Ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ia,"{1} 'at' {0}",Ia],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",pB],L_={};function Ir(n){let e=mB(n),t=hD(e);if(t)return t;let r=e.split("-")[0];if(t=hD(r),t)return t;if(r==="en")return gB;throw new re(701,!1)}function hD(n){return n in L_||(L_[n]=co.ng&&co.ng.common&&co.ng.common.locales&&co.ng.common.locales[n]),L_[n]}var Yt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Yt||{});function mB(n){return n.toLowerCase().replace(/_/g,"-")}var Fd="en-US";var vB=Fd;function GR(n){typeof n=="string"&&(vB=n.toLowerCase().replace(/_/g,"-"))}function ge(n,e,t){let r=je(),i=vn(),o=Ln();return zR(i,r,r[Vt],o,n,e,t),ge}function zR(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=M_(r,e,o),g9(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],l=r.hostDirectiveOutputs?.[i];if(l&&l.length)for(let f=0;f<l.length;f+=2){let h=l[f],p=l[f+1];c??=M_(r,e,o),oD(r,e,h,p,i,c)}if(u&&u.length)for(let f of u)c??=M_(r,e,o),oD(r,e,f,i,i,c)}}function Pe(n=1){return F2(n)}function qE(n,e,t){V9(n,e,t)}function Xg(n){let e=je(),t=vn(),r=I_();ag(r+1);let i=VE(t,r);if(n.dirty&&g2(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=j9(e,r);n.reset(o,b5),n.notifyOnChanges()}return!0}return!1}function Qg(){return F9(je(),I_())}function vg(n,e){return n<<17|e<<2}function ba(n){return n>>17&32767}function yB(n){return(n&2)==2}function _B(n,e){return n&131071|e<<17}function lE(n){return n|2}function su(n){return(n&131068)>>2}function V_(n,e){return n&-131069|e<<2}function EB(n){return(n&1)===1}function dE(n){return n|1}function wB(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ba(s),c=su(s);n[r]=t;let u=!1,l;if(Array.isArray(t)){let f=t;l=f[1],(l===null||Xc(f,l)>0)&&(u=!0)}else l=t;if(i)if(c!==0){let h=ba(n[a+1]);n[r+1]=vg(h,a),h!==0&&(n[h+1]=V_(n[h+1],r)),n[a+1]=_B(n[a+1],r)}else n[r+1]=vg(a,0),a!==0&&(n[a+1]=V_(n[a+1],r)),a=r;else n[r+1]=vg(c,0),a===0?a=r:n[c+1]=V_(n[c+1],r),c=r;u&&(n[r+1]=lE(n[r+1])),pD(n,l,r,!0),pD(n,l,r,!1),IB(e,l,n,r,o),s=vg(a,c),o?e.classBindings=s:e.styleBindings=s}function IB(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Xc(o,e)>=0&&(t[r+1]=dE(t[r+1]))}function pD(n,e,t,r){let i=n[t+1],o=e===null,s=r?ba(i):su(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];CB(c,e)&&(a=!0,n[s+1]=r?dE(u):lE(u)),s=r?ba(u):su(u)}a&&(n[t+1]=r?lE(i):dE(i))}function CB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Xc(n,e)>=0:!1}var ti={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xB(n){return n.substring(ti.key,ti.keyEnd)}function AB(n){return SB(n),WR(n,qR(n,0,ti.textEnd))}function WR(n,e){let t=ti.textEnd;return t===e?-1:(e=ti.keyEnd=TB(n,ti.key=e,t),qR(n,e,t))}function SB(n){ti.key=0,ti.keyEnd=0,ti.value=0,ti.valueEnd=0,ti.textEnd=n.length}function qR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function TB(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ld(n,e){return DB(n,e,null,!0),Ld}function It(n){RB(FB,bB,n,!0)}function bB(n,e){for(let t=AB(e);t>=0;t=WR(e,t))Qp(n,xB(e),!0)}function DB(n,e,t,r){let i=je(),o=vn(),s=w_(2);if(o.firstUpdatePass&&YR(o,n,s,r),e!==ri&&Ri(i,s,e)){let a=o.data[ls()];XR(o,a,i,i[Vt],n,i[s+1]=VB(e,t),r,s)}}function RB(n,e,t,r){let i=vn(),o=w_(2);i.firstUpdatePass&&YR(i,null,o,r);let s=je();if(t!==ri&&Ri(s,o,t)){let a=i.data[ls()];if(QR(a,r)&&!KR(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=qp(c,t||"")),uE(i,a,s,t,r)}else LB(i,a,s,s[Vt],s[o+1],s[o+1]=kB(n,e,t),r,o)}}function KR(n,e){return e>=n.expandoStartIndex}function YR(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ls()],s=KR(n,t);QR(o,r)&&e===null&&!s&&(e=!1),e=NB(i,o,e,r),wB(i,o,e,t,s,r)}}function NB(n,e,t,r){let i=O2(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=B_(null,n,e,t,r),t=Nd(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=B_(i,n,e,t,r),o===null){let c=OB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=B_(null,n,e,c[1],r),c=Nd(c,e.attrs,r),PB(n,e,r,c))}else o=MB(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function OB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(su(r)!==0)return n[ba(r)]}function PB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ba(i)]=r}function MB(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Nd(r,s,t)}return Nd(r,e.attrs,t)}function B_(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Nd(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Nd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Qp(n,s,t?!0:e[++o]))}return n===void 0?null:n}function kB(n,e,t){if(t==null||t==="")return Yn;let r=[],i=uu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function FB(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Qp(n,r,t)}function LB(n,e,t,r,i,o,s,a){i===ri&&(i=Yn);let c=0,u=0,l=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;l!==null||f!==null;){let h=c<i.length?i[c+1]:void 0,p=u<o.length?o[u+1]:void 0,m=null,y;l===f?(c+=2,u+=2,h!==p&&(m=f,y=p)):f===null||l!==null&&l<f?(c+=2,m=l):(u+=2,m=f,y=p),m!==null&&XR(n,e,t,r,m,y,s,a),l=c<i.length?i[c]:null,f=u<o.length?o[u]:null}}function XR(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],l=EB(u)?gD(c,e,t,i,su(u),s):void 0;if(!Lg(l)){Lg(o)||yB(u)&&(o=gD(c,null,t,i,a,s));let f=c_(ls(),t);VV(r,s,f,i,o)}}function gD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),l=u?c[1]:c,f=l===null,h=t[i+1];h===ri&&(h=f?Yn:void 0);let p=f?Zp(h,r):l===r?h:void 0;if(u&&!Lg(p)&&(p=Zp(c,r)),Lg(p)&&(a=p,s))return a;let m=n[i+1];i=s?ba(m):su(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Zp(c,r))}return a}function Lg(n){return n!==void 0}function VB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=cr(uu(n)))),n}function QR(n,e){return(n.flags&(e?8:16))!==0}function O(n,e=""){let t=je(),r=vn(),i=n+Xn,o=r.firstCreatePass?ME(r,i,1,e,null):r.data[i],s=BB(r,t,o,e,n);t[i]=s,dg()&&DE(r,t,s,o),nu(o,!1)}var BB=(n,e,t,r,i)=>(fg(!0),J5(e[Vt],r));function ZR(n,e,t,r=""){return Ri(n,Cd(),t)?e+fd(t)+r:ri}function _e(n){return Qe("",n),_e}function Qe(n,e,t){let r=je(),i=ZR(r,n,e,t);return i!==ri&&UB(r,ls(),i),Qe}function UB(n,e,t){let r=c_(e,n);eV(n[Vt],r,t)}function Zg(n,e,t){T_(e)&&(e=e());let r=je(),i=Cd();if(Ri(r,i,e)){let o=vn(),s=lg();sR(s,r,n,e,r[Vt],t)}return Zg}function KE(n,e){let t=T_(n);return t&&n.set(e),t}function Jg(n,e){let t=je(),r=vn(),i=Ln();return zR(r,t,t[Vt],i,n,e),Jg}function Na(n,e,t=""){return ZR(je(),n,e,t)}function jB(n,e,t){let r=vn();if(r.firstCreatePass){let i=Si(n);fE(t,r.data,r.blueprint,i,!0),fE(e,r.data,r.blueprint,i,!1)}}function fE(n,e,t,r,i){if(n=Sn(n),Array.isArray(n))for(let o=0;o<n.length;o++)fE(n[o],e,t,r,i);else{let o=vn(),s=je(),a=Ln(),c=pa(n)?n:Sn(n.provide),u=t_(n),l=a.providerIndexes&1048575,f=a.directiveStart,h=a.providerIndexes>>20;if(pa(n)||!n.multi){let p=new xa(u,i,J),m=j_(c,e,i?l:l+h,f);m===-1?($_(Sg(a,s),o,c),U_(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[m]=p,s[m]=p)}else{let p=j_(c,e,l+h,f),m=j_(c,e,l,l+h),y=p>=0&&t[p],w=m>=0&&t[m];if(i&&!w||!i&&!y){$_(Sg(a,s),o,c);let S=GB(i?$B:HB,t.length,i,r,u);!i&&w&&(t[m].providerFactory=S),U_(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),s.push(S)}else{let S=JR(t[i?m:p],u,!i&&r);U_(o,n,p>-1?p:m,S)}!i&&r&&w&&t[m].componentProviders++}}}function U_(n,e,t,r){let i=pa(e),o=f2(e);if(i||o){let c=(o?Sn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(t);l===-1?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function JR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function j_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function HB(n,e,t,r){return hE(this.multi,[])}function $B(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=bd(t,t[Ne],this.providerFactory.index,r);o=a.slice(0,s),hE(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],hE(i,o);return o}function hE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function GB(n,e,t,r,i){let o=new xa(n,t,J);return o.multi=[],o.index=e,o.componentProviders=0,JR(o,i,r&&!t),o}function go(n,e=[]){return t=>{t.providersResolver=(r,i)=>jB(r,i?i(n):n,e)}}function YE(n,e){let t=n[e];return t===ri?void 0:t}function zB(n,e,t,r,i,o){let s=e+t;return Ri(n,s,i)?LE(n,s+1,o?r.call(o,i):r(i)):YE(n,s+1)}function WB(n,e,t,r,i,o,s){let a=e+t;return RR(n,a,i,o)?LE(n,a+2,s?r.call(s,i,o):r(i,o)):YE(n,a+2)}function qB(n,e,t,r,i,o,s,a){let c=e+t;return p9(n,c,i,o,s)?LE(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):YE(n,c+3)}function Ot(n,e){let t=vn(),r,i=n+Xn;t.firstCreatePass?(r=KB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=rs(r.type,!0)),s,a=Kn(J);try{let c=Ag(!1),u=o();return Ag(c),u_(t,je(),i,u),u}finally{Kn(a)}}function KB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function mo(n,e,t){let r=n+Xn,i=je(),o=ng(i,r);return QE(i,r)?zB(i,og(),e,o.transform,t,o):o.transform(t)}function Vn(n,e,t,r){let i=n+Xn,o=je(),s=ng(o,i);return QE(o,i)?WB(o,og(),e,s.transform,t,r,s):s.transform(t,r)}function XE(n,e,t,r,i){let o=n+Xn,s=je(),a=ng(s,o);return QE(s,o)?qB(s,og(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function QE(n,e){return n[Ne].data[e].pure}var Vg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ZE=(()=>{class n{compileModuleSync(t){return new Pg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Qy(t),o=XD(i.declarations).reduce((s,a)=>{let c=uo(a);return c&&s.push(new Sa(c)),s},[]);return new Vg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YB=(()=>{class n{zone=z(nt);changeDetectionScheduler=z(ao);applicationRef=z(Ra);applicationErrorHandler=z(ur);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new nt(le(G({},tN()),{scheduleInRootZone:t})),[{provide:nt,useFactory:n},{provide:ss,multi:!0,useFactory:()=>{let r=z(YB,{optional:!0});return()=>r.initialize()}},{provide:ss,multi:!0,useFactory:()=>{let r=z(XB);return()=>{r.initialize()}}},e===!0?{provide:b_,useValue:!0}:[],{provide:D_,useValue:t??LR},{provide:ur,useFactory:()=>{let r=z(nt),i=z(Wt),o;return s=>{o??=i.get(Yr),r.runOutsideAngular(()=>o.handleError(s))}}}]}function tN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var XB=(()=>{class n{subscription=new Ft;initialized=!1;zone=z(nt);pendingTasks=z(lo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nN=(()=>{class n{applicationErrorHandler=z(ur);appRef=z(Ra);taskService=z(lo);ngZone=z(nt);zonelessEnabled=z(hg);tracing=z(Da,{optional:!0});disableScheduling=z(b_,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ft;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z(D_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof kg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?lD:VR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,lD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QB(){return typeof $localize<"u"&&$localize.locale||Fd}var Vd=new ce("",{providedIn:"root",factory:()=>z(Vd,{optional:!0,skipSelf:!0})||QB()});function Fr(n){return Qb(n)}function pu(n,e){return gp(n,e?.equal)}var rN=class{[Mn];constructor(e){this[Mn]=e}destroy(){this[Mn].destroy()}};var cN=Symbol("InputSignalNode#UNSET"),l7=le(G({},vp),{transformFn:void 0,applyValueToInputSignal(n,e){aa(n,e)}});function uN(n,e){let t=Object.create(l7);t.value=n,t.transformFn=e?.transform;function r(){if(Pc(t),t.value===cN){let i=null;throw new re(-950,i)}return t.value}return r[Mn]=t,r}var tm=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Od(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},d7=new ce("");d7.__NG_ELEMENT_ID__=n=>{let e=Ln();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new re(204,!1)};function iN(n,e){return uN(n,e)}function f7(n){return uN(cN,n)}var lN=(iN.required=f7,iN);var Oa=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},dN=new Oa("20.0.0");var JE=new ce(""),h7=new ce("");function Bd(n){return!n.moduleRef}function p7(n){let e=Bd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(nt);return t.run(()=>{Bd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ur),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Bd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(JE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(JE);s.add(o),n.moduleRef.onDestroy(()=>{Sd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return m7(r,t,()=>{let o=e.get(WE);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Vd,Fd);if(GR(s||Fd),!e.get(h7,!0))return Bd(n)?e.get(Ra):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Bd(n)){let c=e.get(Ra);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return g7?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var g7;function m7(n,e,t){try{let r=t();return vs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var em=null;function v7(n=[],e){return Lt.create({name:e,providers:[{provide:pd,useValue:"platform"},{provide:JE,useValue:new Set([()=>em=null])},...n]})}function y7(n=[]){if(em)return em;let e=v7(n);return em=e,HR(),_7(e),e}function _7(n){let e=n.get(Ug,null);mn(n,()=>{e?.forEach(t=>t())})}function iw(){return!1}var Pa=(()=>{class n{static __NG_ELEMENT_ID__=E7}return n})();function E7(n){return w7(Ln(),je(),(n&16)===16)}function w7(n,e,t){if(us(n)&&!t){let r=kr(n.index,e);return new hs(r,r)}else if(n.type&175){let r=e[Pr];return new hs(r,e)}return null}var ew=class{constructor(){}supports(e){return FE(e)}create(e){return new tw(e)}},I7=(n,e)=>e,tw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||I7}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<oN(r,i,o)?t:r,a=oN(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let p=h<o.length?o[h]:o[h]=0,m=p+h;l<=m&&m<u&&(o[h]=p+1)}let f=s.previousIndex;o[f]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!FE(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,bR(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new nw(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new nm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new nm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},nw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},rw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},nm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new rw,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function oN(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function sN(){return new ow([new ew])}var ow=(()=>{class n{factories;static \u0275prov=ie({token:n,providedIn:"root",factory:sN});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||sN()),deps:[[n,new yD,new lr]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new re(901,!1)}}return n})();function fN(n){ut(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=y7(r),o=[eN({}),{provide:ao,useExisting:nN},B2,...t||[]],s=new Rd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return p7({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ut(9)}}function Ma(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function hN(n){let e=uo(n);if(!e)return null;let t=new Sa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var mN=null;function Lr(){return mN}function sw(n){mN??=n}var Ud=class{},jd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>z(vN),providedIn:"platform"})}return n})(),aw=new ce(""),vN=(()=>{class n extends jd{_location;_history;_doc=z(Jt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lr().getBaseHref(this._doc)}onPopState(t){let r=Lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function rm(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function pN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function oi(n){return n&&n[0]!=="?"?`?${n}`:n}var si=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>z(om),providedIn:"root"})}return n})(),im=new ce(""),om=(()=>{class n extends si{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+oi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+oi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+oi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(fe(jd),fe(im,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ys=(()=>{class n{_subject=new Gt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=A7(pN(gN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+oi(r))}normalize(t){return n.stripTrailingSlash(x7(this._basePath,gN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=oi;static joinWithSlash=rm;static stripTrailingSlash=pN;static \u0275fac=function(r){return new(r||n)(fe(si))};static \u0275prov=ie({token:n,factory:()=>C7(),providedIn:"root"})}return n})();function C7(){return new ys(fe(si))}function x7(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function gN(n){return n.replace(/\/index.html$/,"")}function A7(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var dw=(()=>{class n extends si{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=rm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+oi(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+oi(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(fe(jd),fe(im,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();var Bn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Bn||{}),ft=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ft||{}),fr=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(fr||{}),yo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function wN(n){return Ir(n)[Yt.LocaleId]}function IN(n,e,t){let r=Ir(n),i=[r[Yt.DayPeriodsFormat],r[Yt.DayPeriodsStandalone]],o=Vr(i,e);return Vr(o,t)}function CN(n,e,t){let r=Ir(n),i=[r[Yt.DaysFormat],r[Yt.DaysStandalone]],o=Vr(i,e);return Vr(o,t)}function xN(n,e,t){let r=Ir(n),i=[r[Yt.MonthsFormat],r[Yt.MonthsStandalone]],o=Vr(i,e);return Vr(o,t)}function AN(n,e){let r=Ir(n)[Yt.Eras];return Vr(r,e)}function Hd(n,e){let t=Ir(n);return Vr(t[Yt.DateFormat],e)}function $d(n,e){let t=Ir(n);return Vr(t[Yt.TimeFormat],e)}function Gd(n,e){let r=Ir(n)[Yt.DateTimeFormat];return Vr(r,e)}function zd(n,e){let t=Ir(n),r=t[Yt.NumberSymbols][e];if(typeof r>"u"){if(e===yo.CurrencyDecimal)return t[Yt.NumberSymbols][yo.Decimal];if(e===yo.CurrencyGroup)return t[Yt.NumberSymbols][yo.Group]}return r}function SN(n){if(!n[Yt.ExtraData])throw new re(2303,!1)}function TN(n){let e=Ir(n);return SN(e),(e[Yt.ExtraData][2]||[]).map(r=>typeof r=="string"?cw(r):[cw(r[0]),cw(r[1])])}function bN(n,e,t){let r=Ir(n);SN(r);let i=[r[Yt.ExtraData][0],r[Yt.ExtraData][1]],o=Vr(i,e)||[];return Vr(o,t)||[]}function Vr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new re(2304,!1)}function cw(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var S7=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sm={},T7=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function DN(n,e,t,r){let i=F7(n);e=vo(t,e)||e;let s=[],a;for(;e;)if(a=T7.exec(e),a){s=s.concat(a.slice(1));let l=s.pop();if(!l)break;e=l}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=NN(r,c),i=k7(i,r));let u="";return s.forEach(l=>{let f=P7(l);u+=f?f(i,t,c):l==="''"?"'":l.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function dm(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function vo(n,e){let t=wN(n);if(sm[t]??={},sm[t][e])return sm[t][e];let r="";switch(e){case"shortDate":r=Hd(n,fr.Short);break;case"mediumDate":r=Hd(n,fr.Medium);break;case"longDate":r=Hd(n,fr.Long);break;case"fullDate":r=Hd(n,fr.Full);break;case"shortTime":r=$d(n,fr.Short);break;case"mediumTime":r=$d(n,fr.Medium);break;case"longTime":r=$d(n,fr.Long);break;case"fullTime":r=$d(n,fr.Full);break;case"short":let i=vo(n,"shortTime"),o=vo(n,"shortDate");r=am(Gd(n,fr.Short),[i,o]);break;case"medium":let s=vo(n,"mediumTime"),a=vo(n,"mediumDate");r=am(Gd(n,fr.Medium),[s,a]);break;case"long":let c=vo(n,"longTime"),u=vo(n,"longDate");r=am(Gd(n,fr.Long),[c,u]);break;case"full":let l=vo(n,"fullTime"),f=vo(n,"fullDate");r=am(Gd(n,fr.Full),[l,f]);break}return r&&(sm[t][e]=r),r}function am(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ai(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function b7(n,e){return ai(n,3).substring(0,e)}function en(n,e,t=0,r=!1,i=!1){return function(o,s){let a=D7(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return b7(a,e);let c=zd(s,yo.MinusSign);return ai(a,e,c,r,i)}}function D7(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new re(2301,!1)}}function Ct(n,e,t=Bn.Format,r=!1){return function(i,o){return R7(i,o,n,e,t,r)}}function R7(n,e,t,r,i,o){switch(t){case 2:return xN(e,i,r)[n.getMonth()];case 1:return CN(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=TN(e),l=bN(e,i,r),f=u.findIndex(h=>{if(Array.isArray(h)){let[p,m]=h,y=s>=p.hours&&a>=p.minutes,w=s<m.hours||s===m.hours&&a<m.minutes;if(p.hours<m.hours){if(y&&w)return!0}else if(y||w)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(f!==-1)return l[f]}return IN(e,i,r)[s<12?0:1];case 3:return AN(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new re(2302,!1)}}function cm(n){return function(e,t,r){let i=-1*r,o=zd(t,yo.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ai(s,2,o)+ai(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+ai(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+ai(s,2,o)+":"+ai(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+ai(s,2,o)+":"+ai(Math.abs(i%60),2,o);default:throw new re(2302,!1)}}}var N7=0,lm=4;function O7(n){let e=dm(n,N7,1).getDay();return dm(n,0,1+(e<=lm?lm:lm+7)-e)}function RN(n){let e=n.getDay(),t=e===0?-3:lm-e;return dm(n.getFullYear(),n.getMonth(),n.getDate()+t)}function uw(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=RN(t),s=O7(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ai(i,n,zd(r,yo.MinusSign))}}function um(n,e=!1){return function(t,r){let o=RN(t).getFullYear();return ai(o,n,zd(r,yo.MinusSign),e)}}var lw={};function P7(n){if(lw[n])return lw[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ct(3,ft.Abbreviated);break;case"GGGG":e=Ct(3,ft.Wide);break;case"GGGGG":e=Ct(3,ft.Narrow);break;case"y":e=en(0,1,0,!1,!0);break;case"yy":e=en(0,2,0,!0,!0);break;case"yyy":e=en(0,3,0,!1,!0);break;case"yyyy":e=en(0,4,0,!1,!0);break;case"Y":e=um(1);break;case"YY":e=um(2,!0);break;case"YYY":e=um(3);break;case"YYYY":e=um(4);break;case"M":case"L":e=en(1,1,1);break;case"MM":case"LL":e=en(1,2,1);break;case"MMM":e=Ct(2,ft.Abbreviated);break;case"MMMM":e=Ct(2,ft.Wide);break;case"MMMMM":e=Ct(2,ft.Narrow);break;case"LLL":e=Ct(2,ft.Abbreviated,Bn.Standalone);break;case"LLLL":e=Ct(2,ft.Wide,Bn.Standalone);break;case"LLLLL":e=Ct(2,ft.Narrow,Bn.Standalone);break;case"w":e=uw(1);break;case"ww":e=uw(2);break;case"W":e=uw(1,!0);break;case"d":e=en(2,1);break;case"dd":e=en(2,2);break;case"c":case"cc":e=en(7,1);break;case"ccc":e=Ct(1,ft.Abbreviated,Bn.Standalone);break;case"cccc":e=Ct(1,ft.Wide,Bn.Standalone);break;case"ccccc":e=Ct(1,ft.Narrow,Bn.Standalone);break;case"cccccc":e=Ct(1,ft.Short,Bn.Standalone);break;case"E":case"EE":case"EEE":e=Ct(1,ft.Abbreviated);break;case"EEEE":e=Ct(1,ft.Wide);break;case"EEEEE":e=Ct(1,ft.Narrow);break;case"EEEEEE":e=Ct(1,ft.Short);break;case"a":case"aa":case"aaa":e=Ct(0,ft.Abbreviated);break;case"aaaa":e=Ct(0,ft.Wide);break;case"aaaaa":e=Ct(0,ft.Narrow);break;case"b":case"bb":case"bbb":e=Ct(0,ft.Abbreviated,Bn.Standalone,!0);break;case"bbbb":e=Ct(0,ft.Wide,Bn.Standalone,!0);break;case"bbbbb":e=Ct(0,ft.Narrow,Bn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ct(0,ft.Abbreviated,Bn.Format,!0);break;case"BBBB":e=Ct(0,ft.Wide,Bn.Format,!0);break;case"BBBBB":e=Ct(0,ft.Narrow,Bn.Format,!0);break;case"h":e=en(3,1,-12);break;case"hh":e=en(3,2,-12);break;case"H":e=en(3,1);break;case"HH":e=en(3,2);break;case"m":e=en(4,1);break;case"mm":e=en(4,2);break;case"s":e=en(5,1);break;case"ss":e=en(5,2);break;case"S":e=en(6,1);break;case"SS":e=en(6,2);break;case"SSS":e=en(6,3);break;case"Z":case"ZZ":case"ZZZ":e=cm(0);break;case"ZZZZZ":e=cm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=cm(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=cm(2);break;default:return null}return lw[n]=e,e}function NN(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function M7(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function k7(n,e,t){let i=n.getTimezoneOffset(),o=NN(e,i);return M7(n,-1*(o-i))}function F7(n){if(yN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return dm(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(S7))return L7(r)}let e=new Date(n);if(!yN(e))throw new re(2302,!1);return e}function L7(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function yN(n){return n instanceof Date&&!isNaN(n.valueOf())}var fm=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Oi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new fm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),_N(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);_N(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(po),J(ps),J(ow))};static \u0275dir=Tt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function _N(n,e){n.context.$implicit=e.item}var Tn=(()=>{class n{_viewContainer;_context=new hm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){EN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){EN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(po),J(ps))};static \u0275dir=Tt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),hm=class{$implicit=null;ngIf=null};function EN(n,e){if(n&&!n.createEmbeddedView)throw new re(2020,!1)}function ON(n,e){return new re(2100,!1)}var V7=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,ka=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw ON(n,t);return t.replace(V7,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=fu({name:"titlecase",type:n,pure:!0})}return n})();var B7="mediumDate",PN=new ce(""),MN=new ce(""),_o=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??B7,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return DN(t,s,o||this.locale,a)}catch(s){throw ON(n,s.message)}}static \u0275fac=function(r){return new(r||n)(J(Vd,16),J(PN,24),J(MN,24))};static \u0275pipe=fu({name:"date",type:n,pure:!0})}return n})();var yn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Rr({})}return n})();function fw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var hw="browser",kN="server";function pw(n){return n===kN}var Wd=class{};var FN=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new gw(z(Jt),window)})}return n})(),gw=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(le(G({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=U7(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(le(G({},t),{left:i-s[0],top:o-s[1]}))}};function U7(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var mm=new ce(""),_w=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(fe(mm),fe(nt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),qd=class{_doc;constructor(e){this._doc=e}manager},pm="ng-app-id";function LN(n){for(let e of n)e.remove()}function VN(n,e){let t=e.createElement("style");return t.textContent=n,t}function j7(n,e,t,r){let i=n.head?.querySelectorAll(`style[${pm}="${e}"],link[${pm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(pm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function vw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Ew=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=pw(o),j7(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,VN);r?.forEach(i=>this.addUsage(i,this.external,vw))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(LN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])LN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,VN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,vw(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(pm,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(fe(Jt),fe(Bg),fe(jg,8),fe(gs))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),mw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ww=/%COMP%/g;var UN="%COMP%",H7=`_nghost-${UN}`,$7=`_ngcontent-${UN}`,G7=!0,z7=new ce("",{providedIn:"root",factory:()=>G7});function W7(n){return $7.replace(ww,n)}function q7(n){return H7.replace(ww,n)}function jN(n,e){return e.map(t=>t.replace(ww,n))}var Iw=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Kd(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof gm?i.applyToHost(t):i instanceof Yd&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,f=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case fo.Emulated:o=new gm(c,u,r,this.appId,l,s,a,f,h);break;case fo.ShadowDom:return new yw(c,u,t,r,s,a,this.nonce,f,h);default:o=new Yd(c,u,r,l,s,a,f,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(fe(_w),fe(Ew),fe(Bg),fe(z7),fe(Jt),fe(gs),fe(nt),fe(jg),fe(Da,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Kd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(mw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(BN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=mw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=mw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Di.DashCase|Di.Important)?e.style.setProperty(t,r,i&Di.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Di.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Lr().getGlobalEventTarget(this.doc,e),!e))throw new re(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function BN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var yw=class extends Kd{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=i.styles;l=jN(i.id,l);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}let f=i.getExternalStyles?.();if(f)for(let h of f){let p=vw(h,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Yd=class extends Kd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?jN(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},gm=class extends Yd{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,u,l),this.contentAttr=W7(l),this.hostAttr=q7(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vm=class n extends Ud{supportsDOMEvents=!0;static makeCurrent(){sw(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=K7();return t==null?null:Y7(t)}resetBaseElement(){Xd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fw(document.cookie,e)}},Xd=null;function K7(){return Xd=Xd||document.head.querySelector("base"),Xd?Xd.getAttribute("href"):null}function Y7(n){return new URL(n,document.baseURI).pathname}var X7=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),$N=(()=>{class n extends qd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(fe(Jt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),HN=["alt","control","meta","shift"],Q7={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Z7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},GN=(()=>{class n extends qd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),HN.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Q7[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),HN.forEach(s=>{if(s!==i){let a=Z7[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(fe(Jt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();function Cw(n,e){return fN(G({rootComponent:n},J7(e)))}function J7(n){return{appProviders:[...iU,...n?.providers??[]],platformProviders:rU}}function eU(){vm.makeCurrent()}function tU(){return new Yr}function nU(){return mE(document),document}var rU=[{provide:gs,useValue:hw},{provide:Ug,useValue:eU,multi:!0},{provide:Jt,useFactory:nU}];var iU=[{provide:pd,useValue:"root"},{provide:Yr,useFactory:tU},{provide:mm,useClass:$N,multi:!0,deps:[Jt]},{provide:mm,useClass:GN,multi:!0,deps:[Jt]},Iw,Ew,_w,{provide:Aa,useExisting:Iw},{provide:Wd,useClass:X7},[]];var zN=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(fe(Jt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Oe="primary",lf=Symbol("RouteTitle"),bw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Va(n){return new bw(n)}function JN(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function sU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pi(n[t],e[t]))return!1;return!0}function Pi(n,e){let t=n?Dw(n):void 0,r=e?Dw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!eO(n[i],e[i]))return!1;return!0}function Dw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function eO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function tO(n){return n.length>0?n[n.length-1]:null}function wo(n){return wy(n)?n:vs(n)?We(Promise.resolve(n)):ve(n)}var aU={exact:rO,subset:iO},nO={exact:cU,subset:uU,ignored:()=>!0};function WN(n,e,t){return aU[t.paths](n.root,e.root,t.matrixParams)&&nO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cU(n,e){return Pi(n,e)}function rO(n,e,t){if(!Fa(n.segments,e.segments)||!Em(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!rO(n.children[r],e.children[r],t))return!1;return!0}function uU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>eO(n[t],e[t]))}function iO(n,e,t){return oO(n,e,e.segments,t)}function oO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fa(i,t)||e.hasChildren()||!Em(i,t,r))}else if(n.segments.length===t.length){if(!Fa(n.segments,t)||!Em(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!iO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Fa(n.segments,i)||!Em(n.segments,i,r)||!n.children[Oe]?!1:oO(n.children[Oe],e,o,r)}}function Em(n,e,t){return e.every((r,i)=>nO[t](n[i].parameters,r.parameters))}var ki=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){return fU.serialize(this)}},Ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wm(this)}},_s=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Va(this.parameters),this._parameterMap}toString(){return aO(this)}};function lU(n,e){return Fa(n,e)&&n.every((t,r)=>Pi(t.parameters,e[r].parameters))}function Fa(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function dU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Oe&&(t=t.concat(e(i,r)))}),t}var Ba=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new Es,providedIn:"root"})}return n})(),Es=class{parse(e){let t=new Nw(e);return new ki(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Qd(e.root,!0)}`,r=gU(e.queryParams),i=typeof e.fragment=="string"?`#${hU(e.fragment)}`:"";return`${t}${r}${i}`}},fU=new Es;function wm(n){return n.segments.map(e=>aO(e)).join("/")}function Qd(n,e){if(!n.hasChildren())return wm(n);if(e){let t=n.children[Oe]?Qd(n.children[Oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Oe&&r.push(`${i}:${Qd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=dU(n,(r,i)=>i===Oe?[Qd(n.children[Oe],!1)]:[`${i}:${Qd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Oe]!=null?`${wm(n)}/${t[0]}`:`${wm(n)}/(${t.join("//")})`}}function sO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ym(n){return sO(n).replace(/%3B/gi,";")}function hU(n){return encodeURI(n)}function Rw(n){return sO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Im(n){return decodeURIComponent(n)}function qN(n){return Im(n.replace(/\+/g,"%20"))}function aO(n){return`${Rw(n.path)}${pU(n.parameters)}`}function pU(n){return Object.entries(n).map(([e,t])=>`;${Rw(e)}=${Rw(t)}`).join("")}function gU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ym(t)}=${ym(i)}`).join("&"):`${ym(t)}=${ym(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var mU=/^[^\/()?;#]+/;function xw(n){let e=n.match(mU);return e?e[0]:""}var vU=/^[^\/()?;=#]+/;function yU(n){let e=n.match(vU);return e?e[0]:""}var _U=/^[^=?&#]+/;function EU(n){let e=n.match(_U);return e?e[0]:""}var wU=/^[^&#]+/;function IU(n){let e=n.match(wU);return e?e[0]:""}var Nw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Oe]=new Ze(e,t)),r}parseSegment(){let e=xw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new _s(Im(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=yU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=xw(this.remaining);i&&(r=i,this.capture(r))}e[Im(t)]=Im(r)}parseQueryParam(e){let t=EU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=IU(this.remaining);s&&(r=s,this.capture(r))}let i=qN(t),o=qN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Oe]:new Ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function cO(n){return n.segments.length>0?new Ze([],{[Oe]:n}):n}function uO(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=uO(i);if(r===Oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ze(n.segments,e);return CU(t)}function CU(n){if(n.numberOfChildren===1&&n.children[Oe]){let e=n.children[Oe];return new Ze(n.segments.concat(e.segments),e.children)}return n}function ws(n){return n instanceof ki}function lO(n,e,t=null,r=null){let i=dO(n);return fO(i,e,t,r)}function dO(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Ze(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=cO(r);return e??i}function fO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Aw(i,i,i,t,r);let o=xU(e);if(o.toRoot())return Aw(i,i,new Ze([],{}),t,r);let s=AU(o,i,n),a=s.processChildren?Jd(s.segmentGroup,s.index,o.commands):pO(s.segmentGroup,s.index,o.commands);return Aw(i,s.segmentGroup,a,t,r)}function Cm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function tf(n){return typeof n=="object"&&n!=null&&n.outlets}function Aw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;n===e?s=t:s=hO(n,e,t);let a=cO(uO(s));return new ki(a,o,i)}function hO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=hO(o,e,t)}),new Ze(n.segments,r)}var xm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cm(r[0]))throw new re(4003,!1);let i=r.find(tf);if(i&&i!==tO(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new xm(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new xm(t,e,r)}var vu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function AU(n,e,t){if(n.isAbsolute)return new vu(e,!0,0);if(!t)return new vu(e,!1,NaN);if(t.parent===null)return new vu(t,!0,0);let r=Cm(n.commands[0])?0:1,i=t.segments.length-1+r;return SU(t,i,n.numberOfDoubleDots)}function SU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new vu(r,!1,i-o)}function TU(n){return tf(n[0])?n[0].outlets:{[Oe]:n}}function pO(n,e,t){if(n??=new Ze([],{}),n.segments.length===0&&n.hasChildren())return Jd(n,e,t);let r=bU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ze(n.segments.slice(0,r.pathIndex),{});return o.children[Oe]=new Ze(n.segments.slice(r.pathIndex),n.children),Jd(o,0,i)}else return r.match&&i.length===0?new Ze(n.segments,{}):r.match&&!n.hasChildren()?Ow(n,e,t):r.match?Jd(n,0,i):Ow(n,e,t)}function Jd(n,e,t){if(t.length===0)return new Ze(n.segments,{});{let r=TU(t),i={};if(Object.keys(r).some(o=>o!==Oe)&&n.children[Oe]&&n.numberOfChildren===1&&n.children[Oe].segments.length===0){let o=Jd(n.children[Oe],e,t);return new Ze(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=pO(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ze(n.segments,i)}}function bU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(tf(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!YN(c,u,s))return o;r+=2}else{if(!YN(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ow(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(tf(o)){let c=DU(o.outlets);return new Ze(r,c)}if(i===0&&Cm(t[0])){let c=n.segments[e];r.push(new _s(c.path,KN(t[0]))),i++;continue}let s=tf(o)?o.outlets[Oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Cm(a)?(r.push(new _s(s,KN(a))),i+=2):(r.push(new _s(s,{})),i++)}return new Ze(r,{})}function DU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ow(new Ze([],{}),0,r))}),e}function KN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function YN(n,e,t){return n==t.path&&Pi(e,t.parameters)}var yu="imperative",ln=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ln||{}),xr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Is=class extends xr{type=ln.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Br=class extends xr{urlAfterRedirects;type=ln.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Zn||{}),Eu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Eu||{}),Mi=class extends xr{reason;code;type=ln.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fi=class extends xr{reason;code;type=ln.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},wu=class extends xr{error;target;type=ln.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nf=class extends xr{urlAfterRedirects;state;type=ln.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Am=class extends xr{urlAfterRedirects;state;type=ln.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class extends xr{urlAfterRedirects;state;shouldActivate;type=ln.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tm=class extends xr{urlAfterRedirects;state;type=ln.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends xr{urlAfterRedirects;state;type=ln.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class{route;type=ln.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rm=class{route;type=ln.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nm=class{snapshot;type=ln.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Om=class{snapshot;type=ln.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{snapshot;type=ln.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mm=class{snapshot;type=ln.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iu=class{routerEvent;position;anchor;type=ln.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},rf=class{},Cu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function RU(n){return!(n instanceof rf)&&!(n instanceof Cu)}function NU(n,e){return n.providers&&!n._injector&&(n._injector=du(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ci(n){return n.outlet||Oe}function OU(n,e){let t=n.filter(r=>ci(r)===e);return t.push(...n.filter(r=>ci(r)!==e)),t}function df(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var km=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return df(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ua(this.rootInjector)}},Ua=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new km(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(fe(Wt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Pw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Pw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Mw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mw(e,this._root).map(t=>t.value)}};function Pw(n,e){if(n===e.value)return e;for(let t of e.children){let r=Pw(n,t);if(r)return r}return null}function Mw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Mw(n,t);if(r.length)return r.unshift(e),r}return[]}var Cr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function mu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var of=class extends Fm{snapshot;constructor(e,t){super(e),this.snapshot=t,Hw(this,e)}toString(){return this.snapshot.toString()}};function gO(n){let e=PU(n),t=new un([new _s("",{})]),r=new un({}),i=new un({}),o=new un({}),s=new un(""),a=new Ur(t,r,o,s,i,Oe,n,e.root);return a.snapshot=e.root,new of(new Cr(a,[]),e)}function PU(n){let e={},t={},r={},i="",o=new La([],e,r,i,t,Oe,n,null,{});return new sf("",new Cr(o,[]))}var Ur=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(we(u=>u[lf]))??ve(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(we(e=>Va(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(we(e=>Va(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:G(G({},e.params),n.params),data:G(G({},e.data),n.data),resolve:G(G(G(G({},n.data),e.data),i?.data),n._resolvedData)}:r={params:G({},n.params),data:G({},n.data),resolve:G(G({},n.data),n._resolvedData??{})},i&&vO(i)&&(r.resolve[lf]=i.title),r}var La=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[lf]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Va(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},sf=class extends Fm{url;constructor(e,t){super(t),this.url=e,Hw(this,t)}toString(){return mO(this._root)}};function Hw(n,e){e.value._routerState=n,e.children.forEach(t=>Hw(n,t))}function mO(n){let e=n.children.length>0?` { ${n.children.map(mO).join(", ")} } `:"";return`${n.value}${e}`}function Sw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pi(e.params,t.params)||n.paramsSubject.next(t.params),sU(e.url,t.url)||n.urlSubject.next(t.url),Pi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kw(n,e){let t=Pi(n.params,e.params)&&lU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||kw(n.parent,e.parent))}function vO(n){return typeof n.title=="string"||n.title===null}var yO=new ce(""),ff=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Oe;activateEvents=new qt;deactivateEvents=new qt;attachEvents=new qt;detachEvents=new qt;routerOutletData=lN(void 0);parentContexts=z(Ua);location=z(po);changeDetector=z(Pa);inputBinder=z(hf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Fw(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Tt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ni]})}return n})(),Fw=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ur?this.route:e===Ua?this.childContexts:e===yO?this.outletData:this.parent.get(e,t)}},hf=new ce(""),$w=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=id([r.queryParams,r.params,r.data]).pipe(kn(([o,s,a],c)=>(a=G(G(G({},o),s),a),c===0?ve(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=hN(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Gw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&te(0,"router-outlet")},dependencies:[ff],encapsulation:2})}return n})();function zw(n){let e=n.children&&n.children.map(zw),t=e?le(G({},n),{children:e}):G({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Oe&&(t.component=Gw),t}function MU(n,e,t){let r=af(n,e._root,t?t._root:void 0);return new of(r,e)}function af(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=kU(n,e,t);return new Cr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>af(n,a)),s}}let r=FU(e.value),i=e.children.map(o=>af(n,o));return new Cr(r,i)}}function kU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return af(n,r,i);return af(n,r)})}function FU(n){return new Ur(new un(n.url),new un(n.params),new un(n.queryParams),new un(n.fragment),new un(n.data),n.outlet,n.component,n)}var xu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},_O="ngNavigationCancelingError";function Vm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ws(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EO(!1,Zn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function EO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[_O]=!0,t.cancellationCode=e,t}function LU(n){return wO(n)&&ws(n.url)}function wO(n){return!!n&&n[_O]}var VU=(n,e,t,r)=>we(i=>(new Lw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Lw=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=mu(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=mu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=mu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=mu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Mm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Om(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Sw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Sw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Bm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_u=class{component;route;constructor(e,t){this.component=e,this.route=t}};function BU(n,e,t){let r=n._root,i=e?e._root:null;return Zd(r,i,t,[r.value])}function UU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Su(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!By(n)?n:e.get(n):r}function Zd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=mu(e);return n.children.forEach(s=>{jU(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ef(a,t.getContext(s),i)),i}function jU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=HU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Bm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zd(n,e,a?a.children:null,r,i):Zd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _u(a.outlet.component,s))}else s&&ef(e,a,i),i.canActivateChecks.push(new Bm(r)),o.component?Zd(n,null,a?a.children:null,r,i):Zd(n,null,t,r,i);return i}function HU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fa(n.url,e.url)||!Pi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kw(n,e)||!Pi(n.queryParams,e.queryParams);case"paramsChange":default:return!kw(n,e)}}function ef(n,e,t){let r=mu(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ef(s,e.children.getContext(o),t):ef(s,null,t):ef(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new _u(e.outlet.component,i)):t.canDeactivateChecks.push(new _u(null,i)):t.canDeactivateChecks.push(new _u(null,i))}function pf(n){return typeof n=="function"}function $U(n){return typeof n=="boolean"}function GU(n){return n&&pf(n.canLoad)}function zU(n){return n&&pf(n.canActivate)}function WU(n){return n&&pf(n.canActivateChild)}function qU(n){return n&&pf(n.canDeactivate)}function KU(n){return n&&pf(n.canMatch)}function IO(n){return n instanceof ro||n?.name==="EmptyError"}var _m=Symbol("INITIAL_VALUE");function Au(){return kn(n=>id(n.map(e=>e.pipe(_r(1),Ay(_m)))).pipe(we(e=>{for(let t of e)if(t!==!0){if(t===_m)return _m;if(t===!1||YU(t))return t}return!0}),ar(e=>e!==_m),_r(1)))}function YU(n){return ws(n)||n instanceof xu}function XU(n,e){return zt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ve(le(G({},t),{guardsResult:!0})):QU(s,r,i,n).pipe(zt(a=>a&&$U(a)?ZU(r,o,n,e):ve(a)),we(a=>le(G({},t),{guardsResult:a})))})}function QU(n,e,t,r){return We(n).pipe(zt(i=>rj(i.component,i.route,t,e,r)),oo(i=>i!==!0,!0))}function ZU(n,e,t,r){return We(e).pipe(ts(i=>qc(ej(i.route.parent,r),JU(i.route,r),nj(n,i.path,t),tj(n,i.route,t))),oo(i=>i!==!0,!0))}function JU(n,e){return n!==null&&e&&e(new Pm(n)),ve(!0)}function ej(n,e){return n!==null&&e&&e(new Nm(n)),ve(!0)}function tj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ve(!0);let i=r.map(o=>od(()=>{let s=df(e)??t,a=Su(o,s),c=zU(a)?a.canActivate(e,n):mn(s,()=>a(e,n));return wo(c).pipe(oo())}));return ve(i).pipe(Au())}function nj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>UU(s)).filter(s=>s!==null).map(s=>od(()=>{let a=s.guards.map(c=>{let u=df(s.node)??t,l=Su(c,u),f=WU(l)?l.canActivateChild(r,n):mn(u,()=>l(r,n));return wo(f).pipe(oo())});return ve(a).pipe(Au())}));return ve(o).pipe(Au())}function rj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ve(!0);let s=o.map(a=>{let c=df(e)??i,u=Su(a,c),l=qU(u)?u.canDeactivate(n,e,t,r):mn(c,()=>u(n,e,t,r));return wo(l).pipe(oo())});return ve(s).pipe(Au())}function ij(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ve(!0);let o=i.map(s=>{let a=Su(s,n),c=GU(a)?a.canLoad(e,t):mn(n,()=>a(e,t));return wo(c)});return ve(o).pipe(Au(),CO(r))}function CO(n){return hy(pn(e=>{if(typeof e!="boolean")throw Vm(n,e)}),we(e=>e===!0))}function oj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ve(!0);let o=i.map(s=>{let a=Su(s,n),c=KU(a)?a.canMatch(e,t):mn(n,()=>a(e,t));return wo(c)});return ve(o).pipe(Au(),CO(r))}var cf=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},uf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function gu(n){return zc(new cf(n))}function sj(n){return zc(new re(4e3,!1))}function aj(n){return zc(EO(!1,Zn.GuardRejected))}var Vw=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ve(r);if(i.numberOfChildren>1||!i.children[Oe])return sj(`${e.redirectTo}`);i=i.children[Oe]}}applyRedirectCommands(e,t,r,i,o){return cj(t,i,o).pipe(we(s=>{if(s instanceof ki)throw new uf(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new uf(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ki(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ze(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function cj(n,e,t){if(typeof n=="string")return ve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:l,title:f}=e;return wo(mn(t,()=>r({params:u,data:l,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:f})))}var Bw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uj(n,e,t,r,i){let o=xO(n,e,t);return o.matched?(r=NU(e,r),oj(r,e,t,i).pipe(we(s=>s===!0?o:G({},Bw)))):ve(o)}function xO(n,e,t){if(e.path==="**")return lj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?G({},Bw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||JN)(t,n,e);if(!i)return G({},Bw);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?G(G({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function lj(n){return{matched:!0,parameters:n.length>0?tO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function XN(n,e,t,r){return t.length>0&&hj(n,t,r)?{segmentGroup:new Ze(e,fj(r,new Ze(t,n.children))),slicedSegments:[]}:t.length===0&&pj(n,t,r)?{segmentGroup:new Ze(n.segments,dj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ze(n.segments,n.children),slicedSegments:t}}function dj(n,e,t,r){let i={};for(let o of t)if(jm(n,e,o)&&!r[ci(o)]){let s=new Ze([],{});i[ci(o)]=s}return G(G({},r),i)}function fj(n,e){let t={};t[Oe]=e;for(let r of n)if(r.path===""&&ci(r)!==Oe){let i=new Ze([],{});t[ci(r)]=i}return t}function hj(n,e,t){return t.some(r=>jm(n,e,r)&&ci(r)!==Oe)}function pj(n,e,t){return t.some(r=>jm(n,e,r))}function jm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function gj(n,e,t){return e.length===0&&!n.children[t]}var Uw=class{};function mj(n,e,t,r,i,o,s="emptyOnly"){return new jw(n,e,t,r,i,s,o).recognize()}var vj=31,jw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Vw(this.urlSerializer,this.urlTree)}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=XN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(we(({children:t,rootSnapshot:r})=>{let i=new Cr(r,t),o=new sf("",i),s=lO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new La([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Oe,t).pipe(we(r=>({children:r,rootSnapshot:t})),io(r=>{if(r instanceof uf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof cf?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(we(s=>s instanceof Cr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return We(o).pipe(ts(s=>{let a=r.children[s],c=OU(t,s);return this.processSegmentGroup(e,c,a,s,i)}),xy((s,a)=>(s.push(...a),s)),ns(null),Cy(),zt(s=>{if(s===null)return gu(r);let a=AO(s);return yj(a),ve(a)}))}processSegment(e,t,r,i,o,s,a){return We(t).pipe(ts(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(io(u=>{if(u instanceof cf)return ve(null);throw u}))),oo(c=>!!c),io(c=>{if(IO(c))return gj(r,i,o)?ve(new Uw):gu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return ci(r)!==s&&(s===Oe||!jm(i,o,r))?gu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):gu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:f,remainingSegments:h}=xO(t,i,o);if(!c)return gu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vj&&(this.allowRedirects=!1));let p=new La(o,u,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,QN(i),ci(i),i.component??i._loadedComponent??null,i,ZN(i)),m=Lm(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(m.params),p.data=Object.freeze(m.data),this.applyRedirects.applyRedirectCommands(l,i.redirectTo,f,p,e).pipe(kn(w=>this.applyRedirects.lineralizeSegments(i,w)),zt(w=>this.processSegment(e,r,t,w.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=uj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(kn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(kn(({routes:u})=>{let l=r._loadedInjector??e,{parameters:f,consumedSegments:h,remainingSegments:p}=c,m=new La(h,f,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,QN(r),ci(r),r.component??r._loadedComponent??null,r,ZN(r)),y=Lm(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(y.params),m.data=Object.freeze(y.data);let{segmentGroup:w,slicedSegments:S}=XN(t,h,p,u);if(S.length===0&&w.hasChildren())return this.processChildren(l,u,w,m).pipe(we(P=>new Cr(m,P)));if(u.length===0&&S.length===0)return ve(new Cr(m,[]));let D=ci(r)===o;return this.processSegment(l,u,w,S,D?Oe:o,!0,m).pipe(we(P=>new Cr(m,P instanceof Cr?[P]:[])))}))):gu(t)))}getChildConfig(e,t,r){return t.children?ve({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ve({routes:t._loadedRoutes,injector:t._loadedInjector}):ij(e,t,r,this.urlSerializer).pipe(zt(i=>i?this.configLoader.loadChildren(e,t).pipe(pn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):aj(t))):ve({routes:[],injector:e})}};function yj(n){n.sort((e,t)=>e.value.outlet===Oe?-1:t.value.outlet===Oe?1:e.value.outlet.localeCompare(t.value.outlet))}function _j(n){let e=n.value.routeConfig;return e&&e.path===""}function AO(n){let e=[],t=new Set;for(let r of n){if(!_j(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AO(r.children);e.push(new Cr(r.value,i))}return e.filter(r=>!t.has(r))}function QN(n){return n.data||{}}function ZN(n){return n.resolve||{}}function Ej(n,e,t,r,i,o){return zt(s=>mj(n,e,t,r,s.extractedUrl,i,o).pipe(we(({state:a,tree:c})=>le(G({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function wj(n,e){return zt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ve(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of SO(c))s.add(u);let a=0;return We(s).pipe(ts(c=>o.has(c)?Ij(c,r,n,e):(c.data=Lm(c,c.parent,n).resolve,ve(void 0))),pn(()=>a++),Kc(1),zt(c=>a===s.size?ve(t):or))})}function SO(n){let e=n.children.map(t=>SO(t)).flat();return[n,...e]}function Ij(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!vO(i)&&(o[lf]=i.title),od(()=>(n.data=Lm(n,n.parent,t).resolve,Cj(o,n,e,r).pipe(we(s=>(n._resolvedData=s,n.data=G(G({},n.data),s),null)))))}function Cj(n,e,t,r){let i=Dw(n);if(i.length===0)return ve({});let o={};return We(i).pipe(zt(s=>xj(n[s],e,t,r).pipe(oo(),pn(a=>{if(a instanceof xu)throw Vm(new Es,a);o[s]=a}))),Kc(1),we(()=>o),io(s=>IO(s)?or:zc(s)))}function xj(n,e,t,r){let i=df(e)??r,o=Su(n,i),s=o.resolve?o.resolve(e,t):mn(i,()=>o(e,t));return wo(s)}function Tw(n){return kn(e=>{let t=n(e);return t?We(t).pipe(we(()=>e)):ve(e)})}var Ww=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Oe);return r}getResolvedTitleForRoute(t){return t.data[lf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>z(TO),providedIn:"root"})}return n})(),TO=(()=>{class n extends Ww{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(fe(zN))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cs=new ce("",{providedIn:"root",factory:()=>({})}),ja=new ce(""),Hm=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=z(ZE);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ve(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=wo(t.loadComponent()).pipe(we(DO),pn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),sd(()=>{this.componentLoaders.delete(t)})),i=new jc(r,()=>new Gt).pipe(Uc());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=bO(r,this.compiler,t,this.onLoadEndListener).pipe(sd(()=>{this.childrenLoaders.delete(r)})),s=new jc(o,()=>new Gt).pipe(Uc());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bO(n,e,t,r){return wo(n.loadChildren()).pipe(we(DO),zt(i=>i instanceof Wg||Array.isArray(i)?ve(i):We(e.compileModuleAsync(i))),we(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ja,[],{optional:!0,self:!0}).flat()),{routes:s.map(zw),injector:o}}))}function Aj(n){return n&&typeof n=="object"&&"default"in n}function DO(n){return Aj(n)?n.default:n}var $m=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>z(Sj),providedIn:"root"})}return n})(),Sj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qw=new ce(""),Kw=new ce("");function RO(n,e,t){let r=n.get(Kw),i=n.get(Jt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),Tj(n))),{onViewTransitionCreated:c}=r;return c&&mn(n,()=>c({transition:a,from:e,to:t})),s}function Tj(n){return new Promise(e=>{Kg({read:()=>setTimeout(e)},{injector:n})})}var Yw=new ce(""),Gm=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Gt;transitionAbortWithErrorSubject=new Gt;configLoader=z(Hm);environmentInjector=z(Wt);destroyRef=z(fs);urlSerializer=z(Ba);rootContexts=z(Ua);location=z(ys);inputBindingEnabled=z(hf,{optional:!0})!==null;titleStrategy=z(Ww);options=z(Cs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=z($m);createViewTransition=z(qw,{optional:!0});navigationErrorHandler=z(Yw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ve(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Dm(i)),r=i=>this.events.next(new Rm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(G({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new un(null),this.transitions.pipe(ar(r=>r!==null),kn(r=>{let i=!1;return ve(r).pipe(kn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Zn.SupersededByNewNavigation),or;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?le(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new Fi(o.id,this.urlSerializer.serialize(o.rawUrl),c,Eu.IgnoredSameUrlNavigation)),o.resolve(!1),or}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ve(o).pipe(kn(c=>(this.events.next(new Is(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?or:Promise.resolve(c))),Ej(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=le(G({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new nf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:l,restoredState:f,extras:h}=o,p=new Is(c,this.urlSerializer.serialize(u),l,f);this.events.next(p);let m=gO(this.rootComponentType).snapshot;return this.currentTransition=r=le(G({},o),{targetSnapshot:m,urlAfterRedirects:u,extras:le(G({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,ve(r)}else{let c="";return this.events.next(new Fi(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Eu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),or}}),pn(o=>{let s=new Am(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),we(o=>(this.currentTransition=r=le(G({},o),{guards:BU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),XU(this.environmentInjector,o=>this.events.next(o)),pn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Vm(this.urlSerializer,o.guardsResult);let s=new Sm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ar(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Zn.GuardRejected),!1)),Tw(o=>{if(o.guards.canActivateChecks.length!==0)return ve(o).pipe(pn(s=>{let a=new Tm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),kn(s=>{let a=!1;return ve(s).pipe(wj(this.paramsInheritanceStrategy,this.environmentInjector),pn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Zn.NoDataFromResolver)}}))}),pn(s=>{let a=new bm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Tw(o=>{let s=a=>{let c=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(a.routeConfig).pipe(pn(u=>{a.component=u}),we(()=>{})));for(let u of a.children)c.push(...s(u));return c};return id(s(o.targetSnapshot.root)).pipe(ns(null),_r(1))}),Tw(()=>this.afterPreactivation()),kn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?We(a).pipe(we(()=>r)):ve(r)}),we(o=>{let s=MU(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=le(G({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),pn(()=>{this.events.next(new rf)}),VU(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),_r(1),jp(new Re(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ar(()=>!i&&!r.targetRouterState),pn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Zn.Aborted)}))),pn({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Br(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),jp(this.transitionAbortWithErrorSubject.pipe(pn(o=>{throw o}))),sd(()=>{i||this.cancelNavigationTransition(r,"",Zn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),io(o=>{if(this.destroyed)return r.resolve(!1),or;if(i=!0,wO(o))this.events.next(new Mi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),LU(o)?this.events.next(new Cu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new wu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=mn(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof xu){let{message:c,cancellationCode:u}=Vm(this.urlSerializer,a);this.events.next(new Mi(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Cu(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return or}))}))}cancelNavigationTransition(t,r,i){let o=new Mi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bj(n){return n!==yu}var NO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>z(Dj),providedIn:"root"})}return n})(),Um=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Dj=(()=>{class n extends Um{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ho(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OO=(()=>{class n{urlSerializer=z(Ba);options=z(Cs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=z(ys);urlHandlingStrategy=z($m);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ki;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof ki?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=gO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>z(Rj),providedIn:"root"})}return n})(),Rj=(()=>{class n extends OO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Is?this.updateStateMemento():t instanceof Fi?this.commitTransition(r):t instanceof nf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Mi&&t.code!==Zn.SupersededByNewNavigation&&t.code!==Zn.Redirect?this.restoreHistory(r):t instanceof wu?this.restoreHistory(r,!0):t instanceof Br&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=G(G({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=G(G({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ho(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zm(n,e){n.events.pipe(ar(t=>t instanceof Br||t instanceof Mi||t instanceof wu||t instanceof Fi),we(t=>t instanceof Br||t instanceof Fi?0:(t instanceof Mi?t.code===Zn.Redirect||t.code===Zn.SupersededByNewNavigation:!1)?2:1),ar(t=>t!==2),_r(1)).subscribe(()=>{e()})}var Nj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Oj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=z(HE);stateManager=z(OO);options=z(Cs,{optional:!0})||{};pendingTasks=z(lo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=z(Gm);urlSerializer=z(Ba);location=z(ys);urlHandlingStrategy=z($m);injector=z(Wt);_events=new Gt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=z(NO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=z(ja,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!z(hf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ft;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Mi&&r.code!==Zn.Redirect&&r.code!==Zn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Br)this.navigated=!0;else if(r instanceof Cu){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=G({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bj(i.source)},s);this.scheduleNavigation(a,yu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}RU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),yu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=G({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.injector.get(ur)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(zw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=G(G({},this.currentUrlTree.queryParams),o);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}l!==null&&(l=this.removeEmptyProps(l));let f;try{let h=i?i.snapshot:this.routerState.snapshot.root;f=dO(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return fO(f,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ws(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,yu,null,r)}navigate(t,r={skipLocationChange:!1}){return Pj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=G({},Nj):r===!1?i=G({},Oj):i=r,ws(t))return WN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return WN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,h)=>{a=f,c=h});let l=this.pendingTasks.add();return zm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}var Tu=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ti(null);get href(){return Fr(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Gt;applicationErrorHandler=z(ur);options=z(Cs,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(z(new tm("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Br&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ws(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ws(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(J(rt),J(Ur),Od("tabindex"),J(Ni),J(dr),J(si))};static \u0275dir=Tt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ge("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&hu("href",i.reactiveHref(),yE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ma],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ma],replaceUrl:[2,"replaceUrl","replaceUrl",Ma],routerLink:"routerLink"},features:[ni]})}return n})();var gf=class{};var PO=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ar(t=>t instanceof Br),ts(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=du(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return We(i).pipe(Wc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ve(null);let o=i.pipe(zt(s=>s===null?ve(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return We([o,s]).pipe(Wc())}else return o})}static \u0275fac=function(r){return new(r||n)(fe(rt),fe(Wt),fe(gf),fe(Hm))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MO=new ce(""),Mj=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=yu;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Is?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Br?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fi&&t.code===Eu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Iu&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>E(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Iu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){kE()};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();function Qw(n,...e){return Xr([{provide:ja,multi:!0,useValue:n},[],{provide:Ur,useFactory:kO,deps:[rt]},{provide:kd,multi:!0,useFactory:FO},e.map(t=>t.\u0275providers)])}function kO(n){return n.routerState.root}function mf(n,e){return{\u0275kind:n,\u0275providers:e}}function FO(){let n=z(Lt);return e=>{let t=n.get(Ra);if(e!==t.components[0])return;let r=n.get(rt),i=n.get(LO);n.get(Zw)===1&&r.initialNavigation(),n.get(UO,null,{optional:!0})?.setUpPreloading(),n.get(MO,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var LO=new ce("",{factory:()=>new Gt}),Zw=new ce("",{providedIn:"root",factory:()=>1});function VO(){let n=[{provide:Zw,useValue:0},Yg(()=>{let e=z(Lt);return e.get(aw,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(rt),o=e.get(LO);zm(i,()=>{r(!0)}),e.get(Gm).afterPreactivation=()=>(r(!0),o.closed?ve(void 0):o),i.initialNavigation()}))})];return mf(2,n)}function BO(){let n=[Yg(()=>{z(rt).setUpLocationChangeListener()}),{provide:Zw,useValue:2}];return mf(3,n)}var UO=new ce("");function jO(n){return mf(0,[{provide:UO,useExisting:PO},{provide:gf,useExisting:n}])}function HO(){return mf(8,[$w,{provide:hf,useExisting:$w}])}function $O(n){lu("NgRouterViewTransitions");let e=[{provide:qw,useValue:RO},{provide:Kw,useValue:G({skipNextTransition:!!n?.skipInitialTransition},n)}];return mf(9,e)}var GO=[ys,{provide:Ba,useClass:Es},rt,Ua,{provide:Ur,useFactory:kO,deps:[rt]},Hm,[]],vf=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[GO,[],{provide:ja,multi:!0,useValue:t},[],r?.errorHandler?{provide:Yw,useValue:r.errorHandler}:[],{provide:Cs,useValue:r||{}},r?.useHash?Fj():Lj(),kj(),r?.preloadingStrategy?jO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Vj(r):[],r?.bindToComponentInputs?HO().\u0275providers:[],r?.enableViewTransitions?$O().\u0275providers:[],Bj()]}}static forChild(t){return{ngModule:n,providers:[{provide:ja,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Rr({})}return n})();function kj(){return{provide:MO,useFactory:()=>{let n=z(FN),e=z(nt),t=z(Cs),r=z(Gm),i=z(Ba);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Mj(i,r,n,e,t)}}}function Fj(){return{provide:si,useClass:dw}}function Lj(){return{provide:si,useClass:om}}function Vj(n){return[n.initialNavigation==="disabled"?BO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?VO().\u0275providers:[]]}var Xw=new ce("");function Bj(){return[{provide:Xw,useFactory:FO},{provide:kd,multi:!0,useExisting:Xw}]}var zO=()=>{};var KO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Uj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Wm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=o>>2,f=(o&3)<<4|a>>4,h=(a&15)<<2|u>>6,p=u&63;c||(p=64,s||(h=64)),r.push(t[l],t[f],t[h],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Uj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new eI;let h=o<<2|a>>4;if(r.push(h),u!==64){let p=a<<4&240|u>>2;if(r.push(p),f!==64){let m=u<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},eI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},jj=function(n){let e=KO(n);return Wm.encodeByteArray(e,!0)},_f=function(n){return jj(n).replace(/\./g,"")},qm=function(n){try{return Wm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Hj=()=>nI().__FIREBASE_DEFAULTS__,$j=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Gj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&qm(n[1]);return e&&JSON.parse(e)},Km=()=>{try{return zO()||Hj()||$j()||Gj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rI=n=>{var e,t;return(t=(e=Km())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},YO=n=>{let e=rI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iI=()=>{var n;return(n=Km())===null||n===void 0?void 0:n.config},oI=n=>{var e;return(e=Km())===null||e===void 0?void 0:e[`_${n}`]};var Ha=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function xs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ym(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function XO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_f(JSON.stringify(t)),_f(JSON.stringify(s)),""].join(".")}var yf={};function zj(){let n={prod:[],emulator:[]};for(let e of Object.keys(yf))yf[e]?n.emulator.push(e):n.prod.push(e);return n}function Wj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var WO=!1;function Xm(n,e){if(typeof window>"u"||typeof document>"u"||!xs(window.location.host)||yf[n]===e||yf[n]||WO)return;yf[n]=e;function t(h){return`__firebase__banner__${h}`}let r="__firebase__banner",o=zj().prod.length>0;function s(){let h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{WO=!0,s()},h}function l(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){let h=Wj(r),p=t("text"),m=document.getElementById(p)||document.createElement("span"),y=t("learnmore"),w=document.getElementById(y)||document.createElement("a"),S=t("preprendIcon"),D=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let P=h.element;a(P),l(w,y);let F=u();c(D,S),P.append(D,m,w,F),document.body.appendChild(P)}o?(m.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function qj(){var n;let e=(n=Km())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tP(){let n=_n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nP(){return!qj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ef(){try{return typeof indexedDB=="object"}catch{return!1}}function rP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Kj="FirebaseError",Ar=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Kj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ui.prototype.create)}},ui=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Yj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ar(i,a,r)}};function Yj(n,e){return n.replace(Xj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Xj=/\{\$([^}]+)}/g;function iP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Vi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(qO(o)&&qO(s)){if(!Vi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function qO(n){return n!==null&&typeof n=="object"}function wf(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Du(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function oP(n,e){let t=new tI(n,e);return t.subscribe.bind(t)}var tI=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Qj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Jw),i.error===void 0&&(i.error=Jw),i.complete===void 0&&(i.complete=Jw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Qj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jw(){}var O1e=4*60*60*1e3;function Xt(n){return n&&n._delegate?n._delegate:n}var Jn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $a="[DEFAULT]";var sI=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ha;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jj(e))try{this.getOrInitializeService({instanceIdentifier:$a})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=$a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=$a){return this.instances.has(e)}getOptions(e=$a){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$a){return this.component?this.component.multipleInstances?e:$a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Zj(n){return n===$a?void 0:n}function Jj(n){return n.instantiationMode==="EAGER"}var Qm=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new sI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var eH=[],Be=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Be||{}),tH={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},nH=Be.INFO,rH={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},iH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=rH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Bi=class{constructor(e){this.name=e,this._logLevel=nH,this._logHandler=iH,this._userLogHandler=null,eH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}};var oH=(n,e)=>e.some(t=>n instanceof t),sP,aP;function sH(){return sP||(sP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aH(){return aP||(aP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var cP=new WeakMap,cI=new WeakMap,uP=new WeakMap,aI=new WeakMap,lI=new WeakMap;function cH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Ui(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&cP.set(t,n)}).catch(()=>{}),lI.set(e,n),e}function uH(n){if(cI.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});cI.set(n,e)}var uI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lP(n){uI=n(uI)}function lH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Zm(this),e,...t);return uP.set(r,e.sort?e.sort():[e]),Ui(r)}:aH().includes(n)?function(...e){return n.apply(Zm(this),e),Ui(cP.get(this))}:function(...e){return Ui(n.apply(Zm(this),e))}}function dH(n){return typeof n=="function"?lH(n):(n instanceof IDBTransaction&&uH(n),oH(n,sH())?new Proxy(n,uI):n)}function Ui(n){if(n instanceof IDBRequest)return cH(n);if(aI.has(n))return aI.get(n);let e=dH(n);return e!==n&&(aI.set(n,e),lI.set(e,n)),e}var Zm=n=>lI.get(n);function Jm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Ui(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ui(s.result),c.oldVersion,c.newVersion,Ui(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var fH=["get","getKey","getAll","getAllKeys","count"],hH=["put","add","delete","clear"],dI=new Map;function dP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dI.get(e))return dI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=hH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fH.includes(t)))return;let o=function(s,...a){return E(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return dI.set(e,o),o}lP(n=>le(G({},n),{get:(e,t,r)=>dP(e,t)||n.get(e,t,r),has:(e,t)=>!!dP(e,t)||n.has(e,t)}));var hI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function pH(n){let e=n.getComponent();return e?.type==="VERSION"}var pI="@firebase/app",fP="0.13.2";var Io=new Bi("@firebase/app"),gH="@firebase/app-compat",mH="@firebase/analytics-compat",vH="@firebase/analytics",yH="@firebase/app-check-compat",_H="@firebase/app-check",EH="@firebase/auth",wH="@firebase/auth-compat",IH="@firebase/database",CH="@firebase/data-connect",xH="@firebase/database-compat",AH="@firebase/functions",SH="@firebase/functions-compat",TH="@firebase/installations",bH="@firebase/installations-compat",DH="@firebase/messaging",RH="@firebase/messaging-compat",NH="@firebase/performance",OH="@firebase/performance-compat",PH="@firebase/remote-config",MH="@firebase/remote-config-compat",kH="@firebase/storage",FH="@firebase/storage-compat",LH="@firebase/firestore",VH="@firebase/ai",BH="@firebase/firestore-compat",UH="firebase",jH="11.10.0";var gI="[DEFAULT]",HH={[pI]:"fire-core",[gH]:"fire-core-compat",[vH]:"fire-analytics",[mH]:"fire-analytics-compat",[_H]:"fire-app-check",[yH]:"fire-app-check-compat",[EH]:"fire-auth",[wH]:"fire-auth-compat",[IH]:"fire-rtdb",[CH]:"fire-data-connect",[xH]:"fire-rtdb-compat",[AH]:"fire-fn",[SH]:"fire-fn-compat",[TH]:"fire-iid",[bH]:"fire-iid-compat",[DH]:"fire-fcm",[RH]:"fire-fcm-compat",[NH]:"fire-perf",[OH]:"fire-perf-compat",[PH]:"fire-rc",[MH]:"fire-rc-compat",[kH]:"fire-gcs",[FH]:"fire-gcs-compat",[LH]:"fire-fst",[BH]:"fire-fst-compat",[VH]:"fire-vertex","fire-js":"fire-js",[UH]:"fire-js-all"};var If=new Map,$H=new Map,mI=new Map;function hP(n,e){try{n.container.addComponent(e)}catch(t){Io.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function li(n){let e=n.name;if(mI.has(e))return Io.debug(`There were multiple attempts to register component ${e}.`),!1;mI.set(e,n);for(let t of If.values())hP(t,n);for(let t of $H.values())hP(t,n);return!0}function Ru(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n==null?!1:n.settings!==void 0}var GH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new ui("app","Firebase",GH);var vI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}};var Ss=jH;function EI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:gI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw As.create("bad-app-name",{appName:String(i)});if(t||(t=iI()),!t)throw As.create("no-options");let o=If.get(i);if(o){if(Vi(t,o.options)&&Vi(r,o.config))return o;throw As.create("duplicate-app",{appName:i})}let s=new Qm(i);for(let c of mI.values())s.addComponent(c);let a=new vI(t,r,s);return If.set(i,a),a}function Ga(n=gI){let e=If.get(n);if(!e&&n===gI&&iI())return EI();if(!e)throw As.create("no-app",{appName:n});return e}function e0(){return Array.from(If.values())}function Bt(n,e,t){var r;let i=(r=HH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Io.warn(a.join(" "));return}li(new Jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var zH="firebase-heartbeat-database",WH=1,Cf="firebase-heartbeat-store",fI=null;function vP(){return fI||(fI=Jm(zH,WH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cf)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),fI}function qH(n){return E(this,null,function*(){try{let t=(yield vP()).transaction(Cf),r=yield t.objectStore(Cf).get(yP(n));return yield t.done,r}catch(e){if(e instanceof Ar)Io.warn(e.message);else{let t=As.create("idb-get",{originalErrorMessage:e?.message});Io.warn(t.message)}}})}function pP(n,e){return E(this,null,function*(){try{let r=(yield vP()).transaction(Cf,"readwrite");yield r.objectStore(Cf).put(e,yP(n)),yield r.done}catch(t){if(t instanceof Ar)Io.warn(t.message);else{let r=As.create("idb-set",{originalErrorMessage:t?.message});Io.warn(r.message)}}})}function yP(n){return`${n.name}!${n.options.appId}`}var KH=1024,YH=30,yI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new _I(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>YH){let s=QH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Io.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=gP(),{heartbeatsToSend:r,unsentEntries:i}=XH(this._heartbeatsCache.heartbeats),o=_f(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Io.warn(t),""}})}};function gP(){return new Date().toISOString().substring(0,10)}function XH(n,e=KH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),mP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),mP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var _I=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return Ef()?rP().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield qH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function mP(n){return _f(JSON.stringify({version:2,heartbeats:n})).length}function QH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function ZH(n){li(new Jn("platform-logger",e=>new hI(e),"PRIVATE")),li(new Jn("heartbeat",e=>new yI(e),"PRIVATE")),Bt(pI,fP,n),Bt(pI,fP,"esm2017"),Bt("fire-js","")}ZH("");var JH="firebase",e$="11.10.0";Bt(JH,e$,"app");function _P(n){n===void 0&&(n=z(Lt));let e=n.get(ru);return t=>new Re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ts=new Oa("ANGULARFIRE2_VERSION");function xf(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ou=(n,e)=>{let t=e?[e]:e0(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Nu=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Nu||{}),EP=iw()&&typeof Zone<"u"?Nu.WARN:Nu.SILENT;var t0=class{zone;delegate;constructor(e,t=_y){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},bs=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=z(nt);this.outsideAngular=t.runOutsideAngular(()=>new t0(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new t0(typeof Zone>"u"?void 0:Zone.current,yy))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wP=!1;function t$(n,e){!wP&&(EP>Nu.SILENT||iw())&&(wP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),EP>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function n$(n){let e=z(nt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function za(n){let e=z(nt,{optional:!0});return e?e.run(()=>n()):n()}var r$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),mn(t,()=>za(()=>n.apply(void 0,r)))),Ut=(n,e,t)=>(t||=e?Nu.WARN:Nu.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=z(bs),s=z(ru),a=z(Wt)}catch{return t$(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=za(()=>s.add())),i[u]=r$(i[u],r,a));let c=n$(()=>n.apply(this,i));return e?c instanceof Re?c.pipe(es(o.outsideAngular),Jo(o.insideAngular),_P(a)):c instanceof Promise?za(()=>{let u=s.add();return new Promise((l,f)=>{c.then(h=>mn(a,()=>za(()=>l(h))),h=>mn(a,()=>za(()=>f(h)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:za(()=>c):c instanceof Re?c.pipe(es(o.outsideAngular),Jo(o.insideAngular)):za(()=>c)});var Co=class{constructor(e){return e}},Wa=class{constructor(){return e0()}};function i$(n){return n&&n.length===1?n[0]:new Co(Ga())}var wI=new ce("angularfire2._apps"),o$={provide:Co,useFactory:i$,deps:[[new lr,wI]]},s$={provide:Wa,deps:[[new lr,wI]]};function a$(n){return(e,t)=>{let r=t.get(gs);Bt("angularfire",Ts.full,"core"),Bt("angularfire",Ts.full,"app"),Bt("angular",dN.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Co(i)}}function IP(n,...e){return Xr([o$,s$,{provide:wI,useFactory:a$(n),multi:!0,deps:[nt,Lt,bs,...e]}])}var CP=Ut(EI,!0);var c$=new Map,u$={activated:!1,tokenObservers:[]},l$={initialized:!1,enabled:!1};function di(n){return c$.get(n)||Object.assign({},u$)}function TP(){return l$}var d$="https://content-firebaseappcheck.googleapis.com/v1";var f$="exchangeDebugToken",xP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},kye=24*60*60*1e3;var xI=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new Ha,this.pending.promise.catch(t=>{}),yield h$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ha,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function h$(n){return new Promise(e=>{setTimeout(e,n)})}var p$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ds=new ui("appCheck","AppCheck",p$);function bP(n){if(!di(n).activated)throw Ds.create("use-before-activation",{appName:n.name})}function DP(r,i){return E(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(p){throw Ds.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw Ds.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(p){throw Ds.create("fetch-parse-error",{originalErrorMessage:p?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+f,issuedAtTimeMillis:h}})}function RP(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${d$}/projects/${t}/apps/${r}:${f$}?key=${i}`,body:{debug_token:e}}}var g$="firebase-app-check-database",m$=1,AI="firebase-app-check-store";var n0=null;function v$(){return n0||(n0=new Promise((n,e)=>{try{let t=indexedDB.open(g$,m$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ds.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(AI,{keyPath:"compositeKey"})}}}catch(t){e(Ds.create("storage-open",{originalErrorMessage:t?.message}))}}),n0)}function y$(n,e){return _$(E$(n),e)}function _$(n,e){return E(this,null,function*(){let r=(yield v$()).transaction(AI,"readwrite"),o=r.objectStore(AI).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Ds.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function E$(n){return`${n.options.appId}-${n.name}`}var Af=new Bi("@firebase/app-check");function II(n,e){return Ef()?y$(n,e).catch(t=>{Af.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NP(){return TP().enabled}function OP(){return E(this,null,function*(){let n=TP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var w$={error:"UNKNOWN_ERROR"};function I$(n){return Wm.encodeString(JSON.stringify(n),!1)}function SI(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;bP(r);let i=di(r),o=i.token,s;if(o&&!Sf(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(Sf(u)?o=u:yield II(r,void 0))}if(!e&&o&&Sf(o))return{token:o.token};let a=!1;if(NP())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=DP(RP(r,yield OP()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield II(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Af.warn(u.message):t&&Af.error(u),CI(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield di(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Af.warn(u.message):t&&Af.error(u),s=u}let c;return o?s?Sf(o)?c={token:o.token,internalError:s}:c=CI(s):(c={token:o.token},i.token=o,yield II(r,o)):c=CI(s),a&&S$(r,c),c})}function C$(n){return E(this,null,function*(){let e=n.app;bP(e);let{provider:t}=di(e);if(NP()){let r=yield OP(),{token:i}=yield DP(RP(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function x$(n,e,t,r){let{app:i}=n,o=di(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Sf(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),AP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>AP(n))}function PP(n,e){let t=di(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function AP(n){let{app:e}=n,t=di(e),r=t.tokenRefresher;r||(r=A$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function A$(n){let{app:e}=n;return new xI(()=>E(null,null,function*(){let t=di(e),r;if(t.token?r=yield SI(n,!0):r=yield SI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xP.RETRIAL_MIN_WAIT,xP.RETRIAL_MAX_WAIT)}function S$(n,e){let t=di(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Sf(n){return n.expireTimeMillis-Date.now()>0}function CI(n){return{token:I$(w$),error:n}}var TI=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=di(this.app);for(let t of e)PP(this.app,t.next);return Promise.resolve()}};function T$(n,e){return new TI(n,e)}function b$(n){return{getToken:e=>SI(n,e),getLimitedUseToken:()=>C$(n),addTokenListener:e=>x$(n,"INTERNAL",e),removeTokenListener:e=>PP(n.app,e)}}var D$="@firebase/app-check",R$="0.10.1";var N$="app-check",SP="app-check-internal";function O$(){li(new Jn(N$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return T$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(SP).initialize()})),li(new Jn(SP,n=>{let e=n.getProvider("app-check").getImmediate();return b$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Bt(D$,R$)}O$();var P$="app-check";var Pu=class{constructor(){return Ou(P$)}};var M$=["localhost","0.0.0.0","127.0.0.1"],Kye=typeof window<"u"&&M$.includes(window.location.hostname);var MP=()=>{};var kP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},k$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},FP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=o>>2,f=(o&3)<<4|a>>4,h=(a&15)<<2|u>>6,p=u&63;c||(p=64,s||(h=64)),r.push(t[l],t[f],t[h],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):k$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new DI;let h=o<<2|a>>4;if(r.push(h),u!==64){let p=a<<4&240|u>>2;if(r.push(p),f!==64){let m=u<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},DI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},F$=function(n){let e=kP(n);return FP.encodeByteArray(e,!0)},NI=function(n){return F$(n).replace(/\./g,"")},r0=function(n){try{return FP.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function L$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var V$=()=>L$().__FIREBASE_DEFAULTS__,B$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},U$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&r0(n[1]);return e&&JSON.parse(e)},j$=()=>{try{return MP()||V$()||B$()||U$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var LP=n=>j$()?.[`_${n}`];function OI(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fi())}function BP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HP(){try{return typeof indexedDB=="object"}catch{return!1}}function $P(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var H$="FirebaseError",ji=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=H$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xo.prototype.create)}},xo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?$$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ji(i,a,r)}};function $$(n,e){return n.replace(G$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var G$=/\{\$([^}]+)}/g;function PI(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function GP(n,e){let t=new RI(n,e);return t.subscribe.bind(t)}var RI=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");z$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=bI),i.error===void 0&&(i.error=bI),i.complete===void 0&&(i.complete=bI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function z$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bI(){}var Jye=4*60*60*1e3;function Mu(n){return n&&n._delegate?n._delegate:n}var Ao=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var W$=[],vt=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(vt||{}),q$={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},K$=vt.INFO,Y$={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},X$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Y$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ku=class{constructor(e){this.name=e,this._logLevel=K$,this._logHandler=X$,this._userLogHandler=null,W$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}};var kI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Z$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Z$(n){return n.getComponent()?.type==="VERSION"}var FI="@firebase/app",zP="0.14.2";var So=new ku("@firebase/app"),J$="@firebase/app-compat",eG="@firebase/analytics-compat",tG="@firebase/analytics",nG="@firebase/app-check-compat",rG="@firebase/app-check",iG="@firebase/auth",oG="@firebase/auth-compat",sG="@firebase/database",aG="@firebase/data-connect",cG="@firebase/database-compat",uG="@firebase/functions",lG="@firebase/functions-compat",dG="@firebase/installations",fG="@firebase/installations-compat",hG="@firebase/messaging",pG="@firebase/messaging-compat",gG="@firebase/performance",mG="@firebase/performance-compat",vG="@firebase/remote-config",yG="@firebase/remote-config-compat",_G="@firebase/storage",EG="@firebase/storage-compat",wG="@firebase/firestore",IG="@firebase/ai",CG="@firebase/firestore-compat",xG="firebase",AG="12.2.0";var SG={[FI]:"fire-core",[J$]:"fire-core-compat",[tG]:"fire-analytics",[eG]:"fire-analytics-compat",[rG]:"fire-app-check",[nG]:"fire-app-check-compat",[iG]:"fire-auth",[oG]:"fire-auth-compat",[sG]:"fire-rtdb",[aG]:"fire-data-connect",[cG]:"fire-rtdb-compat",[uG]:"fire-fn",[lG]:"fire-fn-compat",[dG]:"fire-iid",[fG]:"fire-iid-compat",[hG]:"fire-fcm",[pG]:"fire-fcm-compat",[gG]:"fire-perf",[mG]:"fire-perf-compat",[vG]:"fire-rc",[yG]:"fire-rc-compat",[_G]:"fire-gcs",[EG]:"fire-gcs-compat",[wG]:"fire-fst",[CG]:"fire-fst-compat",[IG]:"fire-vertex","fire-js":"fire-js",[xG]:"fire-js-all"};var TG=new Map,bG=new Map,WP=new Map;function qP(n,e){try{n.container.addComponent(e)}catch(t){So.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lu(n){let e=n.name;if(WP.has(e))return So.debug(`There were multiple attempts to register component ${e}.`),!1;WP.set(e,n);for(let t of TG.values())qP(t,n);for(let t of bG.values())qP(t,n);return!0}function qa(n){return n==null?!1:n.settings!==void 0}var DG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},BI=new xo("app","Firebase",DG);var i0=AG;function Fu(n,e,t){let r=SG[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),So.warn(s.join(" "));return}Lu(new Ao(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var RG="firebase-heartbeat-database",NG=1,Tf="firebase-heartbeat-store",MI=null;function QP(){return MI||(MI=Jm(RG,NG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Tf)}catch(t){console.warn(t)}}}}).catch(n=>{throw BI.create("idb-open",{originalErrorMessage:n.message})})),MI}function OG(n){return E(this,null,function*(){try{let t=(yield QP()).transaction(Tf),r=yield t.objectStore(Tf).get(ZP(n));return yield t.done,r}catch(e){if(e instanceof ji)So.warn(e.message);else{let t=BI.create("idb-get",{originalErrorMessage:e?.message});So.warn(t.message)}}})}function KP(n,e){return E(this,null,function*(){try{let r=(yield QP()).transaction(Tf,"readwrite");yield r.objectStore(Tf).put(e,ZP(n)),yield r.done}catch(t){if(t instanceof ji)So.warn(t.message);else{let r=BI.create("idb-set",{originalErrorMessage:t?.message});So.warn(r.message)}}})}function ZP(n){return`${n.name}!${n.options.appId}`}var PG=1024,MG=30,LI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new VI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=YP();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>MG){let i=FG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){So.warn(e)}})}getHeartbeatsHeader(){return E(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=YP(),{heartbeatsToSend:t,unsentEntries:r}=kG(this._heartbeatsCache.heartbeats),i=NI(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return So.warn(e),""}})}};function YP(){return new Date().toISOString().substring(0,10)}function kG(n,e=PG){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),XP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),XP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var VI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return HP()?$P().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield OG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return KP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return KP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function XP(n){return NI(JSON.stringify({version:2,heartbeats:n})).length}function FG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function LG(n){Lu(new Ao("platform-logger",e=>new kI(e),"PRIVATE")),Lu(new Ao("heartbeat",e=>new LI(e),"PRIVATE")),Fu(FI,zP,n),Fu(FI,zP,"esm2020"),Fu("fire-js","")}LG("");function sM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var aM=sM,cM=new xo("auth","Firebase",sM());var c0=new ku("@firebase/auth");function VG(n,...e){c0.logLevel<=vt.WARN&&c0.warn(`Auth (${i0}): ${n}`,...e)}function s0(n,...e){c0.logLevel<=vt.ERROR&&c0.error(`Auth (${i0}): ${n}`,...e)}function JP(n,...e){throw QI(n,...e)}function XI(n,...e){return QI(n,...e)}function uM(n,e,t){let r=le(G({},aM()),{[e]:t});return new xo("auth","Firebase",r).create(e,{appName:n.name})}function a0(n){return uM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cM.create(n,...e)}function Je(n,e,...t){if(!n)throw QI(e,...t)}function bf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw s0(e),new Error(e)}function u0(n,e){n||bf(e)}function BG(){return eM()==="http:"||eM()==="https:"}function eM(){return typeof self<"u"&&self.location?.protocol||null}function UG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BG()||UP()||"connection"in navigator)?navigator.onLine:!0}function jG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Xa=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,u0(t>e,"Short delay should be less than long delay!"),this.isMobile=VP()||jP()}get(){return UG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function HG(n,e){u0(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var l0=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $G={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var GG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zG=new Xa(3e4,6e4);function lM(n,e){return n.tenantId&&!e.tenantId?le(G({},e),{tenantId:n.tenantId}):e}function g0(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return dM(n,i,()=>E(null,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let f=PI(G({key:n.config.apiKey},l)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let p=G({method:e,headers:h},u);return BP()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&OI(n.emulatorConfig.host)&&(p.credentials="include"),l0.fetch()(yield fM(n,n.config.apiHost,t,f),p)}))})}function dM(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=G(G({},$G),e);try{let i=new HI(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw o0(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw o0(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw o0(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw o0(n,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw uM(n,l,u);JP(n,l)}}catch(i){if(i instanceof ji)throw i;JP(n,"network-request-failed",{message:String(i)})}})}function fM(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?HG(n.config,i):`${n.config.apiScheme}://${i}`;return GG.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var HI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(XI(this.auth,"network-request-failed")),zG.get())})}};function o0(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=XI(n,e,r);return i.customData._tokenResponse=t,i}function WG(n,e){return E(this,null,function*(){return g0(n,"POST","/v1/accounts:delete",e)})}function d0(n,e){return E(this,null,function*(){return g0(n,"POST","/v1/accounts:lookup",e)})}function Df(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function hM(n,e=!1){return E(this,null,function*(){let t=Mu(n),r=yield t.getIdToken(e),i=pM(r);Je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Df(UI(i.auth_time)),issuedAtTime:Df(UI(i.iat)),expirationTime:Df(UI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function UI(n){return Number(n)*1e3}function pM(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return s0("JWT malformed, contained fewer than 3 sections"),null;try{let i=r0(t);return i?JSON.parse(i):(s0("Failed to decode base64 JWT payload"),null)}catch(i){return s0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function tM(n){let e=pM(n);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $I(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof ji&&qG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function qG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var GI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Nf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Df(this.lastLoginAt),this.creationTime=Df(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function f0(n){return E(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield $I(n,d0(e,{idToken:t}));Je(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?mM(i.providerUserInfo):[],s=KG(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,u=a?c:!1,l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Nf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,l)})}function gM(n){return E(this,null,function*(){let e=Mu(n);yield f0(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function KG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=ey(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function YG(n,e){return E(this,null,function*(){let t=yield dM(n,{},()=>E(null,null,function*(){let r=PI({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield fM(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&OI(n.emulatorConfig.host)&&(c.credentials="include"),l0.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function XG(n,e){return E(this,null,function*(){return g0(n,"POST","/v2/accounts:revokeToken",lM(n,e))})}var Rf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Je(e.length!==0,"internal-error");let t=tM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield YG(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Je(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Je(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return bf("not implemented")}};function Rs(n,e){Je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ka=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=ey(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nf(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield $I(this,this.stsTokenManager.getToken(this.auth,e));return Je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return hM(this,e)}reload(){return gM(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>G({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(le(G({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield f0(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(qa(this.auth.app))return Promise.reject(a0(this.auth));let e=yield this.getIdToken();return yield $I(this,WG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return le(G({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>G({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,l=t.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:m,stsTokenManager:y}=t;Je(f&&y,e,"internal-error");let w=Rf.fromJSON(this.name,y);Je(typeof f=="string",e,"internal-error"),Rs(r,e.name),Rs(i,e.name),Je(typeof h=="boolean",e,"internal-error"),Je(typeof p=="boolean",e,"internal-error"),Rs(o,e.name),Rs(s,e.name),Rs(a,e.name),Rs(c,e.name),Rs(u,e.name),Rs(l,e.name);let S=new n({uid:f,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:w,createdAt:u,lastLoginAt:l});return m&&Array.isArray(m)&&(S.providerData=m.map(D=>G({},D))),c&&(S._redirectEventId=c),S}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Rf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield f0(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];Je(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?mM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Rf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Nf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var nM=new Map;function Ya(n){u0(n instanceof Function,"Expected a class definition");let e=nM.get(n);return e?(u0(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nM.set(n,e),e)}var QG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),zI=QG;function jI(n,e,t){return`firebase:${n}:${e}:${t}`}var h0=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=jI(this.userKey,i.apiKey,o),this.fullPersistenceKey=jI("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield d0(this.auth,{idToken:e}).catch(()=>{});return t?Ka._fromGetAccountInfoResponse(this.auth,t,e):null}return Ka._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(Ya(zI),e,r);let i=(yield Promise.all(t.map(u=>E(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Ya(zI),s=jI(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let l=yield u._get(s);if(l){let f;if(typeof l=="string"){let h=yield d0(e,{idToken:l}).catch(()=>{});if(!h)break;f=yield Ka._fromGetAccountInfoResponse(e,h,l)}else f=Ka._fromJSON(e,l);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>E(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function rM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rz(e))return"Blackberry";if(iz(e))return"Webos";if(JG(e))return"Safari";if((e.includes("chrome/")||ez(e))&&!e.includes("edge/"))return"Chrome";if(nz(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ZG(n=fi()){return/firefox\//i.test(n)}function JG(n=fi()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ez(n=fi()){return/crios\//i.test(n)}function tz(n=fi()){return/iemobile/i.test(n)}function nz(n=fi()){return/android/i.test(n)}function rz(n=fi()){return/blackberry/i.test(n)}function iz(n=fi()){return/webos/i.test(n)}function vM(n,e=[]){let t;switch(n){case"Browser":t=rM(fi());break;case"Worker":t=`${rM(fi())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${i0}/${r}`}var WI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function oz(t){return E(this,arguments,function*(n,e={}){return g0(n,"GET","/v2/passwordPolicy",lM(n,e))})}var sz=6,qI=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sz,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var KI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p0(this),this.idTokenSubscription=new p0(this),this.beforeStateQueue=new WI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ya(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield h0.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield d0(this,{idToken:e}),r=yield Ka._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){if(qa(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield f0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jG()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(qa(this.app))return Promise.reject(a0(this));let t=e?Mu(e):null;return t&&Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return qa(this.app)?Promise.reject(a0(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qa(this.app)?Promise.reject(a0(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Ya(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield oz(this),t=new qI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield XG(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ya(e)||this._popupRedirectResolver;Je(t,this,"argument-error"),this.redirectPersistenceManager=yield h0.create(this,[Ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return E(this,null,function*(){if(qa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&VG(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function az(n){return Mu(n)}var p0=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=GP(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var cz={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uz(n){cz=n}function lz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function dz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ya);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ZI(n,e,t,r){return Mu(n).onIdTokenChanged(e,t,r)}var P_e=lz("rcb"),M_e=new Xa(3e4,6e4);var k_e=new Xa(2e3,1e4);var F_e=10*60*1e3;var L_e=new Xa(3e4,6e4);var V_e=new Xa(5e3,15e3);var B_e=encodeURIComponent("fac");var iM="@firebase/auth",oM="1.11.0";var YI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function fz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hz(n){Lu(new Ao("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Je(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vM(n)},u=new KI(r,i,o,c);return dz(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lu(new Ao("auth-internal",e=>{let t=az(e.getProvider("auth").getImmediate());return(r=>new YI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fu(iM,oM,fz(n)),Fu(iM,oM,"esm2020")}var pz=5*60,U_e=LP("authIdTokenMaxAge")||pz;function gz(){return document.getElementsByTagName("head")?.[0]??document}uz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=XI("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",gz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hz("Browser");function yM(n){return new Re(function(e){var t=ZI(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function MM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kM=MM,FM=new ui("auth","Firebase",MM());var w0=new Bi("@firebase/auth");function yz(n,...e){w0.logLevel<=Be.WARN&&w0.warn(`Auth (${Ss}): ${n}`,...e)}function v0(n,...e){w0.logLevel<=Be.ERROR&&w0.error(`Auth (${Ss}): ${n}`,...e)}function $i(n,...e){throw IC(n,...e)}function Qa(n,...e){return IC(n,...e)}function LM(n,e,t){let r=Object.assign(Object.assign({},kM()),{[e]:t});return new ui("auth","Firebase",r).create(e,{appName:n.name})}function Do(n){return LM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return FM.create(n,...e)}function he(n,e,...t){if(!n)throw IC(e,...t)}function To(n){let e="INTERNAL ASSERTION FAILED: "+n;throw v0(e),new Error(e)}function Ps(n,e){n||To(e)}function nC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _z(){return _M()==="http:"||_M()==="https:"}function _M(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Ez(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_z()||JO()||"connection"in navigator)?navigator.onLine:!0}function wz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Za=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ps(t>e,"Short delay should be less than long delay!"),this.isMobile=QO()||eP()}get(){return Ez()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function CC(n,e){Ps(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var I0=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Iz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Cz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xz=new Za(3e4,6e4);function Ro(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function No(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return VM(n,i,()=>E(null,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let f=wf(Object.assign({key:n.config.apiKey},l)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:h},u);return ZO()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&xs(n.emulatorConfig.host)&&(p.credentials="include"),I0.fetch()(yield BM(n,n.config.apiHost,t,f),p)}))})}function VM(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Iz),e);try{let i=new rC(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw m0(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw m0(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw m0(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw m0(n,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw LM(n,l,u);$i(n,l)}}catch(i){if(i instanceof Ar)throw i;$i(n,"network-request-failed",{message:String(i)})}})}function Uf(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){let u=yield No(n,e,t,r,i);return"mfaPendingCredential"in u&&$i(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function BM(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?CC(n.config,i):`${n.config.apiScheme}://${i}`;return Cz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Az(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var rC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qa(this.auth,"network-request-failed")),xz.get())})}};function m0(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Qa(n,e,r);return i.customData._tokenResponse=t,i}function EM(n){return n!==void 0&&n.enterprise!==void 0}var iC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Az(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Sz(n,e){return E(this,null,function*(){return No(n,"GET","/v2/recaptchaConfig",Ro(n,e))})}function Tz(n,e){return E(this,null,function*(){return No(n,"POST","/v1/accounts:delete",e)})}function C0(n,e){return E(this,null,function*(){return No(n,"POST","/v1/accounts:lookup",e)})}function Pf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function xC(n,e=!1){return E(this,null,function*(){let t=Xt(n),r=yield t.getIdToken(e),i=AC(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Pf(JI(i.auth_time)),issuedAtTime:Pf(JI(i.iat)),expirationTime:Pf(JI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function JI(n){return Number(n)*1e3}function AC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return v0("JWT malformed, contained fewer than 3 sections"),null;try{let i=qm(t);return i?JSON.parse(i):(v0("Failed to decode base64 JWT payload"),null)}catch(i){return v0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function wM(n){let e=AC(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function kf(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ar&&bz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function bz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var oC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ff=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pf(this.lastLoginAt),this.creationTime=Pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function x0(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield kf(n,C0(t,{idToken:r}));he(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?UM(o.providerUserInfo):[],a=Dz(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,l=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ff(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,f)})}function SC(n){return E(this,null,function*(){let e=Xt(n);yield x0(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Dz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UM(n){return n.map(e=>{var{providerId:t}=e,r=Ey(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Rz(n,e){return E(this,null,function*(){let t=yield VM(n,{},()=>E(null,null,function*(){let r=wf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield BM(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&xs(n.emulatorConfig.host)&&(c.credentials="include"),I0.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Nz(n,e){return E(this,null,function*(){return No(n,"POST","/v2/accounts:revokeToken",Ro(n,e))})}var Mf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");let t=wM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Rz(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(he(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(he(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return To("not implemented")}};function Ns(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Os=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ey(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ff(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield kf(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return xC(this,e)}reload(){return SC(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield x0(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(hr(this.auth.app))return Promise.reject(Do(this.auth));let e=yield this.getIdToken();return yield kf(this,Tz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,l;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,p=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=t.photoURL)!==null&&s!==void 0?s:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,w=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,S=(u=t.createdAt)!==null&&u!==void 0?u:void 0,D=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:P,emailVerified:F,isAnonymous:H,providerData:$,stsTokenManager:T}=t;he(P&&T,e,"internal-error");let x=Mf.fromJSON(this.name,T);he(typeof P=="string",e,"internal-error"),Ns(f,e.name),Ns(h,e.name),he(typeof F=="boolean",e,"internal-error"),he(typeof H=="boolean",e,"internal-error"),Ns(p,e.name),Ns(m,e.name),Ns(y,e.name),Ns(w,e.name),Ns(S,e.name),Ns(D,e.name);let b=new n({uid:P,auth:e,email:h,emailVerified:F,displayName:f,isAnonymous:H,photoURL:m,phoneNumber:p,tenantId:y,stsTokenManager:x,createdAt:S,lastLoginAt:D});return $&&Array.isArray($)&&(b.providerData=$.map(N=>Object.assign({},N))),w&&(b._redirectEventId=w),b}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Mf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield x0(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];he(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?UM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Mf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ff(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var IM=new Map;function bo(n){Ps(n instanceof Function,"Expected a class definition");let e=IM.get(n);return e?(Ps(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IM.set(n,e),e)}var Oz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),sC=Oz;function y0(n,e,t){return`firebase:${n}:${e}:${t}`}var A0=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=y0(this.userKey,i.apiKey,o),this.fullPersistenceKey=y0("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield C0(this.auth,{idToken:e}).catch(()=>{});return t?Os._fromGetAccountInfoResponse(this.auth,t,e):null}return Os._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(bo(sC),e,r);let i=(yield Promise.all(t.map(u=>E(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||bo(sC),s=y0(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let l=yield u._get(s);if(l){let f;if(typeof l=="string"){let h=yield C0(e,{idToken:l}).catch(()=>{});if(!h)break;f=yield Os._fromGetAccountInfoResponse(e,h,l)}else f=Os._fromJSON(e,l);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>E(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function CM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WM(e))return"Blackberry";if(qM(e))return"Webos";if(HM(e))return"Safari";if((e.includes("chrome/")||$M(e))&&!e.includes("edge/"))return"Chrome";if(zM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function jM(n=_n()){return/firefox\//i.test(n)}function HM(n=_n()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $M(n=_n()){return/crios\//i.test(n)}function GM(n=_n()){return/iemobile/i.test(n)}function zM(n=_n()){return/android/i.test(n)}function WM(n=_n()){return/blackberry/i.test(n)}function qM(n=_n()){return/webos/i.test(n)}function TC(n=_n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Pz(n=_n()){var e;return TC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Mz(){return tP()&&document.documentMode===10}function KM(n=_n()){return TC(n)||zM(n)||qM(n)||WM(n)||/windows phone/i.test(n)||GM(n)}function YM(n,e=[]){let t;switch(n){case"Browser":t=CM(_n());break;case"Worker":t=`${CM(_n())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ss}/${r}`}var aC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function kz(t){return E(this,arguments,function*(n,e={}){return No(n,"GET","/v2/passwordPolicy",Ro(n,e))})}var Fz=6,cC=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Fz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var uC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new aC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bo(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield A0.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield C0(this,{idToken:e}),r=yield Os._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(hr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield x0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=wz()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(hr(this.app))return Promise.reject(Do(this));let t=e?Xt(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return hr(this.app)?Promise.reject(Do(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return hr(this.app)?Promise.reject(Do(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(bo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield kz(this),t=new cC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ui("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Nz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&bo(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=yield A0.create(this,[bo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&yz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ms(n){return Xt(n)}var S0=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=oP(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var M0={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lz(n){M0=n}function XM(n){return M0.loadJS(n)}function Vz(){return M0.recaptchaEnterpriseScript}function Bz(){return M0.gapiScript}function QM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var lC=class{constructor(){this.enterprise=new dC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},dC=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Uz="recaptcha-enterprise",ZM="NO_RECAPTCHA",fC=class{constructor(e){this.type=Uz,this.auth=Ms(e)}verify(e="verify",t=!1){return E(this,null,function*(){function r(o){return E(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>E(null,null,function*(){Sz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new iC(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;EM(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(ZM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lC().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&EM(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Vz();c.length!==0&&(c+=a),XM(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Of(n,e,t,r=!1,i=!1){return E(this,null,function*(){let o=new fC(n),s;if(i)s=ZM;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function T0(n,e,t,r,i){return E(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Of(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>E(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Of(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Of(n,e,t);return r(n,a).catch(c=>E(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let l=yield Of(n,e,t,!1,!0);return r(n,l)}return Promise.reject(c)}))}else{let a=yield Of(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function bC(n,e){let t=Ru(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Vi(o,e??{}))return i;$i(i,"already-initialized")}return t.initialize({options:e})}function jz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DC(n,e,t){let r=Ms(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=JM(e),{host:s,port:a}=Hz(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},l=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Vi(u,r.config.emulator)&&Vi(l,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=l,r.settings.appVerificationDisabledForTesting=!0,xs(s)?(Ym(`${o}//${s}${c}`),Xm("Auth",!0)):i||$z()}function JM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Hz(n){let e=JM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:xM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:xM(s)}}}function xM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function $z(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Lf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return To("not implemented")}_getIdTokenResponse(e){return To("not implemented")}_linkToIdToken(e,t){return To("not implemented")}_getReauthenticationResolver(e){return To("not implemented")}};function Gz(n,e){return E(this,null,function*(){return No(n,"POST","/v1/accounts:signUp",e)})}function zz(n,e){return E(this,null,function*(){return Uf(n,"POST","/v1/accounts:signInWithPassword",Ro(n,e))})}function Wz(n,e){return E(this,null,function*(){return No(n,"POST","/v1/accounts:sendOobCode",Ro(n,e))})}function qz(n,e){return E(this,null,function*(){return Wz(n,e)})}function Kz(n,e){return E(this,null,function*(){return Uf(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))})}function Yz(n,e){return E(this,null,function*(){return Uf(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))})}var Vf=class n extends Lf{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return T0(e,t,"signInWithPassword",zz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Kz(e,{email:this._email,oobCode:this._password});default:$i(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return T0(e,r,"signUpPassword",Gz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Yz(e,{idToken:t,email:this._email,oobCode:this._password});default:$i(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function eC(n,e){return E(this,null,function*(){return Uf(n,"POST","/v1/accounts:signInWithIdp",Ro(n,e))})}function Xz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qz(n){let e=bu(Du(n)).link,t=e?bu(Du(e)).deep_link_id:null,r=bu(Du(n)).deep_link_id;return(r?bu(Du(r)).link:null)||r||t||e||n}var b0=class n{constructor(e){var t,r,i,o,s,a;let c=bu(Du(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,f=Xz((i=c.mode)!==null&&i!==void 0?i:null);he(u&&l&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=l,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Qz(e);try{return new n(t)}catch{return null}}};var ek=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Vf._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=b0.parseLink(r);return he(i,"argument-error"),Vf._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),D0=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var hC=class extends D0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Zz(n,e){return E(this,null,function*(){return Uf(n,"POST","/v1/accounts:signUp",Ro(n,e))})}var Vu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield Os._fromIdTokenResponse(e,r,i),s=AM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=AM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function AM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var pC=class n extends Ar{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function tk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?pC._fromErrorAndOperation(n,o,e,r):o})}function Jz(n,e,t=!1){return E(this,null,function*(){let r=yield kf(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Vu._forOperation(n,"link",r)})}function eW(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(hr(r.app))return Promise.reject(Do(r));let i="reauthenticate";try{let o=yield kf(n,tk(r,i,e,n),t);he(o.idToken,r,"internal-error");let s=AC(o.idToken);he(s,r,"internal-error");let{sub:a}=s;return he(n.uid===a,r,"user-mismatch"),Vu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&$i(r,"user-mismatch"),o}})}function nk(n,e,t=!1){return E(this,null,function*(){if(hr(n.app))return Promise.reject(Do(n));let r="signIn",i=yield tk(n,r,e),o=yield Vu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function RC(n,e){return E(this,null,function*(){return nk(Ms(n),e)})}function tW(n,e,t){var r;he(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),he(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),he(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(he(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(he(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function rk(n){return E(this,null,function*(){let e=Ms(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function NC(n,e,t){return E(this,null,function*(){let r=Ms(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&tW(r,i,t),yield T0(r,i,"getOobCode",qz,"EMAIL_PASSWORD_PROVIDER")})}function OC(n,e,t){return E(this,null,function*(){if(hr(n.app))return Promise.reject(Do(n));let r=Ms(n),s=yield T0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zz,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&rk(n),c}),a=yield Vu._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function PC(n,e,t){return hr(n.app)?Promise.reject(Do(n)):RC(Xt(n),ek.credential(e,t)).catch(r=>E(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&rk(n),r}))}function MC(n,e,t,r){return Xt(n).onIdTokenChanged(e,t,r)}function kC(n,e,t){return Xt(n).beforeAuthStateChanged(e,t)}function FC(n){return Xt(n).signOut()}var R0="__sak";var N0=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(R0,"1"),this.storage.removeItem(R0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var nW=1e3,rW=10,iW=(()=>{class n extends N0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Mz()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,rW):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},nW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield to(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield to(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield to(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ik=iW;var oW=(()=>{class n extends N0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),LC=oW;function sW(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var aW=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(l=>E(this,null,function*(){return l(r.origin,s)})),u=yield sW(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function ok(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var gC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=ok("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Hi(){return window}function cW(n){Hi().location.href=n}function sk(){return typeof Hi().WorkerGlobalScope<"u"&&typeof Hi().importScripts=="function"}function uW(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function lW(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function dW(){return sk()?self:null}var ak="firebaseLocalStorageDb",fW=1,O0="firebaseLocalStorage",ck="fbase_key",Ja=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function k0(n,e){return n.transaction([O0],e?"readwrite":"readonly").objectStore(O0)}function hW(){let n=indexedDB.deleteDatabase(ak);return new Ja(n).toPromise()}function mC(){let n=indexedDB.open(ak,fW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(O0,{keyPath:ck})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(O0)?e(r):(r.close(),yield hW(),e(yield mC()))}))})}function SM(n,e,t){return E(this,null,function*(){let r=k0(n,!0).put({[ck]:e,value:t});return new Ja(r).toPromise()})}function pW(n,e){return E(this,null,function*(){let t=k0(n,!1).get(e),r=yield new Ja(t).toPromise();return r===void 0?null:r.value})}function TM(n,e){let t=k0(n,!0).delete(e);return new Ja(t).toPromise()}var gW=800,mW=3,vW=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield mC(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>mW)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return sk()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=aW._getInstance(dW()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield uW(),!this.activeServiceWorker)return;this.sender=new gC(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||lW()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield mC();return yield SM(t,R0,"1"),yield TM(t,R0),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>SM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>pW(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>TM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=k0(o,!1).getAll();return new Ja(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),gW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),uk=vW;var Dwe=QM("rcb"),Rwe=new Za(3e4,6e4);function yW(n,e){return e?bo(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Bf=class extends Lf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eC(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function _W(n){return nk(n.auth,new Bf(n),n.bypassAuthState)}function EW(n){let{auth:e,user:t}=n;return he(t,e,"internal-error"),eW(t,new Bf(n),n.bypassAuthState)}function wW(n){return E(this,null,function*(){let{auth:e,user:t}=n;return he(t,e,"internal-error"),Jz(t,new Bf(n),n.bypassAuthState)})}var vC=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _W;case"linkViaPopup":case"linkViaRedirect":return wW;case"reauthViaPopup":case"reauthViaRedirect":return EW;default:$i(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Nwe=new Za(2e3,1e4);var IW="pendingRedirect",_0=new Map,yC=class n extends vC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=_0.get(this.auth._key());if(!e){try{let r=(yield CW(this.resolver,this.auth))?yield to(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_0.set(this.auth._key(),e)}return this.bypassAuthState||_0.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return to(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,to(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function CW(n,e){return E(this,null,function*(){let t=SW(e),r=AW(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function xW(n,e){_0.set(n._key(),e)}function AW(n){return bo(n._redirectPersistence)}function SW(n){return y0(IW,n.config.apiKey,n.name)}function TW(n,e,t=!1){return E(this,null,function*(){if(hr(n.app))return Promise.reject(Do(n));let r=Ms(n),i=yW(r,e),s=yield new yC(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var bW=10*60*1e3,_C=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DW(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lk(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qa(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bW&&this.cachedEventUids.clear(),this.cachedEventUids.has(bM(e))}saveEventToCache(e){this.cachedEventUids.add(bM(e)),this.lastProcessedEventTime=Date.now()}};function bM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lk({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function DW(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lk(n);default:return!1}}function RW(t){return E(this,arguments,function*(n,e={}){return No(n,"GET","/v1/projects",e)})}var NW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OW=/^https?/;function PW(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield RW(n);for(let t of e)try{if(MW(t))return}catch{}$i(n,"unauthorized-domain")})}function MW(n){let e=nC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!OW.test(t))return!1;if(NW.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var kW=new Za(3e4,6e4);function DM(){let n=Hi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function FW(n){return new Promise((e,t)=>{var r,i,o;function s(){DM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DM(),t(Qa(n,"network-request-failed"))},timeout:kW.get()})}if(!((i=(r=Hi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Hi().gapi)===null||o===void 0)&&o.load)s();else{let a=QM("iframefcb");return Hi()[a]=()=>{gapi.load?s():t(Qa(n,"network-request-failed"))},XM(`${Bz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw E0=null,e})}var E0=null;function LW(n){return E0=E0||FW(n),E0}var VW=new Za(5e3,15e3),BW="__/auth/iframe",UW="emulator/auth/iframe",jW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $W(n){let e=n.config;he(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?CC(e,UW):`https://${n.config.authDomain}/${BW}`,r={apiKey:e.apiKey,appName:n.name,v:Ss},i=HW.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wf(r).slice(1)}`}function GW(n){return E(this,null,function*(){let e=yield LW(n),t=Hi().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:$W(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jW,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Qa(n,"network-request-failed"),a=Hi().setTimeout(()=>{o(s)},VW.get());function c(){Hi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var zW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WW=500,qW=600,KW="_blank",YW="http://localhost",P0=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function XW(n,e,t,r=WW,i=qW){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},zW),{width:r.toString(),height:i.toString(),top:o,left:s}),u=_n().toLowerCase();t&&(a=$M(u)?KW:t),jM(u)&&(e=e||YW,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(Pz(u)&&a!=="_self")return QW(e||"",a),new P0(null);let f=window.open(e||"",a,l);he(f,n,"popup-blocked");try{f.focus()}catch{}return new P0(f)}function QW(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var ZW="__/auth/handler",JW="emulator/auth/handler",eq=encodeURIComponent("fac");function RM(n,e,t,r,i,o){return E(this,null,function*(){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ss,eventId:i};if(e instanceof D0){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",iP(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,f]of Object.entries(o||{}))s[l]=f}if(e instanceof hC){let l=e.getScopes().filter(f=>f!=="");l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield n._getAppCheckToken(),u=c?`#${eq}=${encodeURIComponent(c)}`:"";return`${tq(n)}?${wf(a).slice(1)}${u}`})}function tq({config:n}){return n.emulator?CC(n,JW):`https://${n.authDomain}/${ZW}`}var tC="webStorageSupport",EC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LC,this._completeRedirectFn=TW,this._overrideRedirectResult=xW}_openPopup(e,t,r,i){return E(this,null,function*(){var o;Ps((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield RM(e,t,r,nC(),i);return XW(e,s,ok())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield RM(e,t,r,nC(),i);return cW(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ps(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield GW(e),r=new _C(e);return t.register("authEvent",i=>(he(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tC,{type:tC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[tC];s!==void 0&&t(!!s),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PW(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KM()||HM()||TC()}},dk=EC;var NM="@firebase/auth",OM="1.10.8";var wC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function nq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rq(n){li(new Jn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;he(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YM(n)},u=new uC(r,i,o,c);return jz(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),li(new Jn("auth-internal",e=>{let t=Ms(e.getProvider("auth").getImmediate());return(r=>new wC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bt(NM,OM,nq(n)),Bt(NM,OM,"esm2017")}var iq=5*60,oq=oI("authIdTokenMaxAge")||iq,PM=null,sq=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>oq)return;let i=t?.token;PM!==i&&(PM=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function VC(n=Ga()){let e=Ru(n,"auth");if(e.isInitialized())return e.getImmediate();let t=bC(n,{popupRedirectResolver:dk,persistence:[uk,ik,LC]}),r=oI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=sq(o.toString());kC(t,s,()=>s(t.currentUser)),MC(t,a=>s(a))}}let i=rI("auth");return i&&DC(t,`http://${i}`),t}function aq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Lz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Qa("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",aq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rq("Browser");var fk="auth",ec=class{constructor(e){return e}},jf=class{constructor(){return Ou(fk)}};var BC=new ce("angularfire2.auth-instances");function Yq(n,e){let t=xf(fk,n,e);return t&&new ec(t)}function Xq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ec(r)}}var Qq={provide:jf,deps:[[new lr,BC]]},Zq={provide:ec,useFactory:Yq,deps:[[new lr,BC],Co]};function hk(n,...e){return Bt("angularfire",Ts.full,"auth"),Xr([Zq,Qq,{provide:BC,useFactory:Xq(n),multi:!0,deps:[nt,Lt,bs,Wa,[new lr,Pu],...e]}])}var UC=Ut(yM,!0);var pk=Ut(OC,!0,2);var gk=Ut(VC,!0);var mk=Ut(NC,!0,2);var vk=Ut(PC,!0,2);var jC=Ut(FC,!0,2);var yk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_k={};var Oo,HC;(function(){var n;function e(T,x){function b(){}b.prototype=x.prototype,T.D=x.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(N,M,k){for(var R=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)R[Mt-2]=arguments[Mt];return x.prototype[M].apply(N,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,x,b){b||(b=0);var N=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)N[M]=x.charCodeAt(b++)|x.charCodeAt(b++)<<8|x.charCodeAt(b++)<<16|x.charCodeAt(b++)<<24;else for(M=0;16>M;++M)N[M]=x[b++]|x[b++]<<8|x[b++]<<16|x[b++]<<24;x=T.g[0],b=T.g[1],M=T.g[2];var k=T.g[3],R=x+(k^b&(M^k))+N[0]+3614090360&4294967295;x=b+(R<<7&4294967295|R>>>25),R=k+(M^x&(b^M))+N[1]+3905402710&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(b^k&(x^b))+N[2]+606105819&4294967295,M=k+(R<<17&4294967295|R>>>15),R=b+(x^M&(k^x))+N[3]+3250441966&4294967295,b=M+(R<<22&4294967295|R>>>10),R=x+(k^b&(M^k))+N[4]+4118548399&4294967295,x=b+(R<<7&4294967295|R>>>25),R=k+(M^x&(b^M))+N[5]+1200080426&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(b^k&(x^b))+N[6]+2821735955&4294967295,M=k+(R<<17&4294967295|R>>>15),R=b+(x^M&(k^x))+N[7]+4249261313&4294967295,b=M+(R<<22&4294967295|R>>>10),R=x+(k^b&(M^k))+N[8]+1770035416&4294967295,x=b+(R<<7&4294967295|R>>>25),R=k+(M^x&(b^M))+N[9]+2336552879&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(b^k&(x^b))+N[10]+4294925233&4294967295,M=k+(R<<17&4294967295|R>>>15),R=b+(x^M&(k^x))+N[11]+2304563134&4294967295,b=M+(R<<22&4294967295|R>>>10),R=x+(k^b&(M^k))+N[12]+1804603682&4294967295,x=b+(R<<7&4294967295|R>>>25),R=k+(M^x&(b^M))+N[13]+4254626195&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(b^k&(x^b))+N[14]+2792965006&4294967295,M=k+(R<<17&4294967295|R>>>15),R=b+(x^M&(k^x))+N[15]+1236535329&4294967295,b=M+(R<<22&4294967295|R>>>10),R=x+(M^k&(b^M))+N[1]+4129170786&4294967295,x=b+(R<<5&4294967295|R>>>27),R=k+(b^M&(x^b))+N[6]+3225465664&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^b&(k^x))+N[11]+643717713&4294967295,M=k+(R<<14&4294967295|R>>>18),R=b+(k^x&(M^k))+N[0]+3921069994&4294967295,b=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(b^M))+N[5]+3593408605&4294967295,x=b+(R<<5&4294967295|R>>>27),R=k+(b^M&(x^b))+N[10]+38016083&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^b&(k^x))+N[15]+3634488961&4294967295,M=k+(R<<14&4294967295|R>>>18),R=b+(k^x&(M^k))+N[4]+3889429448&4294967295,b=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(b^M))+N[9]+568446438&4294967295,x=b+(R<<5&4294967295|R>>>27),R=k+(b^M&(x^b))+N[14]+3275163606&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^b&(k^x))+N[3]+4107603335&4294967295,M=k+(R<<14&4294967295|R>>>18),R=b+(k^x&(M^k))+N[8]+1163531501&4294967295,b=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(b^M))+N[13]+2850285829&4294967295,x=b+(R<<5&4294967295|R>>>27),R=k+(b^M&(x^b))+N[2]+4243563512&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^b&(k^x))+N[7]+1735328473&4294967295,M=k+(R<<14&4294967295|R>>>18),R=b+(k^x&(M^k))+N[12]+2368359562&4294967295,b=M+(R<<20&4294967295|R>>>12),R=x+(b^M^k)+N[5]+4294588738&4294967295,x=b+(R<<4&4294967295|R>>>28),R=k+(x^b^M)+N[8]+2272392833&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^b)+N[11]+1839030562&4294967295,M=k+(R<<16&4294967295|R>>>16),R=b+(M^k^x)+N[14]+4259657740&4294967295,b=M+(R<<23&4294967295|R>>>9),R=x+(b^M^k)+N[1]+2763975236&4294967295,x=b+(R<<4&4294967295|R>>>28),R=k+(x^b^M)+N[4]+1272893353&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^b)+N[7]+4139469664&4294967295,M=k+(R<<16&4294967295|R>>>16),R=b+(M^k^x)+N[10]+3200236656&4294967295,b=M+(R<<23&4294967295|R>>>9),R=x+(b^M^k)+N[13]+681279174&4294967295,x=b+(R<<4&4294967295|R>>>28),R=k+(x^b^M)+N[0]+3936430074&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^b)+N[3]+3572445317&4294967295,M=k+(R<<16&4294967295|R>>>16),R=b+(M^k^x)+N[6]+76029189&4294967295,b=M+(R<<23&4294967295|R>>>9),R=x+(b^M^k)+N[9]+3654602809&4294967295,x=b+(R<<4&4294967295|R>>>28),R=k+(x^b^M)+N[12]+3873151461&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^b)+N[15]+530742520&4294967295,M=k+(R<<16&4294967295|R>>>16),R=b+(M^k^x)+N[2]+3299628645&4294967295,b=M+(R<<23&4294967295|R>>>9),R=x+(M^(b|~k))+N[0]+4096336452&4294967295,x=b+(R<<6&4294967295|R>>>26),R=k+(b^(x|~M))+N[7]+1126891415&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~b))+N[14]+2878612391&4294967295,M=k+(R<<15&4294967295|R>>>17),R=b+(k^(M|~x))+N[5]+4237533241&4294967295,b=M+(R<<21&4294967295|R>>>11),R=x+(M^(b|~k))+N[12]+1700485571&4294967295,x=b+(R<<6&4294967295|R>>>26),R=k+(b^(x|~M))+N[3]+2399980690&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~b))+N[10]+4293915773&4294967295,M=k+(R<<15&4294967295|R>>>17),R=b+(k^(M|~x))+N[1]+2240044497&4294967295,b=M+(R<<21&4294967295|R>>>11),R=x+(M^(b|~k))+N[8]+1873313359&4294967295,x=b+(R<<6&4294967295|R>>>26),R=k+(b^(x|~M))+N[15]+4264355552&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~b))+N[6]+2734768916&4294967295,M=k+(R<<15&4294967295|R>>>17),R=b+(k^(M|~x))+N[13]+1309151649&4294967295,b=M+(R<<21&4294967295|R>>>11),R=x+(M^(b|~k))+N[4]+4149444226&4294967295,x=b+(R<<6&4294967295|R>>>26),R=k+(b^(x|~M))+N[11]+3174756917&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~b))+N[2]+718787259&4294967295,M=k+(R<<15&4294967295|R>>>17),R=b+(k^(M|~x))+N[9]+3951481745&4294967295,T.g[0]=T.g[0]+x&4294967295,T.g[1]=T.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,x){x===void 0&&(x=T.length);for(var b=x-this.blockSize,N=this.B,M=this.h,k=0;k<x;){if(M==0)for(;k<=b;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<x;)if(N[M++]=T.charCodeAt(k++),M==this.blockSize){i(this,N),M=0;break}}else for(;k<x;)if(N[M++]=T[k++],M==this.blockSize){i(this,N),M=0;break}}this.h=M,this.o+=x},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var x=1;x<T.length-8;++x)T[x]=0;var b=8*this.o;for(x=T.length-8;x<T.length;++x)T[x]=b&255,b/=256;for(this.u(T),T=Array(16),x=b=0;4>x;++x)for(var N=0;32>N;N+=8)T[b++]=this.g[x]>>>N&255;return T};function o(T,x){var b=a;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=x(T)}function s(T,x){this.h=x;for(var b=[],N=!0,M=T.length-1;0<=M;M--){var k=T[M]|0;N&&k==x||(b[M]=k,N=!1)}this.g=b}var a={};function c(T){return-128<=T&&128>T?o(T,function(x){return new s([x|0],0>x?-1:0)}):new s([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return w(u(-T));for(var x=[],b=1,N=0;T>=b;N++)x[N]=T/b|0,b*=4294967296;return new s(x,0)}function l(T,x){if(T.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(T.charAt(0)=="-")return w(l(T.substring(1),x));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=u(Math.pow(x,8)),N=f,M=0;M<T.length;M+=8){var k=Math.min(8,T.length-M),R=parseInt(T.substring(M,M+k),x);8>k?(k=u(Math.pow(x,k)),N=N.j(k).add(u(R))):(N=N.j(b),N=N.add(u(R)))}return N}var f=c(0),h=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(y(this))return-w(this).m();for(var T=0,x=1,b=0;b<this.g.length;b++){var N=this.i(b);T+=(0<=N?N:4294967296+N)*x,x*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(y(this))return"-"+w(this).toString(T);for(var x=u(Math.pow(T,6)),b=this,N="";;){var M=F(b,x).g;b=S(b,M.j(x));var k=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=M,m(b))return k+N;for(;6>k.length;)k="0"+k;N=k+N}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function m(T){if(T.h!=0)return!1;for(var x=0;x<T.g.length;x++)if(T.g[x]!=0)return!1;return!0}function y(T){return T.h==-1}n.l=function(T){return T=S(this,T),y(T)?-1:m(T)?0:1};function w(T){for(var x=T.g.length,b=[],N=0;N<x;N++)b[N]=~T.g[N];return new s(b,~T.h).add(h)}n.abs=function(){return y(this)?w(this):this},n.add=function(T){for(var x=Math.max(this.g.length,T.g.length),b=[],N=0,M=0;M<=x;M++){var k=N+(this.i(M)&65535)+(T.i(M)&65535),R=(k>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);N=R>>>16,k&=65535,R&=65535,b[M]=R<<16|k}return new s(b,b[b.length-1]&-2147483648?-1:0)};function S(T,x){return T.add(w(x))}n.j=function(T){if(m(this)||m(T))return f;if(y(this))return y(T)?w(this).j(w(T)):w(w(this).j(T));if(y(T))return w(this.j(w(T)));if(0>this.l(p)&&0>T.l(p))return u(this.m()*T.m());for(var x=this.g.length+T.g.length,b=[],N=0;N<2*x;N++)b[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<T.g.length;M++){var k=this.i(N)>>>16,R=this.i(N)&65535,Mt=T.i(M)>>>16,ir=T.i(M)&65535;b[2*N+2*M]+=R*ir,D(b,2*N+2*M),b[2*N+2*M+1]+=k*ir,D(b,2*N+2*M+1),b[2*N+2*M+1]+=R*Mt,D(b,2*N+2*M+1),b[2*N+2*M+2]+=k*Mt,D(b,2*N+2*M+2)}for(N=0;N<x;N++)b[N]=b[2*N+1]<<16|b[2*N];for(N=x;N<2*x;N++)b[N]=0;return new s(b,0)};function D(T,x){for(;(T[x]&65535)!=T[x];)T[x+1]+=T[x]>>>16,T[x]&=65535,x++}function P(T,x){this.g=T,this.h=x}function F(T,x){if(m(x))throw Error("division by zero");if(m(T))return new P(f,f);if(y(T))return x=F(w(T),x),new P(w(x.g),w(x.h));if(y(x))return x=F(T,w(x)),new P(w(x.g),x.h);if(30<T.g.length){if(y(T)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var b=h,N=x;0>=N.l(T);)b=H(b),N=H(N);var M=$(b,1),k=$(N,1);for(N=$(N,2),b=$(b,2);!m(N);){var R=k.add(N);0>=R.l(T)&&(M=M.add(b),k=R),N=$(N,1),b=$(b,1)}return x=S(T,M.j(x)),new P(M,x)}for(M=f;0<=T.l(x);){for(b=Math.max(1,Math.floor(T.m()/x.m())),N=Math.ceil(Math.log(b)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),k=u(b),R=k.j(x);y(R)||0<R.l(T);)b-=N,k=u(b),R=k.j(x);m(k)&&(k=h),M=M.add(k),T=S(T,R)}return new P(M,T)}n.A=function(T){return F(this,T).h},n.and=function(T){for(var x=Math.max(this.g.length,T.g.length),b=[],N=0;N<x;N++)b[N]=this.i(N)&T.i(N);return new s(b,this.h&T.h)},n.or=function(T){for(var x=Math.max(this.g.length,T.g.length),b=[],N=0;N<x;N++)b[N]=this.i(N)|T.i(N);return new s(b,this.h|T.h)},n.xor=function(T){for(var x=Math.max(this.g.length,T.g.length),b=[],N=0;N<x;N++)b[N]=this.i(N)^T.i(N);return new s(b,this.h^T.h)};function H(T){for(var x=T.g.length+1,b=[],N=0;N<x;N++)b[N]=T.i(N)<<1|T.i(N-1)>>>31;return new s(b,T.h)}function $(T,x){var b=x>>5;x%=32;for(var N=T.g.length-b,M=[],k=0;k<N;k++)M[k]=0<x?T.i(k+b)>>>x|T.i(k+b+1)<<32-x:T.i(k+b);return new s(M,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HC=_k.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=l,Oo=_k.Integer=s}).apply(typeof yk<"u"?yk:typeof self<"u"?self:typeof window<"u"?window:{});var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Po={};var $C,Jq,Bu,GC,Hf,L0,zC,WC,qC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof F0=="object"&&F0];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var L=d[I];if(!(L in v))break e;v=v[L]}d=d[d.length-1],I=v[d],g=g(I),g!=I&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var v=0,I=!1,L={next:function(){if(!I&&v<d.length){var j=v++;return{value:g(j,d[j]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,v){return v})}});var s=s||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,v){return d.call.apply(d.bind,arguments)}function f(d,g,v){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function h(d,g,v){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:f,h.apply(null,arguments)}function p(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function m(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(I,L,j){for(var Z=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)Z[mt-2]=arguments[mt];return g.prototype[L].apply(I,Z)}}function y(d){let g=d.length;if(0<g){let v=Array(g);for(let I=0;I<g;I++)v[I]=d[I];return v}return[]}function w(d,g){for(let v=1;v<arguments.length;v++){let I=arguments[v];if(c(I)){let L=d.length||0,j=I.length||0;d.length=L+j;for(let Z=0;Z<j;Z++)d[L+Z]=I[Z]}else d.push(I)}}class S{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function D(d){return/^[\s\xa0]*$/.test(d)}function P(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function F(d){return F[" "](d),d}F[" "]=function(){};var H=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function $(d,g,v){for(let I in d)g.call(v,d[I],I,d)}function T(d,g){for(let v in d)g.call(void 0,d[v],v,d)}function x(d){let g={};for(let v in d)g[v]=d[v];return g}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,g){let v,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(v in I)d[v]=I[v];for(let j=0;j<b.length;j++)v=b[j],Object.prototype.hasOwnProperty.call(I,v)&&(d[v]=I[v])}}function M(d){var g=1;d=d.split(":");let v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function k(d){a.setTimeout(()=>{throw d},0)}function R(){var d=D1;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Mt{constructor(){this.h=this.g=null}add(g,v){let I=ir.get();I.set(g,v),this.h?this.h.next=I:this.g=I,this.h=I}}var ir=new S(()=>new Fl,d=>d.reset());class Fl{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Qi,Zi=!1,D1=new Mt,mT=()=>{let d=a.Promise.resolve(void 0);Qi=()=>{d.then(v8)}};var v8=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(v){k(v)}var g=ir;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Zi=!1};function Ko(){this.s=this.s,this.C=this.C}Ko.prototype.s=!1,Ko.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ko.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Rn(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Rn.prototype.h=function(){this.defaultPrevented=!0};var y8=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return d}();function Ll(d,g){if(Rn.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(H){e:{try{F(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:_8[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ll.aa.h.call(this)}}m(Ll,Rn);var _8={2:"touch",3:"pen",4:"mouse"};Ll.prototype.h=function(){Ll.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Vl="closure_listenable_"+(1e6*Math.random()|0),E8=0;function w8(d,g,v,I,L){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!I,this.ha=L,this.key=++E8,this.da=this.fa=!1}function Bh(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Uh(d){this.src=d,this.g={},this.h=0}Uh.prototype.add=function(d,g,v,I,L){var j=d.toString();d=this.g[j],d||(d=this.g[j]=[],this.h++);var Z=N1(d,g,I,L);return-1<Z?(g=d[Z],v||(g.fa=!1)):(g=new w8(g,this.src,j,!!I,L),g.fa=v,d.push(g)),g};function R1(d,g){var v=g.type;if(v in d.g){var I=d.g[v],L=Array.prototype.indexOf.call(I,g,void 0),j;(j=0<=L)&&Array.prototype.splice.call(I,L,1),j&&(Bh(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function N1(d,g,v,I){for(var L=0;L<d.length;++L){var j=d[L];if(!j.da&&j.listener==g&&j.capture==!!v&&j.ha==I)return L}return-1}var O1="closure_lm_"+(1e6*Math.random()|0),P1={};function vT(d,g,v,I,L){if(I&&I.once)return _T(d,g,v,I,L);if(Array.isArray(g)){for(var j=0;j<g.length;j++)vT(d,g[j],v,I,L);return null}return v=L1(v),d&&d[Vl]?d.K(g,v,u(I)?!!I.capture:!!I,L):yT(d,g,v,!1,I,L)}function yT(d,g,v,I,L,j){if(!g)throw Error("Invalid event type");var Z=u(L)?!!L.capture:!!L,mt=k1(d);if(mt||(d[O1]=mt=new Uh(d)),v=mt.add(g,v,I,Z,j),v.proxy)return v;if(I=I8(),v.proxy=I,I.src=d,I.listener=v,d.addEventListener)y8||(L=Z),L===void 0&&(L=!1),d.addEventListener(g.toString(),I,L);else if(d.attachEvent)d.attachEvent(wT(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function I8(){function d(v){return g.call(d.src,d.listener,v)}let g=C8;return d}function _T(d,g,v,I,L){if(Array.isArray(g)){for(var j=0;j<g.length;j++)_T(d,g[j],v,I,L);return null}return v=L1(v),d&&d[Vl]?d.L(g,v,u(I)?!!I.capture:!!I,L):yT(d,g,v,!0,I,L)}function ET(d,g,v,I,L){if(Array.isArray(g))for(var j=0;j<g.length;j++)ET(d,g[j],v,I,L);else I=u(I)?!!I.capture:!!I,v=L1(v),d&&d[Vl]?(d=d.i,g=String(g).toString(),g in d.g&&(j=d.g[g],v=N1(j,v,I,L),-1<v&&(Bh(j[v]),Array.prototype.splice.call(j,v,1),j.length==0&&(delete d.g[g],d.h--)))):d&&(d=k1(d))&&(g=d.g[g.toString()],d=-1,g&&(d=N1(g,v,I,L)),(v=-1<d?g[d]:null)&&M1(v))}function M1(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Vl])R1(g.i,d);else{var v=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(v,I,d.capture):g.detachEvent?g.detachEvent(wT(v),I):g.addListener&&g.removeListener&&g.removeListener(I),(v=k1(g))?(R1(v,d),v.h==0&&(v.src=null,g[O1]=null)):Bh(d)}}}function wT(d){return d in P1?P1[d]:P1[d]="on"+d}function C8(d,g){if(d.da)d=!0;else{g=new Ll(g,this);var v=d.listener,I=d.ha||d.src;d.fa&&M1(d),d=v.call(I,g)}return d}function k1(d){return d=d[O1],d instanceof Uh?d:null}var F1="__closure_events_fn_"+(1e9*Math.random()>>>0);function L1(d){return typeof d=="function"?d:(d[F1]||(d[F1]=function(g){return d.handleEvent(g)}),d[F1])}function Nn(){Ko.call(this),this.i=new Uh(this),this.M=this,this.F=null}m(Nn,Ko),Nn.prototype[Vl]=!0,Nn.prototype.removeEventListener=function(d,g,v,I){ET(this,d,g,v,I)};function Wn(d,g){var v,I=d.F;if(I)for(v=[];I;I=I.F)v.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new Rn(g,d);else if(g instanceof Rn)g.target=g.target||d;else{var L=g;g=new Rn(I,d),N(g,L)}if(L=!0,v)for(var j=v.length-1;0<=j;j--){var Z=g.g=v[j];L=jh(Z,I,!0,g)&&L}if(Z=g.g=d,L=jh(Z,I,!0,g)&&L,L=jh(Z,I,!1,g)&&L,v)for(j=0;j<v.length;j++)Z=g.g=v[j],L=jh(Z,I,!1,g)&&L}Nn.prototype.N=function(){if(Nn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],I=0;I<v.length;I++)Bh(v[I]);delete d.g[g],d.h--}}this.F=null},Nn.prototype.K=function(d,g,v,I){return this.i.add(String(d),g,!1,v,I)},Nn.prototype.L=function(d,g,v,I){return this.i.add(String(d),g,!0,v,I)};function jh(d,g,v,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,j=0;j<g.length;++j){var Z=g[j];if(Z&&!Z.da&&Z.capture==v){var mt=Z.listener,An=Z.ha||Z.src;Z.fa&&R1(d.i,Z),L=mt.call(An,I)!==!1&&L}}return L&&!I.defaultPrevented}function IT(d,g,v){if(typeof d=="function")v&&(d=h(d,v));else if(d&&typeof d.handleEvent=="function")d=h(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function CT(d){d.g=IT(()=>{d.g=null,d.i&&(d.i=!1,CT(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class x8 extends Ko{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:CT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bl(d){Ko.call(this),this.h=d,this.g={}}m(Bl,Ko);var xT=[];function AT(d){$(d.g,function(g,v){this.g.hasOwnProperty(v)&&M1(g)},d),d.g={}}Bl.prototype.N=function(){Bl.aa.N.call(this),AT(this)},Bl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var V1=a.JSON.stringify,A8=a.JSON.parse,S8=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function B1(){}B1.prototype.h=null;function ST(d){return d.h||(d.h=d.i())}function TT(){}var Ul={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function U1(){Rn.call(this,"d")}m(U1,Rn);function j1(){Rn.call(this,"c")}m(j1,Rn);var ta={},bT=null;function Hh(){return bT=bT||new Nn}ta.La="serverreachability";function DT(d){Rn.call(this,ta.La,d)}m(DT,Rn);function jl(d){let g=Hh();Wn(g,new DT(g))}ta.STAT_EVENT="statevent";function RT(d,g){Rn.call(this,ta.STAT_EVENT,d),this.stat=g}m(RT,Rn);function qn(d){let g=Hh();Wn(g,new RT(g,d))}ta.Ma="timingevent";function NT(d,g){Rn.call(this,ta.Ma,d),this.size=g}m(NT,Rn);function Hl(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function $l(){this.g=!0}$l.prototype.xa=function(){this.g=!1};function T8(d,g,v,I,L,j){d.info(function(){if(d.g)if(j)for(var Z="",mt=j.split("&"),An=0;An<mt.length;An++){var Ye=mt[An].split("=");if(1<Ye.length){var On=Ye[0];Ye=Ye[1];var Pn=On.split("_");Z=2<=Pn.length&&Pn[1]=="type"?Z+(On+"="+Ye+"&"):Z+(On+"=redacted&")}}else Z=null;else Z=j;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+g+`
`+v+`
`+Z})}function b8(d,g,v,I,L,j,Z){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+g+`
`+v+`
`+j+" "+Z})}function bc(d,g,v,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+R8(d,v)+(I?" "+I:"")})}function D8(d,g){d.info(function(){return"TIMEOUT: "+g})}$l.prototype.info=function(){};function R8(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var I=v[d];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Z=1;Z<L.length;Z++)L[Z]=""}}}}return V1(v)}catch{return g}}var $h={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},OT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},H1;function Gh(){}m(Gh,B1),Gh.prototype.g=function(){return new XMLHttpRequest},Gh.prototype.i=function(){return{}},H1=new Gh;function Yo(d,g,v,I){this.j=d,this.i=g,this.l=v,this.R=I||1,this.U=new Bl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new PT}function PT(){this.i=null,this.g="",this.h=!1}var MT={},$1={};function G1(d,g,v){d.L=1,d.v=Kh(Ji(g)),d.m=v,d.P=!0,kT(d,null)}function kT(d,g){d.F=Date.now(),zh(d),d.A=Ji(d.v);var v=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),YT(v.i,"t",I),d.C=0,v=d.j.J,d.h=new PT,d.g=hb(d.j,v?g:null,!d.m),0<d.O&&(d.M=new x8(h(d.Y,d,d.g),d.O)),g=d.U,v=d.g,I=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(xT[0]=L.toString()),L=xT);for(var j=0;j<L.length;j++){var Z=vT(v,L[j],I||g.handleEvent,!1,g.h||g);if(!Z)break;g.g[Z.key]=Z}g=d.H?x(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),jl(),T8(d.i,d.u,d.A,d.l,d.R,d.m)}Yo.prototype.ca=function(d){d=d.target;let g=this.M;g&&eo(d)==3?g.j():this.Y(d)},Yo.prototype.Y=function(d){try{if(d==this.g)e:{let Pn=eo(this.g);var g=this.g.Ba();let Nc=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||nb(this.g)))){this.J||Pn!=4||g==7||(g==8||0>=Nc?jl(3):jl(2)),z1(this);var v=this.g.Z();this.X=v;t:if(FT(this)){var I=nb(this.g);d="";var L=I.length,j=eo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){na(this),Gl(this);var Z="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!(j&&g==L-1)});I.length=0,this.h.g+=d,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=v==200,b8(this.i,this.u,this.A,this.l,this.R,Pn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,An=this.g;if((mt=An.g?An.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(mt)){var Ye=mt;break t}}Ye=null}if(v=Ye)bc(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,W1(this,v);else{this.o=!1,this.s=3,qn(12),na(this),Gl(this);break e}}if(this.P){v=!0;let qr;for(;!this.J&&this.C<Z.length;)if(qr=N8(this,Z),qr==$1){Pn==4&&(this.s=4,qn(14),v=!1),bc(this.i,this.l,null,"[Incomplete Response]");break}else if(qr==MT){this.s=4,qn(15),bc(this.i,this.l,Z,"[Invalid Chunk]"),v=!1;break}else bc(this.i,this.l,qr,null),W1(this,qr);if(FT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||Z.length!=0||this.h.h||(this.s=1,qn(16),v=!1),this.o=this.o&&v,!v)bc(this.i,this.l,Z,"[Invalid Chunked Response]"),na(this),Gl(this);else if(0<Z.length&&!this.W){this.W=!0;var On=this.j;On.g==this&&On.ba&&!On.M&&(On.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Z1(On),On.M=!0,qn(11))}}else bc(this.i,this.l,Z,null),W1(this,Z);Pn==4&&na(this),this.o&&!this.J&&(Pn==4?ub(this.j,this):(this.o=!1,zh(this)))}else K8(this.g),v==400&&0<Z.indexOf("Unknown SID")?(this.s=3,qn(12)):(this.s=0,qn(13)),na(this),Gl(this)}}}catch{}finally{}};function FT(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function N8(d,g){var v=d.C,I=g.indexOf(`
`,v);return I==-1?$1:(v=Number(g.substring(v,I)),isNaN(v)?MT:(I+=1,I+v>g.length?$1:(g=g.slice(I,I+v),d.C=I+v,g)))}Yo.prototype.cancel=function(){this.J=!0,na(this)};function zh(d){d.S=Date.now()+d.I,LT(d,d.I)}function LT(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Hl(h(d.ba,d),g)}function z1(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Yo.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(D8(this.i,this.A),this.L!=2&&(jl(),qn(17)),na(this),this.s=2,Gl(this)):LT(this,this.S-d)};function Gl(d){d.j.G==0||d.J||ub(d.j,d)}function na(d){z1(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,AT(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function W1(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||q1(v.h,d))){if(!d.K&&q1(v.h,d)&&v.G==3){try{var I=v.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)Jh(v),Qh(v);else break e;Q1(v),qn(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Hl(h(v.Za,v),6e3));if(1>=UT(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ia(v,11)}else if((d.K||v.g==d)&&Jh(v),!D(g))for(L=v.Da.g.parse(g),g=0;g<L.length;g++){let Ye=L[g];if(v.T=Ye[0],Ye=Ye[1],v.G==2)if(Ye[0]=="c"){v.K=Ye[1],v.ia=Ye[2];let On=Ye[3];On!=null&&(v.la=On,v.j.info("VER="+v.la));let Pn=Ye[4];Pn!=null&&(v.Aa=Pn,v.j.info("SVER="+v.Aa));let Nc=Ye[5];Nc!=null&&typeof Nc=="number"&&0<Nc&&(I=1.5*Nc,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;let qr=d.g;if(qr){let tp=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tp){var j=I.h;j.g||tp.indexOf("spdy")==-1&&tp.indexOf("quic")==-1&&tp.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(K1(j,j.h),j.h=null))}if(I.D){let J1=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;J1&&(I.ya=J1,At(I.I,I.D,J1))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var Z=d;if(I.qa=fb(I,I.J?I.ia:null,I.W),Z.K){jT(I.h,Z);var mt=Z,An=I.L;An&&(mt.I=An),mt.B&&(z1(mt),zh(mt)),I.g=Z}else ab(I);0<v.i.length&&Zh(v)}else Ye[0]!="stop"&&Ye[0]!="close"||ia(v,7);else v.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ia(v,7):X1(v):Ye[0]!="noop"&&v.l&&v.l.ta(Ye),v.v=0)}}jl(4)}catch{}}var O8=class{constructor(d,g){this.g=d,this.map=g}};function VT(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function BT(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function UT(d){return d.h?1:d.g?d.g.size:0}function q1(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function K1(d,g){d.g?d.g.add(g):d.h=g}function jT(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}VT.prototype.cancel=function(){if(this.i=HT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function HT(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let v of d.g.values())g=g.concat(v.D);return g}return y(d.i)}function P8(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,I=0;I<v;I++)g.push(d[I]);return g}g=[],v=0;for(I in d)g[v++]=d[I];return g}function M8(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(let I in d)g[v++]=I;return g}}}function $T(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=M8(d),I=P8(d),L=I.length,j=0;j<L;j++)g.call(void 0,I[j],v&&v[j],d)}var GT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k8(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var I=d[v].indexOf("="),L=null;if(0<=I){var j=d[v].substring(0,I);L=d[v].substring(I+1)}else j=d[v];g(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ra(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ra){this.h=d.h,Wh(this,d.j),this.o=d.o,this.g=d.g,qh(this,d.s),this.l=d.l;var g=d.i,v=new ql;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),zT(this,v),this.m=d.m}else d&&(g=String(d).match(GT))?(this.h=!1,Wh(this,g[1]||"",!0),this.o=zl(g[2]||""),this.g=zl(g[3]||"",!0),qh(this,g[4]),this.l=zl(g[5]||"",!0),zT(this,g[6]||"",!0),this.m=zl(g[7]||"")):(this.h=!1,this.i=new ql(null,this.h))}ra.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Wl(g,WT,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Wl(g,WT,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Wl(v,v.charAt(0)=="/"?V8:L8,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Wl(v,U8)),d.join("")};function Ji(d){return new ra(d)}function Wh(d,g,v){d.j=v?zl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function qh(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function zT(d,g,v){g instanceof ql?(d.i=g,j8(d.i,d.h)):(v||(g=Wl(g,B8)),d.i=new ql(g,d.h))}function At(d,g,v){d.i.set(g,v)}function Kh(d){return At(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function zl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Wl(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,F8),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function F8(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var WT=/[#\/\?@]/g,L8=/[#\?:]/g,V8=/[#\?]/g,B8=/[#\?@]/g,U8=/#/g;function ql(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Xo(d){d.g||(d.g=new Map,d.h=0,d.i&&k8(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=ql.prototype,n.add=function(d,g){Xo(this),this.i=null,d=Dc(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function qT(d,g){Xo(d),g=Dc(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function KT(d,g){return Xo(d),g=Dc(d,g),d.g.has(g)}n.forEach=function(d,g){Xo(this),this.g.forEach(function(v,I){v.forEach(function(L){d.call(g,L,I,this)},this)},this)},n.na=function(){Xo(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let I=0;I<g.length;I++){let L=d[I];for(let j=0;j<L.length;j++)v.push(g[I])}return v},n.V=function(d){Xo(this);let g=[];if(typeof d=="string")KT(this,d)&&(g=g.concat(this.g.get(Dc(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},n.set=function(d,g){return Xo(this),this.i=null,d=Dc(this,d),KT(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function YT(d,g,v){qT(d,g),0<v.length&&(d.i=null,d.g.set(Dc(d,g),y(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var I=g[v];let j=encodeURIComponent(String(I)),Z=this.V(I);for(I=0;I<Z.length;I++){var L=j;Z[I]!==""&&(L+="="+encodeURIComponent(String(Z[I]))),d.push(L)}}return this.i=d.join("&")};function Dc(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function j8(d,g){g&&!d.j&&(Xo(d),d.i=null,d.g.forEach(function(v,I){var L=I.toLowerCase();I!=L&&(qT(this,I),YT(this,L,v))},d)),d.j=g}function H8(d,g){let v=new $l;if(a.Image){let I=new Image;I.onload=p(Qo,v,"TestLoadImage: loaded",!0,g,I),I.onerror=p(Qo,v,"TestLoadImage: error",!1,g,I),I.onabort=p(Qo,v,"TestLoadImage: abort",!1,g,I),I.ontimeout=p(Qo,v,"TestLoadImage: timeout",!1,g,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function $8(d,g){let v=new $l,I=new AbortController,L=setTimeout(()=>{I.abort(),Qo(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(j=>{clearTimeout(L),j.ok?Qo(v,"TestPingServer: ok",!0,g):Qo(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Qo(v,"TestPingServer: error",!1,g)})}function Qo(d,g,v,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(v)}catch{}}function G8(){this.g=new S8}function z8(d,g,v){let I=v||"";try{$T(d,function(L,j){let Z=L;u(L)&&(Z=V1(L)),g.push(I+j+"="+encodeURIComponent(Z))})}catch(L){throw g.push(I+"type="+encodeURIComponent("_badmap")),L}}function Kl(d){this.l=d.Ub||null,this.j=d.eb||!1}m(Kl,B1),Kl.prototype.g=function(){return new Yh(this.l,this.j)},Kl.prototype.i=function(d){return function(){return d}}({});function Yh(d,g){Nn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Yh,Nn),n=Yh.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Xl(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yl(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Xl(this)),this.g&&(this.readyState=3,Xl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;XT(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function XT(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Yl(this):Xl(this),this.readyState==3&&XT(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Yl(this))},n.Qa=function(d){this.g&&(this.response=d,Yl(this))},n.ga=function(){this.g&&Yl(this)};function Yl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Xl(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function Xl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Yh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function QT(d){let g="";return $(d,function(v,I){g+=I,g+=":",g+=v,g+=`\r
`}),g}function Y1(d,g,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=QT(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):At(d,g,v))}function kt(d){Nn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(kt,Nn);var W8=/^https?$/i,q8=["POST","PUT"];n=kt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():H1.g(),this.v=this.o?ST(this.o):ST(H1),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(j){ZT(this,j);return}if(d=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)v.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let j of I.keys())v.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(q8,g,void 0))||I||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,Z]of v)this.g.setRequestHeader(j,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tb(this),this.u=!0,this.g.send(d),this.u=!1}catch(j){ZT(this,j)}};function ZT(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,JT(d),Xh(d)}function JT(d){d.A||(d.A=!0,Wn(d,"complete"),Wn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Wn(this,"complete"),Wn(this,"abort"),Xh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xh(this,!0)),kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eb(this):this.bb())},n.bb=function(){eb(this)};function eb(d){if(d.h&&typeof s<"u"&&(!d.v[1]||eo(d)!=4||d.Z()!=2)){if(d.u&&eo(d)==4)IT(d.Ea,0,d);else if(Wn(d,"readystatechange"),eo(d)==4){d.h=!1;try{let Z=d.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var I;if(I=Z===0){var L=String(d.D).match(GT)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!W8.test(L?L.toLowerCase():"")}v=I}if(v)Wn(d,"complete"),Wn(d,"success");else{d.m=6;try{var j=2<eo(d)?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.Z()+"]",JT(d)}}finally{Xh(d)}}}}function Xh(d,g){if(d.g){tb(d);let v=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Wn(d,"ready");try{v.onreadystatechange=I}catch{}}}function tb(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function eo(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<eo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),A8(g)}};function nb(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function K8(d){let g={};d=(d.g&&2<=eo(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(D(d[I]))continue;var v=M(d[I]);let L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let j=g[L]||[];g[L]=j,j.push(v)}T(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ql(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function rb(d){this.Aa=0,this.i=[],this.j=new $l,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ql("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ql("baseRetryDelayMs",5e3,d),this.cb=Ql("retryDelaySeedMs",1e4,d),this.Wa=Ql("forwardChannelMaxRetries",2,d),this.wa=Ql("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new VT(d&&d.concurrentRequestLimit),this.Da=new G8,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rb.prototype,n.la=8,n.G=1,n.connect=function(d,g,v,I){qn(0),this.W=d,this.H=g||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=fb(this,null,this.W),Zh(this)};function X1(d){if(ib(d),d.G==3){var g=d.U++,v=Ji(d.I);if(At(v,"SID",d.K),At(v,"RID",g),At(v,"TYPE","terminate"),Zl(d,v),g=new Yo(d,d.j,g),g.L=2,g.v=Kh(Ji(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=hb(g.j,null),g.g.ea(g.v)),g.F=Date.now(),zh(g)}db(d)}function Qh(d){d.g&&(Z1(d),d.g.cancel(),d.g=null)}function ib(d){Qh(d),d.u&&(a.clearTimeout(d.u),d.u=null),Jh(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Zh(d){if(!BT(d.h)&&!d.s){d.s=!0;var g=d.Ga;Qi||mT(),Zi||(Qi(),Zi=!0),D1.add(g,d),d.B=0}}function Y8(d,g){return UT(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Hl(h(d.Ga,d,g),lb(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let L=new Yo(this,this.j,d),j=this.o;if(this.S&&(j?(j=x(j),N(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=sb(this,L,g),v=Ji(this.I),At(v,"RID",d),At(v,"CVER",22),this.D&&At(v,"X-HTTP-Session-Id",this.D),Zl(this,v),j&&(this.O?g="headers="+encodeURIComponent(String(QT(j)))+"&"+g:this.m&&Y1(v,this.m,j)),K1(this.h,L),this.Ua&&At(v,"TYPE","init"),this.P?(At(v,"$req",g),At(v,"SID","null"),L.T=!0,G1(L,v,null)):G1(L,v,g),this.G=2}}else this.G==3&&(d?ob(this,d):this.i.length==0||BT(this.h)||ob(this))};function ob(d,g){var v;g?v=g.l:v=d.U++;let I=Ji(d.I);At(I,"SID",d.K),At(I,"RID",v),At(I,"AID",d.T),Zl(d,I),d.m&&d.o&&Y1(I,d.m,d.o),v=new Yo(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=sb(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),K1(d.h,v),G1(v,I,g)}function Zl(d,g){d.H&&$(d.H,function(v,I){At(g,I,v)}),d.l&&$T({},function(v,I){At(g,I,v)})}function sb(d,g,v){v=Math.min(d.i.length,v);var I=d.l?h(d.l.Na,d.l,d):null;e:{var L=d.i;let j=-1;for(;;){let Z=["count="+v];j==-1?0<v?(j=L[0].g,Z.push("ofs="+j)):j=0:Z.push("ofs="+j);let mt=!0;for(let An=0;An<v;An++){let Ye=L[An].g,On=L[An].map;if(Ye-=j,0>Ye)j=Math.max(0,L[An].g-100),mt=!1;else try{z8(On,Z,"req"+Ye+"_")}catch{I&&I(On)}}if(mt){I=Z.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,I}function ab(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Qi||mT(),Zi||(Qi(),Zi=!0),D1.add(g,d),d.v=0}}function Q1(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Hl(h(d.Fa,d),lb(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,cb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Hl(h(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qn(10),Qh(this),cb(this))};function Z1(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function cb(d){d.g=new Yo(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Ji(d.qa);At(g,"RID","rpc"),At(g,"SID",d.K),At(g,"AID",d.T),At(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&At(g,"TO",d.ja),At(g,"TYPE","xmlhttp"),Zl(d,g),d.m&&d.o&&Y1(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Kh(Ji(g)),v.m=null,v.P=!0,kT(v,d)}n.Za=function(){this.C!=null&&(this.C=null,Qh(this),Q1(this),qn(19))};function Jh(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function ub(d,g){var v=null;if(d.g==g){Jh(d),Z1(d),d.g=null;var I=2}else if(q1(d.h,g))v=g.D,jT(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;I=Hh(),Wn(I,new NT(I,v)),Zh(d)}else ab(d);else if(L=g.s,L==3||L==0&&0<g.X||!(I==1&&Y8(d,g)||I==2&&Q1(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),L){case 1:ia(d,5);break;case 4:ia(d,10);break;case 3:ia(d,6);break;default:ia(d,2)}}}function lb(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function ia(d,g){if(d.j.info("Error code "+g),g==2){var v=h(d.fb,d),I=d.Xa;let L=!I;I=new ra(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wh(I,"https"),Kh(I),L?H8(I.toString(),v):$8(I.toString(),v)}else qn(2);d.G=0,d.l&&d.l.sa(g),db(d),ib(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),qn(2)):(this.j.info("Failed to ping google.com"),qn(1))};function db(d){if(d.G=0,d.ka=[],d.l){let g=HT(d.h);(g.length!=0||d.i.length!=0)&&(w(d.ka,g),w(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function fb(d,g,v){var I=v instanceof ra?Ji(v):new ra(v);if(I.g!="")g&&(I.g=g+"."+I.g),qh(I,I.s);else{var L=a.location;I=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var j=new ra(null);I&&Wh(j,I),g&&(j.g=g),L&&qh(j,L),v&&(j.l=v),I=j}return v=d.D,g=d.ya,v&&g&&At(I,v,g),At(I,"VER",d.la),Zl(d,I),I}function hb(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new kt(new Kl({eb:v})):new kt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pb(){}n=pb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ep(){}ep.prototype.g=function(d,g){return new vr(d,g)};function vr(d,g){Nn.call(this),this.g=new rb(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!D(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Rc(this)}m(vr,Nn),vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){X1(this.g)},vr.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=V1(d),d=v);g.i.push(new O8(g.Ya++,d)),g.G==3&&Zh(g)},vr.prototype.N=function(){this.g.l=null,delete this.j,X1(this.g),delete this.g,vr.aa.N.call(this)};function gb(d){U1.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}m(gb,U1);function mb(){j1.call(this),this.status=1}m(mb,j1);function Rc(d){this.g=d}m(Rc,pb),Rc.prototype.ua=function(){Wn(this.g,"a")},Rc.prototype.ta=function(d){Wn(this.g,new gb(d))},Rc.prototype.sa=function(d){Wn(this.g,new mb)},Rc.prototype.ra=function(){Wn(this.g,"b")},ep.prototype.createWebChannel=ep.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,qC=Po.createWebChannelTransport=function(){return new ep},WC=Po.getStatEventTarget=function(){return Hh()},zC=Po.Event=ta,L0=Po.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$h.NO_ERROR=0,$h.TIMEOUT=8,$h.HTTP_ERROR=6,Hf=Po.ErrorCode=$h,OT.COMPLETE="complete",GC=Po.EventType=OT,TT.EventType=Ul,Ul.OPEN="a",Ul.CLOSE="b",Ul.ERROR="c",Ul.MESSAGE="d",Nn.prototype.listen=Nn.prototype.K,Bu=Po.WebChannel=TT,Jq=Po.FetchXmlHttpFactory=Kl,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,$C=Po.XhrIo=kt}).apply(typeof F0<"u"?F0:typeof self<"u"?self:typeof window<"u"?window:{});var Ek="@firebase/firestore",wk="4.8.0";var En=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");var sl="11.10.0";var sc=new Bi("@firebase/firestore");function Uu(){return sc.logLevel}function se(n,...e){if(sc.logLevel<=Be.DEBUG){let t=e.map(kA);sc.debug(`Firestore (${sl}): ${n}`,...t)}}function ko(n,...e){if(sc.logLevel<=Be.ERROR){let t=e.map(kA);sc.error(`Firestore (${sl}): ${n}`,...t)}}function Bs(n,...e){if(sc.logLevel<=Be.WARN){let t=e.map(kA);sc.warn(`Firestore (${sl}): ${n}`,...t)}}function kA(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,h3(n,r,t)}function h3(n,e,t){let r=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ko(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||h3(e,i,r)}function Ae(n,e){return n}var W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var G0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ZC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(En.UNAUTHENTICATED))}shutdown(){}},JC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ex=class{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hi)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new G0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new En(e)}},tx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},nx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new tx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}},z0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},rx=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);let r=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new z0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new z0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function eK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function p3(){return new TextEncoder}var Kf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=eK(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Le(n,e){return n<e?-1:n>e?1:0}function ix(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Le(r,i);{let o=p3(),s=tK(o.encode(Ik(n,t)),o.encode(Ik(e,t)));return s!==0?s:Le(r,i)}}t+=r>65535?2:1}return Le(n.length,e.length)}function Ik(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function tK(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Le(n[t],e[t]);return Le(n.length,e.length)}function qu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ck="__name__",W0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):ix(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oo.fromString(e.substring(4,e.length-2))}},Rt=class n extends W0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},nK=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tr=class n extends W0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return nK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ck}static keyField(){return new n([Ck])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ne(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ne(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var pe=class n{constructor(e){this.path=e}static fromPath(e){return new n(Rt.fromString(e))}static fromName(e){return new n(Rt.fromString(e).popFirst(5))}static empty(){return new n(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Rt(e.slice()))}};function g3(n,e,t){if(!t)throw new ne(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rK(n,e,t,r){if(e===!0&&r===!0)throw new ne(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xk(n){if(!pe.isDocumentKey(n))throw new ne(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ak(n){if(pe.isDocumentKey(n))throw new ne(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function m3(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function br(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xv(n);throw new ne(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function on(n,e){let t={typeString:n};return e&&(t.value=e),t}function ch(n,e){if(!m3(n))throw new ne(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ne(W.INVALID_ARGUMENT,t);return!0}var Sk=-62135596800,Tk=1e6,sn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Tk);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sk)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tk}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ch(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Sk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};sn._jsonSchemaVersion="firestore/timestamp/1.0",sn._jsonSchema={type:on("string",sn._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};var Te=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new sn(0,0))}static max(){return new n(new sn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yf=-1,ox=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ox.UNKNOWN_ID=-1;function iK(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new sn(t+1,0):new sn(t,r));return new ac(i,pe.empty(),e)}function oK(n){return new ac(n.readTime,n.key,Yf)}var ac=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Te.min(),pe.empty(),Yf)}static max(){return new n(Te.max(),pe.empty(),Yf)}};function sK(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}var aK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sx=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function al(n){return E(this,null,function*(){if(n.code!==W.FAILED_PRECONDITION||n.message!==aK)throw n;se("LocalStore","Unexpectedly lost primary lease")})}var K=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function cK(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}var FA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),LA=-1;function Av(n){return n==null}function Xf(n){return n===0&&1/n==-1/0}function uK(n){return typeof n=="number"&&Number.isInteger(n)&&!Xf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var v3="";function lK(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bk(e)),e=dK(n.get(t),e);return bk(e)}function dK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case v3:t+="";break;default:t+=o}}return t}function bk(n){return n+v3+""}var fK="remoteDocuments",y3="owner";var _3="mutationQueues";var E3="mutations";var w3="documentMutations",hK="remoteDocumentsV14";var I3="remoteDocumentGlobal";var C3="targets";var x3="targetDocuments";var A3="targetGlobal",S3="collectionParents";var T3="clientMetadata";var b3="bundles";var D3="namedQueries";var pK="indexConfiguration";var gK="indexState";var mK="indexEntries";var R3="documentOverlays";var vK="globals";var yK=[_3,E3,w3,fK,C3,y3,A3,x3,T3,I3,S3,b3,D3],MIe=[...yK,R3],_K=[_3,E3,w3,hK,C3,y3,A3,x3,T3,I3,S3,b3,D3,R3],EK=_K,wK=[...EK,pK,gK,mK];var kIe=[...wK,vK];function Dk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $s(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function N3(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var jt=class n{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}},Gu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1;Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Gi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wn=class n{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q0(this.data.getIterator())}getIteratorFrom(e){return new q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},q0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Hr=class n{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new n([])}unionWith(e){let t=new wn(Tr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var K0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new K0("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jn.EMPTY_BYTE_STRING=new jn("");var IK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(n){if(it(!!n,39018),typeof n=="string"){let e=0,t=IK.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lo(n){return typeof n=="string"?jn.fromBase64String(n):jn.fromUint8Array(n)}var O3="server_timestamp",P3="__type__",M3="__previous_value__",k3="__local_write_time__";function VA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[P3])===null||t===void 0?void 0:t.stringValue)===O3}function Sv(n){let e=n.mapValue.fields[M3];return VA(e)?Sv(e):e}function Qf(n){let e=Fo(n.mapValue.fields[k3].timestampValue);return new sn(e.seconds,e.nanos)}var ax=class{constructor(e,t,r,i,o,s,a,c,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=l}},Y0="(default)",X0=class n{constructor(e,t){this.projectId=e,this.database=t||Y0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Y0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var BA="__type__",F3="__max__",V0={mapValue:{fields:{__type__:{stringValue:F3}}}},UA="__vector__",Ku="value";function Us(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?VA(n)?4:V3(n)?9007199254740991:L3(n)?10:11:me(28295,{value:n})}function qi(n,e){if(n===e)return!0;let t=Us(n);if(t!==Us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qf(n).isEqual(Qf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Fo(i.timestampValue),a=Fo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Lo(i.bytesValue).isEqual(Lo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Dt(i.geoPointValue.latitude)===Dt(o.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Dt(i.integerValue)===Dt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Dt(i.doubleValue),a=Dt(o.doubleValue);return s===a?Xf(s)===Xf(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return qu(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Dk(s)!==Dk(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!qi(s[c],a[c])))return!1;return!0}(n,e);default:return me(52216,{left:n})}}function Zf(n,e){return(n.values||[]).find(t=>qi(t,e))!==void 0}function Yu(n,e){if(n===e)return 0;let t=Us(n),r=Us(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Dt(o.integerValue||o.doubleValue),c=Dt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Rk(n.timestampValue,e.timestampValue);case 4:return Rk(Qf(n),Qf(e));case 5:return ix(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Lo(o),c=Lo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Le(a[u],c[u]);if(l!==0)return l}return Le(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Le(Dt(o.latitude),Dt(s.latitude));return a!==0?a:Le(Dt(o.longitude),Dt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Nk(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,l;let f=o.fields||{},h=s.fields||{},p=(a=f[Ku])===null||a===void 0?void 0:a.arrayValue,m=(c=h[Ku])===null||c===void 0?void 0:c.arrayValue,y=Le(((u=p?.values)===null||u===void 0?void 0:u.length)||0,((l=m?.values)===null||l===void 0?void 0:l.length)||0);return y!==0?y:Nk(p,m)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===V0.mapValue&&s===V0.mapValue)return 0;if(o===V0.mapValue)return 1;if(s===V0.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let f=0;f<c.length&&f<l.length;++f){let h=ix(c[f],l[f]);if(h!==0)return h;let p=Yu(a[c[f]],u[l[f]]);if(p!==0)return p}return Le(c.length,l.length)}(n.mapValue,e.mapValue);default:throw me(23264,{le:t})}}function Rk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);let t=Fo(n),r=Fo(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function Nk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Yu(t[i],r[i]);if(o)return o}return Le(t.length,r.length)}function Xu(n){return cx(n)}function cx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Fo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Lo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=cx(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${cx(t.fields[s])}`;return i+"}"}(n.mapValue):me(61005,{value:n})}function j0(n){switch(Us(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Sv(n);return e?16+j0(e):16;case 5:return 2*n.stringValue.length;case 6:return Lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+j0(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return $s(r.fields,(o,s)=>{i+=o.length+j0(s)}),i}(n.mapValue);default:throw me(13486,{value:n})}}function Ok(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ux(n){return!!n&&"integerValue"in n}function jA(n){return!!n&&"arrayValue"in n}function Pk(n){return!!n&&"nullValue"in n}function Mk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function H0(n){return!!n&&"mapValue"in n}function L3(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[BA])===null||t===void 0?void 0:t.stringValue)===UA}function Gf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return $s(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function V3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===F3}var LIe={mapValue:{fields:{[BA]:{stringValue:UA},[Ku]:{arrayValue:{}}}}};var Sr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!H0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gf(t)}setAll(e){let t=Tr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Gf(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());H0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];H0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$s(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Gf(this.value))}};function B3(n){let e=[];return $s(n.fields,(t,r)=>{let i=new Tr([t]);if(H0(r)){let o=B3(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Hr(e)}var pi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Te.min(),Te.min(),Te.min(),Sr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Te.min(),Te.min(),Sr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Te.min(),Te.min(),Sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qu=class{constructor(e,t){this.position=e,this.inclusive=t}};function kk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=pe.comparator(pe.fromName(s.referenceValue),t.key):r=Yu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}var Zu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function CK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Q0=class{},rn=class n extends Q0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new dx(e,t,r):t==="array-contains"?new px(e,r):t==="in"?new gx(e,r):t==="not-in"?new mx(e,r):t==="array-contains-any"?new vx(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fx(e,r):new hx(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yu(t,this.value)):t!==null&&Us(this.value)===Us(t)&&this.matchesComparison(Yu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gi=class n extends Q0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return U3(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function U3(n){return n.op==="and"}function j3(n){return xK(n)&&U3(n)}function xK(n){for(let e of n.filters)if(e instanceof gi)return!1;return!0}function lx(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Xu(n.value);if(j3(n))return n.filters.map(e=>lx(e)).join(",");{let e=n.filters.map(t=>lx(t)).join(",");return`${n.op}(${e})`}}function H3(n,e){return n instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.field.isEqual(i.field)&&qi(r.value,i.value)}(n,e):n instanceof gi?function(r,i){return i instanceof gi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&H3(s,i.filters[a]),!0):!1}(n,e):void me(19439)}function $3(n){return n instanceof rn?function(t){return`${t.field.canonicalString()} ${t.op} ${Xu(t.value)}`}(n):n instanceof gi?function(t){return t.op.toString()+" {"+t.getFilters().map($3).join(" ,")+"}"}(n):"Filter"}var dx=class extends rn{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){let t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}},fx=class extends rn{constructor(e,t){super(e,"in",t),this.keys=G3("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},hx=class extends rn{constructor(e,t){super(e,"not-in",t),this.keys=G3("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function G3(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}var px=class extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return jA(t)&&Zf(t.arrayValue,this.value)}},gx=class extends rn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Zf(this.value.arrayValue,t)}},mx=class extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zf(this.value.arrayValue,t)}},vx=class extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!jA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zf(this.value.arrayValue,r))}};var yx=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Lk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new yx(n,e,t,r,i,o,s)}function HA(n){let e=Ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Av(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xu(r)).join(",")),e.Pe=t}return e.Pe}function $A(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!CK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!H3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fk(n.startAt,e.startAt)&&Fk(n.endAt,e.endAt)}function _x(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var cc=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function AK(n,e,t,r,i,o,s,a){return new cc(n,e,t,r,i,o,s,a)}function Tv(n){return new cc(n)}function Vk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function z3(n){return n.collectionGroup!==null}function zf(n){let e=Ae(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wn(Tr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Zu(o,r))}),t.has(Tr.keyField().canonicalString())||e.Te.push(new Zu(Tr.keyField(),r))}return e.Te}function zi(n){let e=Ae(n);return e.Ie||(e.Ie=SK(e,zf(n))),e.Ie}function SK(n,e){if(n.limitType==="F")return Lk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zu(i.field,o)});let t=n.endAt?new Qu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qu(n.startAt.position,n.startAt.inclusive):null;return Lk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ex(n,e){let t=n.filters.concat([e]);return new cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wx(n,e,t){return new cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bv(n,e){return $A(zi(n),zi(e))&&n.limitType===e.limitType}function W3(n){return`${HA(zi(n))}|lt:${n.limitType}`}function ju(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$3(i)).join(", ")}]`),Av(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xu(i)).join(",")),`Target(${r})`}(zi(n))}; limitType=${n.limitType})`}function Dv(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of zf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=kk(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,zf(r),i)||r.endAt&&!function(s,a,c){let u=kk(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,zf(r),i))}(n,e)}function TK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function q3(n){return(e,t)=>{let r=!1;for(let i of zf(n)){let o=bK(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bK(n,e,t){let r=n.field.isKeyField()?pe.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Yu(c,u):me(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}var Vo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return N3(this.inner)}size(){return this.innerSize}};var DK=new jt(pe.comparator);function Bo(){return DK}var K3=new jt(pe.comparator);function $f(...n){let e=K3;for(let t of n)e=e.insert(t.key,t);return e}function Y3(n){let e=K3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function tc(){return Wf()}function X3(){return Wf()}function Wf(){return new Vo(n=>n.toString(),(n,e)=>n.isEqual(e))}var RK=new jt(pe.comparator),NK=new wn(pe.comparator);function He(...n){let e=NK;for(let t of n)e=e.add(t);return e}var OK=new wn(Le);function PK(){return OK}function GA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function Q3(n){return{integerValue:""+n}}function MK(n,e){return uK(e)?Q3(e):GA(n,e)}var Ju=class{constructor(){this._=void 0}};function kK(n,e,t){return n instanceof el?function(i,o){let s={fields:{[P3]:{stringValue:O3},[k3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&VA(o)&&(o=Sv(o)),o&&(s.fields[M3]=o),{mapValue:s}}(t,e):n instanceof uc?J3(n,e):n instanceof lc?e4(n,e):function(i,o){let s=Z3(i,o),a=Bk(s)+Bk(i.Ee);return ux(s)&&ux(i.Ee)?Q3(a):GA(i.serializer,a)}(n,e)}function FK(n,e,t){return n instanceof uc?J3(n,e):n instanceof lc?e4(n,e):t}function Z3(n,e){return n instanceof tl?function(r){return ux(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var el=class extends Ju{},uc=class extends Ju{constructor(e){super(),this.elements=e}};function J3(n,e){let t=t4(e);for(let r of n.elements)t.some(i=>qi(i,r))||t.push(r);return{arrayValue:{values:t}}}var lc=class extends Ju{constructor(e){super(),this.elements=e}};function e4(n,e){let t=t4(e);for(let r of n.elements)t=t.filter(i=>!qi(i,r));return{arrayValue:{values:t}}}var tl=class extends Ju{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Bk(n){return Dt(n.integerValue||n.doubleValue)}function t4(n){return jA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function LK(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof uc&&i instanceof uc||r instanceof lc&&i instanceof lc?qu(r.elements,i.elements,qi):r instanceof tl&&i instanceof tl?qi(r.Ee,i.Ee):r instanceof el&&i instanceof el}(n.transform,e.transform)}var Ix=class{constructor(e,t){this.version=e,this.transformResults=t}},Mo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var nl=class{};function n4(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Z0(n.key,Mo.none()):new dc(n.key,n.data,Mo.none());{let t=n.data,r=Sr.empty(),i=new wn(Tr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ki(n.key,r,new Hr(i.toArray()),Mo.none())}}function VK(n,e,t){n instanceof dc?function(i,o,s){let a=i.value.clone(),c=jk(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ki?function(i,o,s){if(!$0(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jk(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(r4(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function qf(n,e,t,r){return n instanceof dc?function(o,s,a,c){if(!$0(o.precondition,s))return a;let u=o.value.clone(),l=Hk(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ki?function(o,s,a,c){if(!$0(o.precondition,s))return a;let u=Hk(o.fieldTransforms,c,s),l=s.data;return l.setAll(r4(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return $0(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function BK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Z3(r.transform,i||null);o!=null&&(t===null&&(t=Sr.empty()),t.set(r.field,o))}return t||null}function Uk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qu(r,i,(o,s)=>LK(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var dc=class extends nl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ki=class extends nl{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function r4(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jk(n,e,t){let r=new Map;it(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,FK(s,a,t[i]))}return r}function Hk(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,kK(o,s,e))}return r}var Z0=class extends nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cx=class extends nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xx=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&VK(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=qf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=qf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=X3();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=n4(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&qu(this.mutations,e.mutations,(t,r)=>Uk(t,r))&&qu(this.baseMutations,e.baseMutations,(t,r)=>Uk(t,r))}},Ax=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return RK}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Sx=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tx=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tn,qe;function UK(n){switch(n){case W.OK:return me(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function i4(n){if(n===void 0)return ko("GRPC error has no .code"),W.UNKNOWN;switch(n){case tn.OK:return W.OK;case tn.CANCELLED:return W.CANCELLED;case tn.UNKNOWN:return W.UNKNOWN;case tn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case tn.INTERNAL:return W.INTERNAL;case tn.UNAVAILABLE:return W.UNAVAILABLE;case tn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case tn.NOT_FOUND:return W.NOT_FOUND;case tn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case tn.ABORTED:return W.ABORTED;case tn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case tn.DATA_LOSS:return W.DATA_LOSS;default:return me(39323,{code:n})}}(qe=tn||(tn={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";var $k=null;var jK=new Oo([4294967295,4294967295],0);function Gk(n){let e=p3().encode(n),t=new HC;return t.update(e),new Uint8Array(t.digest())}function zk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Oo([t,r],0),new Oo([i,o],0)]}var bx=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nc(`Invalid padding: ${t}`);if(r<0)throw new nc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Oo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Oo.fromNumber(r)));return i.compare(jK)===1&&(i=new Oo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Gk(e),[r,i]=zk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=Gk(e),[r,i]=zk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},nc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var J0=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Jf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Te.min(),i,new jt(Le),Bo(),He())}},Jf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,He(),He(),He())}};var zu=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},ev=class{constructor(e,t){this.targetId=e,this.De=t}},tv=class{constructor(e,t,r=jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},nv=class{constructor(){this.ve=0,this.Ce=Wk(),this.Fe=jn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=He(),t=He(),r=He();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:o})}}),new Jf(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Wk()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Dx=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Bo(),this.je=B0(),this.Je=B0(),this.He=new jt(Le)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(_x(o))if(r===0){let s=new pe(o.path);this.Xe(t,s,pi.newNoDocument(s,Te.min()))}else it(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}$k?.ct(function(l,f,h,p,m){var y,w,S,D,P,F;let H={localCacheCount:l,existenceFilterCount:f.count,databaseId:h.database,projectId:h.projectId},$=f.unchangedNames;return $&&(H.bloomFilter={applied:m===0,hashCount:(y=$?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(D=(S=(w=$?.bits)===null||w===void 0?void 0:w.bitmap)===null||S===void 0?void 0:S.length)!==null&&D!==void 0?D:0,padding:(F=(P=$?.bits)===null||P===void 0?void 0:P.padding)!==null&&F!==void 0?F:0,mightContain:T=>{var x;return(x=p?.mightContain(T))!==null&&x!==void 0&&x}}),H}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Lo(r).toUint8Array()}catch(c){if(c instanceof K0)return Bs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new bx(s,i,o)}catch(c){return Bs(c instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&_x(a.target)){let c=new pe(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,pi.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=He();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new J0(e,t,this.He,this.ze,r);return this.ze=Bo(),this.je=B0(),this.Je=B0(),this.He=new jt(Le),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new nv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new wn(Le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new wn(Le),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new nv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function B0(){return new jt(pe.comparator)}function Wk(){return new jt(pe.comparator)}var HK={asc:"ASCENDING",desc:"DESCENDING"},$K={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GK={and:"AND",or:"OR"},Rx=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Nx(n,e){return n.useProto3Json||Av(e)?e:{value:e}}function rv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zK(n,e){return rv(n,e.toTimestamp())}function Wi(n){return it(!!n,49232),Te.fromTimestamp(function(t){let r=Fo(t);return new sn(r.seconds,r.nanos)}(n))}function zA(n,e){return Ox(n,e).canonicalString()}function Ox(n,e){let t=function(i){return new Rt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function s4(n){let e=Rt.fromString(n);return it(d4(e),10190,{key:e.toString()}),e}function Px(n,e){return zA(n.databaseId,e.path)}function KC(n,e){let t=s4(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(c4(t))}function a4(n,e){return zA(n.databaseId,e)}function WK(n){let e=s4(n);return e.length===4?Rt.emptyPath():c4(e)}function Mx(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function c4(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qk(n,e,t){return{name:Px(n,e),fields:t.value.mapValue.fields}}function qK(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(it(l===void 0||typeof l=="string",58123),jn.fromBase64String(l||"")):(it(l===void 0||l instanceof Buffer||l instanceof Uint8Array,16193),jn.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?W.UNKNOWN:i4(u.code);return new ne(l,u.message||"")}(s);t=new tv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=KC(n,r.document.name),o=Wi(r.document.updateTime),s=r.document.createTime?Wi(r.document.createTime):Te.min(),a=new Sr({mapValue:{fields:r.document.fields}}),c=pi.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];t=new zu(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=KC(n,r.document),o=r.readTime?Wi(r.readTime):Te.min(),s=pi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new zu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=KC(n,r.document),o=r.removedTargetIds||[];t=new zu([],o,i,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Tx(i,o),a=r.targetId;t=new ev(a,s)}}return t}function KK(n,e){let t;if(e instanceof dc)t={update:qk(n,e.key,e.value)};else if(e instanceof Z0)t={delete:Px(n,e.key)};else if(e instanceof Ki)t={update:qk(n,e.key,e.data),updateMask:rY(e.fieldMask)};else{if(!(e instanceof Cx))return me(16599,{Rt:e.type});t={verify:Px(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof el)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof tl)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw me(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:zK(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(n,e.precondition)),t}function YK(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Wi(i.updateTime):Wi(o);return s.isEqual(Te.min())&&(s=Wi(o)),new Ix(s,i.transformResults||[])}(t,e))):[]}function XK(n,e){return{documents:[a4(n,e.path)]}}function QK(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=a4(n,i);let o=function(u){if(u.length!==0)return l4(gi.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:Hu(h.field),direction:eY(h.dir)}}(l))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Nx(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:i}}function ZK(n){let e=WK(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1,65062);let l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(f){let h=u4(f);return h instanceof gi&&j3(h)?h.getFilters():[h]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(h=>function(m){return new Zu($u(m.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,Av(h)?null:h}(t.limit));let c=null;t.startAt&&(c=function(f){let h=!!f.before,p=f.values||[];return new Qu(p,h)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let h=!f.before,p=f.values||[];return new Qu(p,h)}(t.endAt)),AK(e,i,s,o,a,"F",c,u)}function JK(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u4(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=$u(t.unaryFilter.field);return rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$u(t.unaryFilter.field);return rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=$u(t.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=$u(t.unaryFilter.field);return rn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(n):n.fieldFilter!==void 0?function(t){return rn.create($u(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gi.create(t.compositeFilter.filters.map(r=>u4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(t.compositeFilter.op))}(n):me(30097,{filter:n})}function eY(n){return HK[n]}function tY(n){return $K[n]}function nY(n){return GK[n]}function Hu(n){return{fieldPath:n.canonicalString()}}function $u(n){return Tr.fromServerFormat(n.fieldPath)}function l4(n){return n instanceof rn?function(t){if(t.op==="=="){if(Mk(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NAN"}};if(Pk(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Mk(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NOT_NAN"}};if(Pk(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hu(t.field),op:tY(t.op),value:t.value}}}(n):n instanceof gi?function(t){let r=t.getFilters().map(i=>l4(i));return r.length===1?r[0]:{compositeFilter:{op:nY(t.op),filters:r}}}(n):me(54877,{filter:n})}function rY(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function d4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var eh=class n{constructor(e,t,r,i,o=Te.min(),s=Te.min(),a=jn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var kx=class{constructor(e){this.gt=e}};function iY(n){let e=ZK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?wx(e,e.limit,"L"):e}var iv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Dt(e.integerValue));else if("doubleValue"in e){let r=Dt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Xf(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Fo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Lo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?V3(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):L3(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):me(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ku,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Dt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),pe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};iv.Ut=new iv;var Fx=class{constructor(){this.Dn=new Lx}addToCollectionParentIndex(e,t){return this.Dn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ac.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ac.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}},Lx=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(Rt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(Rt.comparator)).toArray()}};var VIe=new Uint8Array(0);var Kk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f4=41943040,jr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(f4,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);var th=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Yk="LruGarbageCollector",oY=1048576;function Xk([n,e],[t,r]){let i=Le(n,t);return i===0?Le(e,r):i}var Vx=class{constructor(e){this.Tr=e,this.buffer=new wn(Xk),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Xk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Bx=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(Yk,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?se(Yk,"Ignoring IndexedDB error during garbage collection: ",t):yield al(t)}yield this.Rr(3e5)}))}},Ux=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(FA.ue);let r=new Vx(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Kk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kk):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Uu()<=Be.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function sY(n,e){return new Ux(n,e)}var jx=class{constructor(){this.changes=new Vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Hx=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var $x=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&qf(r.mutation,i,Hr.empty(),sn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,t,r=He()){let i=tc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=$f();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=tc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,He()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Bo(),s=Wf(),a=function(){return Wf()}();return t.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Ki)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),qf(l.mutation,u,l.mutation.getFieldMask(),sn.now())):s.set(u.key,Hr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),t.forEach((u,l)=>{var f;return a.set(u,new Hx(l,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Wf(),i=new jt((s,a)=>s-a),o=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let l=r.get(c)||Hr.empty();l=a.applyToLocalView(u,l),r.set(c,l);let f=(i.get(a.batchId)||He()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,f=X3();l.forEach(h=>{if(!o.has(h)){let p=n4(t.get(h),r.get(h));p!==null&&f.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return K.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):z3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):K.resolve(tc()),a=Yf,c=o;return s.next(u=>K.forEach(u,(l,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(l)?K.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,He())).next(l=>({batchId:a,changes:Y3(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=$f();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=$f();return this.indexManager.getCollectionParents(e,o).next(a=>K.forEach(a,c=>{let u=function(f,h){return new cc(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,pi.newInvalidDocument(l)))});let a=$f();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&qf(l.mutation,u,Hr.empty(),sn.now()),Dv(t,u)&&(a=a.insert(c,u))}),a})}};var Gx=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return K.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Wi(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:iY(i.bundledQuery),readTime:Wi(i.readTime)}}(t)),K.resolve()}};var zx=class{constructor(){this.overlays=new jt(pe.comparator),this.kr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){let r=tc();return K.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),K.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){let i=tc(),o=t.length+1,s=new pe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new jt((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=tc(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=tc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return K.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sx(t,r));let o=this.kr.get(t);o===void 0&&(o=He(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Wx=class{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}};var nh=class{constructor(){this.qr=new wn(nn.Qr),this.$r=new wn(nn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new nn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new nn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new pe(new Rt([])),r=new nn(t,e),i=new nn(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new pe(new Rt([])),r=new nn(t,e),i=new nn(t,e+1),o=He();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new nn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},nn=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pe.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}};var qx=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new wn(nn.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new xx(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new nn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(s)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?LA:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new nn(t,0),i=new nn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Le);return t.forEach(i=>{let o=new nn(i,0),s=new nn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),K.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;pe.isDocumentKey(o)||(o=o.child(""));let s=new nn(new pe(o),0),a=new wn(Le);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),K.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return K.forEach(t.mutations,i=>{let o=new nn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new nn(t,0),i=this.Yr.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Kx=class{constructor(e){this.ni=e,this.docs=function(){return new jt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let r=Bo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pi.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Bo(),s=t.path,a=new pe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||sK(oK(l),r)<=0||(i.has(l.key)||Dv(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,r,i){me(9500)}ri(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Yx(this)}getSize(e){return K.resolve(this.size)}},Yx=class extends jx{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Xx=class{constructor(e){this.persistence=e,this.ii=new Vo(t=>HA(t),$A),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new nh,this.targetCount=0,this._i=th.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),K.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new th(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.hr(t),K.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(o).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),K.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.oi.containsKey(t))}};var ov=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new FA(0),this.ci=!1,this.ci=!0,this.li=new Wx,this.referenceDelegate=e(this),this.hi=new Xx(this),this.indexManager=new Fx,this.remoteDocumentCache=function(i){return new Kx(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new kx(t),this.Ti=new Gx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new qx(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new Qx(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return K.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Qx=class extends sx{constructor(e){super(),this.currentSequenceNumber=e}},Zx=class n{constructor(e){this.persistence=e,this.Ai=new nh,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,r=>{let i=pe.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Te.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return K.or([()=>K.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},sv=class n{constructor(e,t){this.persistence=e,this.gi=new Vo(r=>lK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=sY(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return K.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?K.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=j0(e.data.value)),t}Sr(e,t,r){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Jx=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=He(),i=He();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var eA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var tA=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return nP()?8:cK(_n())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new eA;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Uu()<=Be.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",ju(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(Uu()<=Be.DEBUG&&se("QueryEngine","Query:",ju(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Uu()<=Be.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",ju(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):K.resolve())}ps(e,t){if(Vk(t))return K.resolve(null);let r=zi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=wx(t,null,"F"),r=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=He(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,wx(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return Vk(t)||i.isEqual(Te.min())?K.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?K.resolve(null):(Uu()<=Be.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ju(t)),this.vs(e,s,t,iK(i,Yf)).next(a=>a))})}bs(e,t){let r=new wn(q3(e));return t.forEach((i,o)=>{Dv(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Uu()<=Be.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",ju(t)),this.gs.getDocumentsMatchingQuery(e,t,ac.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var WA="LocalStore",aY=3e8,nA=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new jt(Le),this.Ms=new Vo(o=>HA(o),$A),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $x(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function cY(n,e,t,r){return new nA(n,e,t,r)}function h4(n,e){return E(this,null,function*(){let t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=He();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function uY(n,e){let t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let f=u.batch,h=f.keys(),p=K.resolve();return h.forEach(m=>{p=p.next(()=>l.getEntry(c,m)).next(y=>{let w=u.docVersions.get(m);it(w!==null,48541),y.version.compareTo(w)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=He();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function p4(n){let e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function lY(n,e){let t=Ae(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((l,f)=>{let h=i.get(f);if(!h)return;a.push(t.hi.removeMatchingKeys(o,l.removedDocuments,f).next(()=>t.hi.addMatchingKeys(o,l.addedDocuments,f)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(jn.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(f,p),function(y,w,S){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=aY?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(h,p,l)&&a.push(t.hi.updateTargetData(o,p))});let c=Bo(),u=He();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(dY(o,s,e.documentUpdates).next(l=>{c=l.Ls,u=l.ks})),!r.isEqual(Te.min())){let l=t.hi.getLastRemoteSnapshotVersion(o).next(f=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return K.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function dY(n,e,t){let r=He(),i=He();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Bo();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Te.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):se(WA,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function fY(n,e){let t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=LA),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hY(n,e){let t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,K.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new eh(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function rA(n,e,t){return E(this,null,function*(){let r=Ae(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!cl(s))throw s;se(WA,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Qk(n,e,t){let r=Ae(n),i=Te.min(),o=He();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let f=Ae(c),h=f.Ms.get(l);return h!==void 0?K.resolve(f.Fs.get(h)):f.hi.getTargetData(u,l)}(r,s,zi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Te.min(),t?o:He())).next(a=>(pY(r,TK(e),a),{documents:a,qs:o})))}function pY(n,e,t){let r=n.xs.get(e)||Te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var av=class{constructor(){this.activeTargetIds=PK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var iA=class{constructor(){this.Fo=new av,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new av,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var oA=class{xo(e){}shutdown(){}};var Zk="ConnectivityMonitor",cv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(Zk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){se(Zk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var U0=null;function sA(){return U0===null?U0=function(){return 268435456+Math.round(2147483648*Math.random())}():U0++,"0x"+U0.toString(16)}var YC="RestConnection",gY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},aA=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Y0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=sA(),a=this.Go(e,t.toUriEncodedString());se(YC,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),l=xs(u);return this.jo(e,a,c,r,l).then(f=>(se(YC,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Bs(YC,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=gY[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var cA=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Un="WebChannelConnection",uA=class extends aA{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=sA();return new Promise((a,c)=>{let u=new $C;u.setWithCredentials(!0),u.listenOnce(GC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hf.NO_ERROR:let f=u.getResponseJson();se(Un,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Hf.TIMEOUT:se(Un,`RPC '${e}' ${s} timed out`),c(new ne(W.DEADLINE_EXCEEDED,"Request time out"));break;case Hf.HTTP_ERROR:let h=u.getStatus();if(se(Un,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);let m=p?.error;if(m&&m.status&&m.message){let y=function(S){let D=S.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(D)>=0?D:W.UNKNOWN}(m.status);c(new ne(y,m.message))}else c(new ne(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ne(W.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{se(Un,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);se(Un,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}P_(e,t,r){let i=sA(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qC(),a=WC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let l=o.join("");se(Un,`Creating RPC '${e}' stream ${i}: ${l}`,c);let f=s.createWebChannel(l,c);this.T_(f);let h=!1,p=!1,m=new cA({Ho:w=>{p?se(Un,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(h||(se(Un,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),se(Un,`RPC '${e}' stream ${i} sending:`,w),f.send(w))},Yo:()=>f.close()}),y=(w,S,D)=>{w.listen(S,P=>{try{D(P)}catch(F){setTimeout(()=>{throw F},0)}})};return y(f,Bu.EventType.OPEN,()=>{p||(se(Un,`RPC '${e}' stream ${i} transport opened.`),m.s_())}),y(f,Bu.EventType.CLOSE,()=>{p||(p=!0,se(Un,`RPC '${e}' stream ${i} transport closed`),m.__(),this.I_(f))}),y(f,Bu.EventType.ERROR,w=>{p||(p=!0,Bs(Un,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),m.__(new ne(W.UNAVAILABLE,"The operation could not be completed")))}),y(f,Bu.EventType.MESSAGE,w=>{var S;if(!p){let D=w.data[0];it(!!D,16349);let P=D,F=P?.error||((S=P[0])===null||S===void 0?void 0:S.error);if(F){se(Un,`RPC '${e}' stream ${i} received error:`,F);let H=F.status,$=function(b){let N=tn[b];if(N!==void 0)return i4(N)}(H),T=F.message;$===void 0&&($=W.INTERNAL,T="Unknown error status: "+H+" with message "+F.message),p=!0,m.__(new ne($,T)),f.close()}else se(Un,`RPC '${e}' stream ${i} received:`,D),m.a_(D)}}),y(a,zC.STAT_EVENT,w=>{w.stat===L0.PROXY?se(Un,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===L0.NOPROXY&&se(Un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.o_()},0),m}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function XC(){return typeof document<"u"?document:null}function Rv(n){return new Rx(n,!0)}var uv=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Jk="PersistentStream",lv=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new uv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return E(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return E(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return E(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(ko(t.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ne(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>E(this,null,function*(){this.state=0,this.start()}))}G_(e){return se(Jk,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(se(Jk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lA=class extends lv{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=qK(this.serializer,e),r=function(o){if(!("targetChange"in o))return Te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Te.min():s.readTime?Wi(s.readTime):Te.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Mx(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=_x(c)?{documents:XK(o,c)}:{query:QK(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=o4(o,s.resumeToken);let u=Nx(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Te.min())>0){a.readTime=rv(o,s.snapshotVersion.toTimestamp());let u=Nx(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=JK(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Mx(this.serializer),t.removeTarget=e,this.k_(t)}},dA=class extends lv{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=YK(e.writeResults,e.commitTime),r=Wi(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Mx(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>KK(this.serializer,r))};this.k_(t)}};var fA=class{},hA=class extends fA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Ox(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(W.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Ox(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(W.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},pA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ko(t),this._a=!1):se("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var fc="RemoteStore",gA=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>E(this,null,function*(){pc(this)&&(se(fc,"Restarting streams for network reachability change."),yield function(c){return E(this,null,function*(){let u=Ae(c);u.Ia.add(4),yield uh(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield Nv(u)})}(this))}))}),this.Aa=new pA(r,i)}};function Nv(n){return E(this,null,function*(){if(pc(n))for(let e of n.da)yield e(!0)})}function uh(n){return E(this,null,function*(){for(let e of n.da)yield e(!1)})}function g4(n,e){let t=Ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),XA(t)?YA(t):ul(t).x_()&&KA(t,e))}function qA(n,e){let t=Ae(n),r=ul(t);t.Ta.delete(e),r.x_()&&m4(t,e),t.Ta.size===0&&(r.x_()?r.B_():pc(t)&&t.Aa.set("Unknown"))}function KA(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(n).H_(e)}function m4(n,e){n.Ra.$e(e),ul(n).Y_(e)}function YA(n){n.Ra=new Dx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ul(n).start(),n.Aa.aa()}function XA(n){return pc(n)&&!ul(n).M_()&&n.Ta.size>0}function pc(n){return Ae(n).Ia.size===0}function v4(n){n.Ra=void 0}function mY(n){return E(this,null,function*(){n.Aa.set("Online")})}function vY(n){return E(this,null,function*(){n.Ta.forEach((e,t)=>{KA(n,e)})})}function yY(n,e){return E(this,null,function*(){v4(n),XA(n)?(n.Aa.la(e),YA(n)):n.Aa.set("Unknown")})}function _Y(n,e,t){return E(this,null,function*(){if(n.Aa.set("Online"),e instanceof tv&&e.state===2&&e.cause)try{yield function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){se(fc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dv(n,r)}else if(e instanceof zu?n.Ra.Ye(e):e instanceof ev?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Te.min()))try{let r=yield p4(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.Ta.get(u);l&&o.Ta.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.Ta.get(c);if(!l)return;o.Ta.set(c,l.withResumeToken(jn.EMPTY_BYTE_STRING,l.snapshotVersion)),m4(o,c);let f=new eh(l.target,c,u,l.sequenceNumber);KA(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){se(fc,"Failed to raise snapshot:",r),yield dv(n,r)}})}function dv(n,e,t){return E(this,null,function*(){if(!cl(e))throw e;n.Ia.add(1),yield uh(n),n.Aa.set("Offline"),t||(t=()=>p4(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){se(fc,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Nv(n)}))})}function y4(n,e){return e().catch(t=>dv(n,t,e))}function Ov(n){return E(this,null,function*(){let e=Ae(n),t=js(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:LA;for(;EY(e);)try{let i=yield fY(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,wY(e,i)}catch(i){yield dv(e,i)}_4(e)&&E4(e)})}function EY(n){return pc(n)&&n.Pa.length<10}function wY(n,e){n.Pa.push(e);let t=js(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function _4(n){return pc(n)&&!js(n).M_()&&n.Pa.length>0}function E4(n){js(n).start()}function IY(n){return E(this,null,function*(){js(n).na()})}function CY(n){return E(this,null,function*(){let e=js(n);for(let t of n.Pa)e.X_(t.mutations)})}function xY(n,e,t){return E(this,null,function*(){let r=n.Pa.shift(),i=Ax.from(r,e,t);yield y4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ov(n)})}function AY(n,e){return E(this,null,function*(){e&&js(n).Z_&&(yield function(r,i){return E(this,null,function*(){if(function(s){return UK(s)&&s!==W.ABORTED}(i.code)){let o=r.Pa.shift();js(r).N_(),yield y4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ov(r)}})}(n,e)),_4(n)&&E4(n)})}function e3(n,e){return E(this,null,function*(){let t=Ae(n);t.asyncQueue.verifyOperationInProgress(),se(fc,"RemoteStore received new credentials");let r=pc(t);t.Ia.add(3),yield uh(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Nv(t)})}function SY(n,e){return E(this,null,function*(){let t=Ae(n);e?(t.Ia.delete(2),yield Nv(t)):e||(t.Ia.add(2),yield uh(t),t.Aa.set("Unknown"))})}function ul(n){return n.Va||(n.Va=function(t,r,i){let o=Ae(t);return o.ia(),new lA(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:mY.bind(null,n),e_:vY.bind(null,n),n_:yY.bind(null,n),J_:_Y.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.Va.N_(),XA(n)?YA(n):n.Aa.set("Unknown")):(yield n.Va.stop(),v4(n))}))),n.Va}function js(n){return n.ma||(n.ma=function(t,r,i){let o=Ae(t);return o.ia(),new dA(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:IY.bind(null,n),n_:AY.bind(null,n),ea:CY.bind(null,n),ta:xY.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.ma.N_(),yield Ov(n)):(yield n.ma.stop(),n.Pa.length>0&&(se(fc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var mA=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function QA(n,e){if(ko("AsyncQueue",`${e}: ${n}`),cl(n))return new ne(W.UNAVAILABLE,`${e}: ${n}`);throw n}var fv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=$f(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var hv=class{constructor(){this.fa=new jt(pe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},rl=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,fv.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vA=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},yA=class{constructor(){this.queries=t3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Ae(t),o=i.queries;i.queries=t3(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ne(W.ABORTED,"Firestore shutting down"))}};function t3(){return new Vo(n=>W3(n),bv)}function ZA(n,e){return E(this,null,function*(){let t=Ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new vA,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=QA(s,`Initialization of query '${ju(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&eS(t)})}function JA(n,e){return E(this,null,function*(){let t=Ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function TY(n,e){let t=Ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&eS(t)}function bY(n,e,t){let r=Ae(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function eS(n){n.Da.forEach(e=>{e.next()})}var _A,n3;(n3=_A||(_A={})).Fa="default",n3.Cache="cache";var rh=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==_A.Cache}};var pv=class{constructor(e){this.key=e}},gv=class{constructor(e){this.key=e}},EA=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=He(),this.mutatedKeys=He(),this.Xa=q3(e),this.eu=new fv(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new hv,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,f)=>{let h=i.get(l),p=Dv(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),w=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(r.track({type:3,doc:p}),w=!0):this.iu(h,p)||(r.track({type:2,doc:p}),w=!0,(c&&this.Xa(p,c)>0||u&&this.Xa(p,u)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),w=!0):h&&!p&&(r.track({type:1,doc:h}),w=!0,(c||u)&&(a=!0)),w&&(p?(s=s.add(p),o=y?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((l,f)=>function(p,m){let y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:w})}};return y(p)-y(m)}(l.type,f.type)||this.Xa(l.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new rl(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new hv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=He(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new gv(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new pv(r))}),t}uu(e){this.Ha=e.qs,this.Za=He();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return rl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},tS="SyncEngine",wA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},IA=class{constructor(e){this.key=e,this.lu=!1}},CA=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Vo(a=>W3(a),bv),this.Tu=new Map,this.Iu=new Set,this.du=new jt(pe.comparator),this.Eu=new Map,this.Au=new nh,this.Ru={},this.Vu=new Map,this.mu=th.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function DY(n,e,t=!0){return E(this,null,function*(){let r=S4(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield w4(r,e,t,!0),i})}function RY(n,e){return E(this,null,function*(){let t=S4(n);yield w4(t,e,!0,!1)})}function w4(n,e,t,r){return E(this,null,function*(){let i=yield hY(n.localStore,zi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield NY(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&g4(n.remoteStore,i),a})}function NY(n,e,t,r,i){return E(this,null,function*(){n.gu=(f,h,p)=>function(y,w,S,D){return E(this,null,function*(){let P=w.view.nu(S);P.Ds&&(P=yield Qk(y.localStore,w.query,!1).then(({documents:T})=>w.view.nu(T,P)));let F=D&&D.targetChanges.get(w.targetId),H=D&&D.targetMismatches.get(w.targetId)!=null,$=w.view.applyChanges(P,y.isPrimaryClient,F,H);return i3(y,w.targetId,$._u),$.snapshot})}(n,f,h,p);let o=yield Qk(n.localStore,e,!0),s=new EA(e,o.qs),a=s.nu(o.documents),c=Jf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);i3(n,t,u._u);let l=new wA(e,t,s);return n.Pu.set(e,l),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function OY(n,e,t){return E(this,null,function*(){let r=Ae(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!bv(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield rA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qA(r.remoteStore,i.targetId),xA(r,i.targetId)}).catch(al))):(xA(r,i.targetId),yield rA(r.localStore,i.targetId,!0))})}function PY(n,e){return E(this,null,function*(){let t=Ae(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qA(t.remoteStore,r.targetId))})}function MY(n,e,t){return E(this,null,function*(){let r=jY(n);try{let i=yield function(s,a){let c=Ae(s),u=sn.now(),l=a.reduce((p,m)=>p.add(m.key),He()),f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Bo(),y=He();return c.Os.getEntries(p,l).next(w=>{m=w,m.forEach((S,D)=>{D.isValidDocument()||(y=y.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,m)).next(w=>{f=w;let S=[];for(let D of a){let P=BK(D,f.get(D.key).overlayedDocument);P!=null&&S.push(new Ki(D.key,P,B3(P.value.mapValue),Mo.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,S,a)}).next(w=>{h=w;let S=w.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(p,w.batchId,S)})}).then(()=>({batchId:h.batchId,changes:Y3(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new jt(Le)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,t),yield lh(r,i.changes),yield Ov(r.remoteStore)}catch(i){let o=QA(i,"Failed to persist write");t.reject(o)}})}function I4(n,e){return E(this,null,function*(){let t=Ae(n);try{let r=yield lY(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?it(s.lu,14607):i.removedDocuments.size>0&&(it(s.lu,42227),s.lu=!1))}),yield lh(t,r,e)}catch(r){yield al(r)}})}function r3(n,e,t){let r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ae(s);c.onlineState=a;let u=!1;c.queries.forEach((l,f)=>{for(let h of f.wa)h.va(a)&&(u=!0)}),u&&eS(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kY(n,e,t){return E(this,null,function*(){let r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new jt(pe.comparator);s=s.insert(o,pi.newNoDocument(o,Te.min()));let a=He().add(o),c=new J0(Te.min(),new Map,new jt(Le),s,a);yield I4(r,c),r.du=r.du.remove(o),r.Eu.delete(e),nS(r)}else yield rA(r.localStore,e,!1).then(()=>xA(r,e,t)).catch(al)})}function FY(n,e){return E(this,null,function*(){let t=Ae(n),r=e.batch.batchId;try{let i=yield uY(t.localStore,e);x4(t,r,null),C4(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lh(t,i)}catch(i){yield al(i)}})}function LY(n,e,t){return E(this,null,function*(){let r=Ae(n);try{let i=yield function(s,a){let c=Ae(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(it(f!==null,37113),l=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);x4(r,e,t),C4(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lh(r,i)}catch(i){yield al(i)}})}function C4(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function x4(n,e,t){let r=Ae(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function xA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||A4(n,r)})}function A4(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(qA(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),nS(n))}function i3(n,e,t){for(let r of t)r instanceof pv?(n.Au.addReference(r.key,e),VY(n,r)):r instanceof gv?(se(tS,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||A4(n,r.key)):me(19791,{yu:r})}function VY(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(se(tS,"New document in limbo: "+t),n.Iu.add(r),nS(n))}function nS(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new pe(Rt.fromString(e)),r=n.mu.next();n.Eu.set(r,new IA(t)),n.du=n.du.insert(t,r),g4(n.remoteStore,new eh(zi(Tv(t.path)),r,"TargetPurposeLimboResolution",FA.ue))}}function lh(n,e,t){return E(this,null,function*(){let r=Ae(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(l=t?.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=Jx.Es(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,u){return E(this,null,function*(){let l=Ae(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(u,h=>K.forEach(h.Is,p=>l.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>K.forEach(h.ds,p=>l.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!cl(f))throw f;se(WA,"Failed to update sequence numbers: "+f)}for(let f of u){let h=f.targetId;if(!f.fromCache){let p=l.Fs.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);l.Fs=l.Fs.insert(h,y)}}})}(r.localStore,o))})}function BY(n,e){return E(this,null,function*(){let t=Ae(n);if(!t.currentUser.isEqual(e)){se(tS,"User change. New user:",e.toKey());let r=yield h4(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ne(W.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lh(t,r.Bs)}})}function UY(n,e){let t=Ae(n),r=t.Eu.get(e);if(r&&r.lu)return He().add(r.key);{let i=He(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function S4(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=I4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kY.bind(null,e),e.hu.J_=TY.bind(null,e.eventManager),e.hu.pu=bY.bind(null,e.eventManager),e}function jY(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LY.bind(null,e),e}var T4=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=Rv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return cY(this.persistence,new tA,t.initialUser,this.serializer)}Du(t){return new ov(Zx.Vi,this.serializer)}bu(t){return new iA}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),AA=class extends T4{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){it(this.persistence.referenceDelegate instanceof sv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Bx(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new ov(r=>sv.Vi(r,t),this.serializer)}};var HY=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>r3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BY.bind(null,this.syncEngine),yield SY(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new yA}()}createDatastore(t){let r=Rv(t.databaseInfo.databaseId),i=function(s){return new uA(s)}(t.databaseInfo);return function(s,a,c,u){return new hA(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new gA(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>r3(this.syncEngine,r,0),function(){return cv.C()?new cv:new oA}())}createSyncEngine(t,r){return function(o,s,a,c,u,l,f){let h=new CA(o,s,a,c,u,l);return f&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(o){return E(this,null,function*(){let s=Ae(o);se(fc,"RemoteStore shutting down."),s.Ia.add(5),yield uh(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ih=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Hs="FirestoreClient",SA=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=Kf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){se(Hs,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(se(Hs,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=QA(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function QC(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),se(Hs,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield h4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Bs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Bs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function o3(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield $Y(n);se(Hs,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>e3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>e3(e.remoteStore,i)),n._onlineComponents=e})}function $Y(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(Hs,"Using user provided OfflineComponentProvider");try{yield QC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Bs("Error using user provided cache. Falling back to memory cache: "+t),yield QC(n,new T4)}}else se(Hs,"Using default OfflineComponentProvider"),yield QC(n,new AA(void 0));return n._offlineComponents})}function b4(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(Hs,"Using user provided OnlineComponentProvider"),yield o3(n,n._uninitializedComponentsProvider._online)):(se(Hs,"Using default OnlineComponentProvider"),yield o3(n,new HY))),n._onlineComponents})}function GY(n){return b4(n).then(e=>e.syncEngine)}function mv(n){return E(this,null,function*(){let e=yield b4(n),t=e.eventManager;return t.onListen=DY.bind(null,e.syncEngine),t.onUnlisten=OY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PY.bind(null,e.syncEngine),t})}function zY(n,e,t={}){let r=new hi;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,c,u){let l=new ih({next:h=>{l.Ou(),s.enqueueAndForget(()=>JA(o,f));let p=h.docs.has(a);!p&&h.fromCache?u.reject(new ne(W.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new ne(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new rh(Tv(a.path),l,{includeMetadataChanges:!0,ka:!0});return ZA(o,f)}(yield mv(n),n.asyncQueue,e,t,r)})),r.promise}function WY(n,e,t={}){let r=new hi;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,c,u){let l=new ih({next:h=>{l.Ou(),s.enqueueAndForget(()=>JA(o,f)),h.fromCache&&c.source==="server"?u.reject(new ne(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new rh(a,l,{includeMetadataChanges:!0,ka:!0});return ZA(o,f)}(yield mv(n),n.asyncQueue,e,t,r)})),r.promise}function D4(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var s3=new Map;var R4="firestore.googleapis.com",a3=!0,vv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R4,this.ssl=a3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:a3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oY)throw new ne(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},il=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZC;switch(r.type){case"firstParty":return new nx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=s3.get(t);r&&(se("ComponentProvider","Removing Datastore"),s3.delete(t),r.terminate())}(this),Promise.resolve()}};function N4(n,e,t,r={}){var i;n=br(n,il);let o=xs(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(Ym(`https://${c}`),Xm("Firestore",!0)),s.host!==R4&&s.host!==c&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Vi(u,a)&&(n._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=En.MOCK_USER;else{l=XO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ne(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new En(h)}n._authCredentials=new JC(new G0(l,f))}}var hc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},dn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ch(t,n._jsonSchema))return new n(e,r||null,new pe(Rt.fromString(t.referencePath)))}};dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:on("string",dn._jsonSchemaVersion),referencePath:on("string")};var ks=class n extends hc{constructor(e,t,r){super(e,t,Tv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new pe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function O4(n,e,...t){if(n=Xt(n),g3("collection","path",e),n instanceof il){let r=Rt.fromString(e,...t);return Ak(r),new ks(n,null,r)}{if(!(n instanceof dn||n instanceof ks))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Rt.fromString(e,...t));return Ak(r),new ks(n.firestore,null,r)}}function rS(n,e,...t){if(n=Xt(n),arguments.length===1&&(e=Kf.newId()),g3("doc","path",e),n instanceof il){let r=Rt.fromString(e,...t);return xk(r),new dn(n,null,new pe(r))}{if(!(n instanceof dn||n instanceof ks))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Rt.fromString(e,...t));return xk(r),new dn(n.firestore,n instanceof ks?n.converter:null,new pe(r))}}var c3="AsyncQueue",yv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new uv(this,"async_queue_retry"),this.oc=()=>{let r=XC();r&&se(c3,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=XC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=XC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new hi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return E(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cl(e))throw e;se(c3,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ko("INTERNAL UNHANDLED ERROR: ",u3(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=mA.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&me(47125,{hc:u3(this.tc)})}verifyOperationInProgress(){}Pc(){return E(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function u3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function l3(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Yi=class extends il{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yv(e),this._firestoreClient=void 0,yield e}})}};function P4(n,e){let t=typeof n=="object"?n:Ga(),r=typeof n=="string"?n:e||Y0,i=Ru(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=YO("firestore");o&&N4(i,...o)}return i}function Pv(n){if(n._terminated)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qY(n),n._firestoreClient}function qY(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,l){return new ax(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,D4(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new SA(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Fs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(jn.fromBase64String(e))}catch(t){throw new ne(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ch(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Fs._jsonSchemaVersion="firestore/bytes/1.0",Fs._jsonSchema={type:on("string",Fs._jsonSchemaVersion),bytes:on("string")};var ol=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var oh=class{constructor(e){this._methodName=e}};var Ls=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ch(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ls._jsonSchemaVersion="firestore/geoPoint/1.0",Ls._jsonSchema={type:on("string",Ls._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};var Vs=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ch(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Vs._jsonSchemaVersion="firestore/vectorValue/1.0",Vs._jsonSchema={type:on("string",Vs._jsonSchemaVersion),vectorValues:on("object")};var KY=/^__.*__$/,TA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new dc(e,this.data,t,this.fieldTransforms)}},_v=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function M4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:n})}}var bA=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(M4(this.Ec)&&KY.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},DA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Rv(e)}Dc(e,t,r,i=!1){return new bA({Ec:e,methodName:t,bc:r,path:Tr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Mv(n){let e=n._freezeSettings(),t=Rv(n._databaseId);return new DA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function k4(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);iS("Data must be an object, but it was:",s,r);let a=F4(r,s),c,u;if(o.merge)c=new Hr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let f of o.mergeFields){let h=RA(e,f,t);if(!s.contains(h))throw new ne(W.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);V4(l,h)||l.push(h)}c=new Hr(l),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new TA(new Sr(a),c,u)}var Ev=class n extends oh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function YY(n,e,t,r){let i=n.Dc(1,e,t);iS("Data must be an object, but it was:",i,r);let o=[],s=Sr.empty();$s(r,(c,u)=>{let l=oS(e,c,t);u=Xt(u);let f=i.gc(l);if(u instanceof Ev)o.push(l);else{let h=dh(u,f);h!=null&&(o.push(l),s.set(l,h))}});let a=new Hr(o);return new _v(s,a,i.fieldTransforms)}function XY(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[RA(e,r,t)],c=[i];if(o.length%2!=0)throw new ne(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(RA(e,o[h])),c.push(o[h+1]);let u=[],l=Sr.empty();for(let h=a.length-1;h>=0;--h)if(!V4(u,a[h])){let p=a[h],m=c[h];m=Xt(m);let y=s.gc(p);if(m instanceof Ev)u.push(p);else{let w=dh(m,y);w!=null&&(u.push(p),l.set(p,w))}}let f=new Hr(u);return new _v(l,f,s.fieldTransforms)}function QY(n,e,t,r=!1){return dh(t,n.Dc(r?4:3,e))}function dh(n,e){if(L4(n=Xt(n)))return iS("Unsupported field value:",e,n),F4(n,e);if(n instanceof oh)return function(r,i){if(!M4(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=dh(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=sn.fromDate(r);return{timestampValue:rv(i.serializer,o)}}if(r instanceof sn){let o=new sn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rv(i.serializer,o)}}if(r instanceof Ls)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fs)return{bytesValue:o4(i.serializer,r._byteString)};if(r instanceof dn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vs)return function(s,a){return{mapValue:{fields:{[BA]:{stringValue:UA},[Ku]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return GA(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${xv(r)}`)}(n,e)}function F4(n,e){let t={};return N3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(n,(r,i)=>{let o=dh(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function L4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof sn||n instanceof Ls||n instanceof Fs||n instanceof dn||n instanceof oh||n instanceof Vs)}function iS(n,e,t){if(!L4(t)||!m3(t)){let r=xv(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function RA(n,e,t){if((e=Xt(e))instanceof ol)return e._internalPath;if(typeof e=="string")return oS(n,e);throw wv("Field path arguments must be of type string or ",n,!1,void 0,t)}var ZY=new RegExp("[~\\*/\\[\\]]");function oS(n,e,t){if(e.search(ZY)>=0)throw wv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ol(...e.split("."))._internalPath}catch{throw wv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wv(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ne(W.INVALID_ARGUMENT,a+n+c)}function V4(n,e){return n.some(t=>t.isEqual(e))}var Iv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new NA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(sS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},NA=class extends Iv{data(){return super.data()}};function sS(n,e){return typeof e=="string"?oS(n,e):e instanceof ol?e._internalPath:e._delegate._internalPath}function B4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sh=class{},OA=class extends sh{};function U4(n,e,...t){let r=[];e instanceof sh&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof PA).length,a=o.filter(c=>c instanceof Cv).length;if(s>1||s>0&&a>0)throw new ne(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Cv=class n extends OA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return H4(e._query,t),new hc(e.firestore,e.converter,Ex(e._query,t))}_parse(e){let t=Mv(e.firestore);return function(o,s,a,c,u,l,f){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new ne(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){f3(f,l);let m=[];for(let y of f)m.push(d3(c,o,y));h={arrayValue:{values:m}}}else h=d3(c,o,f)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||f3(f,l),h=QY(a,s,f,l==="in"||l==="not-in");return rn.create(u,l,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function j4(n,e,t){let r=e,i=sS("where",n);return Cv._create(i,r,t)}var PA=class n extends sh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)H4(s,c),s=Ex(s,c)}(e._query,t),new hc(e.firestore,e.converter,Ex(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function d3(n,e,t){if(typeof(t=Xt(t))=="string"){if(t==="")throw new ne(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z3(e)&&t.indexOf("/")!==-1)throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Rt.fromString(t));if(!pe.isDocumentKey(r))throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ok(n,new pe(r))}if(t instanceof dn)return Ok(n,t._key);throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xv(t)}.`)}function f3(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function H4(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ne(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var MA=class{convertValue(e,t="none"){switch(Us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return $s(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ku].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Dt(s.doubleValue));return new Vs(o)}convertGeoPoint(e){return new Ls(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Sv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qf(e));default:return null}}convertTimestamp(e){let t=Fo(e);return new sn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Rt.fromString(e);it(d4(r),9688,{name:e});let i=new X0(r.get(1),r.get(3)),o=new pe(r.popFirst(5));return i.isEqual(t)||ko(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function $4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var rc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ic=class n extends Iv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(sS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ic._jsonSchemaVersion="firestore/documentSnapshot/1.0",ic._jsonSchema={type:on("string",ic._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};var Wu=class extends ic{data(e={}){return super.data(e)}},oc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wu(this._firestore,this._userDataWriter,r.key,r,new rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Wu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Wu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:JY(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function JY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}function G4(n){n=br(n,dn);let e=br(n.firestore,Yi);return zY(Pv(e),n._key).then(t=>X4(e,n,t))}oc._jsonSchemaVersion="firestore/querySnapshot/1.0",oc._jsonSchema={type:on("string",oc._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};var ah=class extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}};function z4(n){n=br(n,hc);let e=br(n.firestore,Yi),t=Pv(e),r=new ah(e);return B4(n._query),WY(t,n._query).then(i=>new oc(e,r,n,i))}function W4(n,e,t){n=br(n,dn);let r=br(n.firestore,Yi),i=$4(n.converter,e,t);return aS(r,[k4(Mv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Mo.none())])}function q4(n,e,t,...r){n=br(n,dn);let i=br(n.firestore,Yi),o=Mv(i),s;return s=typeof(e=Xt(e))=="string"||e instanceof ol?XY(o,"updateDoc",n._key,e,t,r):YY(o,"updateDoc",n._key,e),aS(i,[s.toMutation(n._key,Mo.exists(!0))])}function K4(n,e){let t=br(n.firestore,Yi),r=rS(n),i=$4(n.converter,e);return aS(t,[k4(Mv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Mo.exists(!1))]).then(()=>r)}function Y4(n,...e){var t,r,i;n=Xt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||l3(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(l3(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,l;if(n instanceof dn)u=br(n.firestore,Yi),l=Tv(n._key.path),c={next:f=>{e[s]&&e[s](X4(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=br(n,hc);u=br(f.firestore,Yi),l=f._query;let h=new ah(u);c={next:p=>{e[s]&&e[s](new oc(u,h,f,p))},error:e[s+1],complete:e[s+2]},B4(n._query)}return function(h,p,m,y){let w=new ih(y),S=new rh(p,w,m);return h.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return ZA(yield mv(h),S)})),()=>{w.Ou(),h.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return JA(yield mv(h),S)}))}}(Pv(u),l,a,c)}function aS(n,e){return function(r,i){let o=new hi;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return MY(yield GY(r),i,o)})),o.promise}(Pv(n),e)}function X4(n,e,t){let r=t.docs.get(e._key),i=new ah(n);return new ic(n,i,e._key,r,new rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){sl=i})(Ss),li(new Jn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Yi(new ex(r.getProvider("auth-internal")),new rx(s,r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ne(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new X0(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Bt(Ek,wk,e),Bt(Ek,wk,"esm2017")})();var mi=class{constructor(e){return e}},Q4="firestore",cS=class{constructor(){return Ou(Q4)}};var uS=new ce("angularfire2.firestore-instances");function eX(n,e){let t=xf(Q4,n,e);return t&&new mi(t)}function tX(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new mi(r)}}var nX={provide:cS,deps:[[new lr,uS]]},rX={provide:mi,useFactory:eX,deps:[[new lr,uS],Co]};function Z4(n,...e){return Bt("angularfire",Ts.full,"fst"),Xr([rX,nX,{provide:uS,useFactory:tX(n),multi:!0,deps:[nt,Lt,bs,Wa,[new lr,jf],[new lr,Pu],...e]}])}var kv=Ut(K4,!0,2);var gc=Ut(O4,!0,2);var pr=Ut(rS,!0,2);var fh=Ut(G4,!0);var vi=Ut(z4,!0);var J4=Ut(P4,!0);var eF=Ut(Y4,!0);var yi=Ut(U4,!0,2);var tF=Ut(W4,!0,2);var Uo=Ut(q4,!0,2);var _i=Ut(j4,!0,2);var dF=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(J(Ni),J(dr))};static \u0275dir=Tt({type:n})}return n})(),mS=(()=>{class n extends dF{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ho(n)))(i||n)}})();static \u0275dir=Tt({type:n,features:[wr]})}return n})(),yh=new ce("");var iX={provide:yh,useExisting:Dr(()=>zs),multi:!0};function oX(){let n=Lr()?Lr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var sX=new ce(""),zs=(()=>{class n extends dF{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!oX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(J(Ni),J(dr),J(sX,8))};static \u0275dir=Tt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ge("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[go([iX]),wr]})}return n})();function vS(n){return n==null||yS(n)===0}function yS(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var zv=new ce(""),_S=new ce(""),aX=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,In=class{static min(e){return cX(e)}static max(e){return uX(e)}static required(e){return lX(e)}static requiredTrue(e){return dX(e)}static email(e){return fX(e)}static minLength(e){return hX(e)}static maxLength(e){return fF(e)}static pattern(e){return pX(e)}static nullValidator(e){return Lv()}static compose(e){return yF(e)}static composeAsync(e){return EF(e)}};function cX(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function uX(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function lX(n){return vS(n.value)?{required:!0}:null}function dX(n){return n.value===!0?null:{required:!0}}function fX(n){return vS(n.value)||aX.test(n.value)?null:{email:!0}}function hX(n){return e=>{let t=e.value?.length??yS(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function fF(n){return e=>{let t=e.value?.length??yS(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function pX(n){if(!n)return Lv;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(vS(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Lv(n){return null}function hF(n){return n!=null}function pF(n){return vs(n)?We(n):n}function gF(n){let e={};return n.forEach(t=>{e=t!=null?G(G({},e),t):e}),Object.keys(e).length===0?null:e}function mF(n,e){return e.map(t=>t(n))}function gX(n){return!n.validate}function vF(n){return n.map(e=>gX(e)?e:t=>e.validate(t))}function yF(n){if(!n)return null;let e=n.filter(hF);return e.length==0?null:function(t){return gF(mF(t,e))}}function _F(n){return n!=null?yF(vF(n)):null}function EF(n){if(!n)return null;let e=n.filter(hF);return e.length==0?null:function(t){let r=mF(t,e).map(pF);return Iy(r).pipe(we(gF))}}function wF(n){return n!=null?EF(vF(n)):null}function nF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IF(n){return n._rawValidators}function CF(n){return n._rawAsyncValidators}function lS(n){return n?Array.isArray(n)?n:[n]:[]}function Vv(n,e){return Array.isArray(n)?n.includes(e):n===e}function rF(n,e){let t=lS(e);return lS(n).forEach(i=>{Vv(t,i)||t.push(i)}),t}function iF(n,e){return lS(e).filter(t=>!Vv(n,t))}var Bv=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_F(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},mc=class extends Bv{name;get formDirective(){return null}get path(){return null}},vc=class extends Bv{_parent=null;name=null;valueAccessor=null},Uv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},mX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sxe=le(G({},mX),{"[class.ng-submitted]":"isSubmitted"}),hl=(()=>{class n extends Uv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(vc,2))};static \u0275dir=Tt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ld("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[wr]})}return n})(),Wv=(()=>{class n extends Uv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(mc,10))};static \u0275dir=Tt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ld("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[wr]})}return n})();var hh="VALID",Fv="INVALID",ll="PENDING",ph="DISABLED",Gs=class{},jv=class extends Gs{value;source;constructor(e,t){super(),this.value=e,this.source=t}},gh=class extends Gs{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},mh=class extends Gs{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},dl=class extends Gs{status;source;constructor(e,t){super(),this.status=e,this.source=t}},dS=class extends Gs{source;constructor(e){super(),this.source=e}},fS=class extends Gs{source;constructor(e){super(),this.source=e}};function ES(n){return(qv(n)?n.validators:n)||null}function vX(n){return Array.isArray(n)?_F(n):n||null}function wS(n,e){return(qv(e)?e.asyncValidators:n)||null}function yX(n){return Array.isArray(n)?wF(n):n||null}function qv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function xF(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[t])throw new re(1001,"")}function AF(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new re(1002,"")})}var fl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Fr(this.statusReactive)}set status(e){Fr(()=>this.statusReactive.set(e))}_status=pu(()=>this.statusReactive());statusReactive=Ti(void 0);get valid(){return this.status===hh}get invalid(){return this.status===Fv}get pending(){return this.status==ll}get disabled(){return this.status===ph}get enabled(){return this.status!==ph}errors;get pristine(){return Fr(this.pristineReactive)}set pristine(e){Fr(()=>this.pristineReactive.set(e))}_pristine=pu(()=>this.pristineReactive());pristineReactive=Ti(!0);get dirty(){return!this.pristine}get touched(){return Fr(this.touchedReactive)}set touched(e){Fr(()=>this.touchedReactive.set(e))}_touched=pu(()=>this.touchedReactive());touchedReactive=Ti(!1);get untouched(){return!this.touched}_events=new Gt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iF(e,this._rawAsyncValidators))}hasValidator(e){return Vv(this._rawValidators,e)}hasAsyncValidator(e){return Vv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(G({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new mh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new mh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(G({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new gh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new gh(!0,r))}markAsPending(e={}){this.status=ll;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(G({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ph,this.errors=null,this._forEachChild(i=>{i.disable(le(G({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jv(this.value,r)),this._events.next(new dl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(G({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hh,this._forEachChild(r=>{r.enable(le(G({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(G({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hh||this.status===ll)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jv(this.value,t)),this._events.next(new dl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(G({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ph:hh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ll,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=pF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new dl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new qt,this.statusChanges=new qt}_calculateStatus(){return this._allControlsDisabled()?ph:this.errors?Fv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ll)?ll:this._anyControlsHaveStatus(Fv)?Fv:hh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new gh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new mh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yX(this._rawAsyncValidators)}},Hv=class extends fl{constructor(e,t,r){super(ES(t),wS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){AF(this,!0,e),Object.keys(e).forEach(r=>{xF(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hS=class extends Hv{};var Kv=new ce("",{providedIn:"root",factory:()=>Yv}),Yv="always";function SF(n,e){return[...e.path,n]}function pS(n,e,t=Yv){IS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),EX(n,e),IX(n,e),wX(n,e),_X(n,e)}function oF(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Gv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $v(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _X(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function IS(n,e){let t=IF(n);e.validator!==null?n.setValidators(nF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=CF(n);e.asyncValidator!==null?n.setAsyncValidators(nF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();$v(e._rawValidators,i),$v(e._rawAsyncValidators,i)}function Gv(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=IF(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=CF(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return $v(e._rawValidators,r),$v(e._rawAsyncValidators,r),t}function EX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&TF(n,e)})}function wX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&TF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function TF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function IX(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function CX(n,e){n==null,IS(n,e)}function xX(n,e){return Gv(n,e)}function bF(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function AX(n){return Object.getPrototypeOf(n.constructor)===mS}function SX(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function DF(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===zs?t=o:AX(o)?r=o:i=o}),i||r||t||null}function TX(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function aF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var vh=class extends fl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(ES(t),wS(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(aF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){aF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var bX=n=>n instanceof vh;var DX={provide:vc,useExisting:Dr(()=>CS)},cF=Promise.resolve(),CS=(()=>{class n extends vc{_changeDetectorRef;callSetDisabledState;control=new vh;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new qt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DF(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){pS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){cF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ma(r);cF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?SF(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(J(mc,9),J(zv,10),J(_S,10),J(yh,10),J(Pa,8),J(Kv,8))};static \u0275dir=Tt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[go([DX]),wr,ni]})}return n})();var Xv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Tt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var RF=new ce("");var RX={provide:mc,useExisting:Dr(()=>_h)},_h=(()=>{class n extends mc{callSetDisabledState;get submitted(){return Fr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=pu(()=>this._submittedReactive());_submittedReactive=Ti(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new qt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return pS(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){oF(t.control||null,t,!1),TX(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),SX(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new dS(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new fS(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(oF(r||null,t),bX(i)&&(pS(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);CX(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&xX(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IS(this.form,this),this._oldForm&&Gv(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(J(zv,10),J(_S,10),J(Kv,8))};static \u0275dir=Tt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ge("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[go([RX]),wr,ni]})}return n})();var NX={provide:vc,useExisting:Dr(()=>Eh)},Eh=(()=>{class n extends vc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new qt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DF(this,o)}ngOnChanges(t){this._added||this._setUpControl(),bF(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return SF(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(J(mc,13),J(zv,10),J(_S,10),J(yh,10),J(RF,8))};static \u0275dir=Tt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[go([NX]),wr,ni]})}return n})();var OX={provide:yh,useExisting:Dr(()=>pl),multi:!0};function NF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function PX(n){return n.split(":")[0]}var pl=(()=>{class n extends mS{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=NF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=PX(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ho(n)))(i||n)}})();static \u0275dir=Tt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ge("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[go([OX]),wr]})}return n})(),Qv=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(NF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(J(dr),J(Ni),J(pl,9))};static \u0275dir=Tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),MX={provide:yh,useExisting:Dr(()=>OF),multi:!0};function uF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function kX(n){return n.split(":")[0]}var OF=(()=>{class n extends mS{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=kX(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ho(n)))(i||n)}})();static \u0275dir=Tt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ge("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[go([MX]),wr]})}return n})(),Zv=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(uF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(uF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(J(dr),J(Ni),J(OF,9))};static \u0275dir=Tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function FX(n){return typeof n=="number"?n:parseInt(n,10)}var LX=(()=>{class n{_validator=Lv;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Lv,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Tt({type:n,features:[ni]})}return n})();var VX={provide:zv,useExisting:Dr(()=>xS),multi:!0},xS=(()=>{class n extends LX{maxlength;inputName="maxlength";normalizeInput=t=>FX(t);createValidator=t=>fF(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ho(n)))(i||n)}})();static \u0275dir=Tt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&hu("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[go([VX]),wr]})}return n})();var PF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Rr({})}return n})(),gS=class extends fl{constructor(e,t,r){super(ES(t),wS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){AF(this,!1,e),e.forEach((r,i)=>{xF(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function lF(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Jv=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return lF(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Hv(i,o)}record(t,r=null){let i=this._reduceControls(t);return new hS(i,r)}control(t,r,i){let o={};return this.useNonNullable?(lF(r)?o=r:(o.validators=r,o.asyncValidators=i),new vh(t,le(G({},o),{nonNullable:!0}))):new vh(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new gS(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof vh)return t;if(t instanceof fl)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var MF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kv,useValue:t.callSetDisabledState??Yv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Rr({imports:[PF]})}return n})(),e1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RF,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Kv,useValue:t.callSetDisabledState??Yv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ii({type:n});static \u0275inj=Rr({imports:[PF]})}return n})();var Hn=(()=>{let e=class e{constructor(){this.currentUserSubject=new un(null),this.currentUser$=this.currentUserSubject.asObservable(),this.auth=z(ec),this.firestore=z(mi),this.userSubscription=null,this.realtimeSubscription=null,this.onSnapshotUnsubscribe=null,this.isInitialized=!1,this.initializeAuth()}initializeAuth(){return E(this,null,function*(){if(!this.isInitialized)try{this.userSubscription=UC(this.auth).pipe(kn(r=>E(this,null,function*(){if(r)try{let i=yield fh(pr(this.firestore,"users",r.uid));if(i.exists()){let o=i.data();return this.convertTimestamps(o)}}catch(i){console.error("Error fetching user data:",i)}return null}))).subscribe(r=>{this.currentUserSubject.next(r)}),this.setupRealtimeUserListener(),this.isInitialized=!0}catch(r){console.error("Error initializing auth:",r)}})}convertTimestamps(r){return r.createdAt&&typeof r.createdAt.toDate=="function"&&(r.createdAt=r.createdAt.toDate()),r.lastLogin&&typeof r.lastLogin.toDate=="function"&&(r.lastLogin=r.lastLogin.toDate()),r.lastStatusUpdate&&typeof r.lastStatusUpdate.toDate=="function"&&(r.lastStatusUpdate=r.lastStatusUpdate.toDate()),r}setupRealtimeUserListener(){this.realtimeSubscription=UC(this.auth).subscribe(r=>{if(this.onSnapshotUnsubscribe&&(this.onSnapshotUnsubscribe(),this.onSnapshotUnsubscribe=null),r)try{let i=pr(this.firestore,"users",r.uid);this.onSnapshotUnsubscribe=eF(i,o=>{if(o.exists()){let s=this.convertTimestamps(o.data());this.currentUserSubject.next(s)}},o=>{console.error("Real-time listener error:",o)})}catch(i){console.error("Error setting up real-time listener:",i)}else this.currentUserSubject.next(null)})}signup(r){return E(this,null,function*(){try{if(yield this.checkEmailExists(r.email))throw new Error("Email already exists. Please use a different email or contact admin.");let o=yield pk(this.auth,r.email,r.password),s={uid:o.user.uid,email:r.email,employeeId:r.employeeId,role:r.role,name:r.fullName,createdAt:new Date,isActive:!0,lastLogin:new Date};r.department&&r.department.trim()&&(s.department=r.department),yield tF(pr(this.firestore,"users",o.user.uid),s);let a={uid:o.user.uid,email:r.email,employeeId:r.employeeId,role:r.role,name:r.fullName,department:r.department,createdAt:new Date,isActive:!0,lastLogin:new Date};return this.currentUserSubject.next(a),a}catch(i){throw console.error("Signup error:",i),i.code==="auth/email-already-in-use"?new Error("Email already exists. Please use a different email."):new Error(i.message||"Signup failed. Please try again.")}})}login(r){return E(this,null,function*(){try{let i=r.emailId,o=yield vk(this.auth,i,r.password),s=yield fh(pr(this.firestore,"users",o.user.uid));if(s.exists()){let a=this.convertTimestamps(s.data());if(yield Uo(pr(this.firestore,"users",o.user.uid),{lastLogin:new Date}),r.role&&a.role!==r.role)throw yield jC(this.auth),new Error(`Access denied. Your account is registered as ${a.role}, not ${r.role}.`);return this.currentUserSubject.next(a),a}else throw new Error("User profile not found. Please contact administrator.")}catch(i){throw console.error("Login error:",i),i.code==="auth/user-not-found"?new Error("Email ID not found. Please check your email or sign up."):i.code==="auth/wrong-password"?new Error("Incorrect password. Please try again."):i.code==="auth/invalid-credential"?new Error("Invalid email or password. Please check your credentials."):new Error(i.message||"Login failed. Please check your credentials.")}})}loginWithOTP(r,i){return E(this,null,function*(){try{if(i!=="123456")throw new Error("Invalid OTP. Please try again.");let s=yi(gc(this.firestore,"users"),_i("email","==",r)),a=yield vi(s);if(a.empty)throw new Error("Email not found. Please check your email or sign up.");let c=a.docs[0],u=this.convertTimestamps(c.data());return yield Uo(pr(this.firestore,"users",u.uid),{lastLogin:new Date}),this.currentUserSubject.next(u),u}catch(o){throw console.error("OTP login error:",o),new Error(o.message||"OTP login failed.")}})}sendPasswordReset(r){return E(this,null,function*(){try{yield mk(this.auth,r)}catch(i){throw console.error("Password reset error:",i),new Error("Failed to send password reset email. Please check your Email ID.")}})}checkEmailExists(r){return E(this,null,function*(){try{let i=yi(gc(this.firestore,"users"),_i("email","==",r));return!(yield vi(i)).empty}catch(i){return console.error("Error checking email:",i),!1}})}logout(){return E(this,null,function*(){yield jC(this.auth),this.currentUserSubject.next(null)})}getCurrentUser(){return this.currentUserSubject.value}hasRole(r){return this.getCurrentUser()?.role===r}hasAnyRole(r){let i=this.getCurrentUser();return i?r.includes(i.role):!1}isAuthenticated(){return this.getCurrentUser()!==null}updateUserStatus(r){let i=this.getCurrentUser();if(i)try{Uo(pr(this.firestore,"users",i.uid),{status:r,lastStatusUpdate:new Date})}catch(o){console.error("Error updating user status:",o)}}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.realtimeSubscription&&this.realtimeSubscription.unsubscribe(),this.onSnapshotUnsubscribe&&this.onSnapshotUnsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function BX(n,e){n&1&&(_(0,"div",18),O(1," Email ID is required "),C())}function UX(n,e){n&1&&(_(0,"div",18),O(1," Password is required "),C())}function jX(n,e){n&1&&(_(0,"div",18),O(1," Please select your role "),C())}function HX(n,e){if(n&1&&(_(0,"div")(1,"div")(2,"label",19),O(3,"Password"),C(),te(4,"input",20),xe(5,UX,2,0,"div",11),C(),_(6,"div")(7,"label",21),O(8,"Role"),C(),_(9,"select",22)(10,"option",23),O(11,"Select your role"),C(),_(12,"option",24),O(13,"Manufacturer"),C(),_(14,"option",25),O(15,"Inspector"),C(),_(16,"option",26),O(17,"Admin"),C(),_(18,"option",27),O(19,"Vendor"),C()(),xe(20,jX,2,0,"div",11),C()()),n&2){let t,r,i=Pe();U(5),oe("ngIf",((t=i.loginForm.get("password"))==null?null:t.invalid)&&((t=i.loginForm.get("password"))==null?null:t.touched)),U(15),oe("ngIf",((r=i.loginForm.get("role"))==null?null:r.invalid)&&((r=i.loginForm.get("role"))==null?null:r.touched))}}function $X(n,e){n&1&&(_(0,"div",18),O(1," OTP is required "),C())}function GX(n,e){if(n&1&&(_(0,"div")(1,"div")(2,"label",28),O(3,"OTP"),C(),te(4,"input",29),xe(5,$X,2,0,"div",11),_(6,"div",30),O(7," Demo OTP: "),_(8,"span",31),O(9,"123456"),C()()()()),n&2){let t,r=Pe();U(5),oe("ngIf",((t=r.loginForm.get("otp"))==null?null:t.invalid)&&((t=r.loginForm.get("otp"))==null?null:t.touched))}}function zX(n,e){n&1&&(_(0,"span"),O(1,"Sign In"),C())}function WX(n,e){n&1&&(_(0,"span",32),ue(),_(1,"svg",33),te(2,"circle",34)(3,"path",35),C(),O(4," Signing in... "),C())}function qX(n,e){if(n&1&&(_(0,"div",36),O(1),C()),n&2){let t=Pe();U(),Qe(" ",t.error," ")}}function KX(n,e){if(n&1){let t=Nt();_(0,"div",2)(1,"button",37),ge("click",function(){at(t);let i=Pe();return ct(i.forgotPassword())}),O(2," Forgot Password? "),C()()}}var kF=(()=>{let e=class e{constructor(r,i,o){this.fb=r,this.authService=i,this.router=o,this.loading=!1,this.error="",this.loginMethod="password",this.loginForm=this.fb.group({emailId:["",In.required],password:["",In.required],role:["",In.required],otp:[""]})}setLoginMethod(r){this.loginMethod=r,this.error="",r==="password"?(this.loginForm.get("password")?.setValidators([In.required]),this.loginForm.get("role")?.setValidators([In.required]),this.loginForm.get("otp")?.clearValidators()):this.loginForm.get("otp")?.setValidators([In.required]),this.loginForm.get("password")?.updateValueAndValidity(),this.loginForm.get("role")?.updateValueAndValidity(),this.loginForm.get("otp")?.updateValueAndValidity()}onSubmit(){return E(this,null,function*(){if(!this.loginForm.invalid){this.loading=!0,this.error="";try{if(this.loginMethod==="password"){let r={emailId:this.loginForm.value.emailId,password:this.loginForm.value.password,role:this.loginForm.value.role};yield this.authService.login(r)}else{let r=this.loginForm.value.emailId,i=this.loginForm.value.otp;yield this.authService.loginWithOTP(r,i)}this.router.navigate(["/dashboard"])}catch(r){this.error=r.message||"Login failed. Please check your credentials."}finally{this.loading=!1}}})}forgotPassword(){return E(this,null,function*(){let r=this.loginForm.get("emailId")?.value;if(!r){this.error="Please enter your Email ID first.";return}try{yield this.authService.sendPasswordReset(r),this.error="Password reset email sent! Please check your email."}catch(i){this.error=i.message||"Failed to send password reset email."}})}};e.\u0275fac=function(i){return new(i||e)(J(Jv),J(Hn),J(rt))},e.\u0275cmp=Kt({type:e,selectors:[["app-login"]],decls:29,vars:13,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-100","flex","items-center","justify-center","px-4"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"bg-white","rounded-lg","p-4","shadow-sm"],[1,"flex","space-x-2"],[1,"flex-1","py-2","px-4","rounded-lg","font-medium","transition-colors","duration-200",3,"click"],[1,"bg-white","rounded-xl","shadow-lg","p-8","space-y-6",3,"ngSubmit","formGroup"],["for","emailId",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","email","id","emailId","formControlName","emailId","placeholder","Enter your Email ID",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["class","text-red-500 text-sm mt-1",4,"ngIf"],[4,"ngIf"],["type","submit",1,"w-full","bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","text-white","font-semibold","py-3","px-4","rounded-lg","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2",3,"disabled"],["class","flex items-center justify-center",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",4,"ngIf"],["class","text-center",4,"ngIf"],["routerLink","/signup",1,"text-purple-600","hover:text-purple-700","font-medium"],[1,"text-red-500","text-sm","mt-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["for","role",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","role","formControlName","role",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["value",""],["value","manufacturer"],["value","inspector"],["value","admin"],["value","vendor"],["for","otp",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","otp","formControlName","otp","placeholder","Enter 6-digit OTP","maxlength","6",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],[1,"text-sm","text-gray-500","mt-1"],[1,"font-mono","bg-gray-100","px-2","py-1","rounded"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg"],["type","button",1,"text-blue-600","hover:text-blue-700","text-sm","font-medium",3,"click"]],template:function(i,o){if(i&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),O(4,"QR Certificate Verifier"),C(),_(5,"p",4),O(6,"Secure Product Authentication System"),C()(),_(7,"div",5)(8,"div",6)(9,"button",7),ge("click",function(){return o.setLoginMethod("password")}),O(10," Password "),C(),_(11,"button",7),ge("click",function(){return o.setLoginMethod("otp")}),O(12," OTP "),C()()(),_(13,"form",8),ge("ngSubmit",function(){return o.onSubmit()}),_(14,"div")(15,"label",9),O(16,"Email ID"),C(),te(17,"input",10),xe(18,BX,2,0,"div",11),C(),xe(19,HX,21,2,"div",12)(20,GX,10,1,"div",12),_(21,"button",13),xe(22,zX,2,0,"span",12)(23,WX,5,0,"span",14),C(),xe(24,qX,2,1,"div",15)(25,KX,3,0,"div",16),C(),_(26,"div",2)(27,"a",17),O(28," Don't have an account? Sign Up "),C()()()()),i&2){let s;U(9),It(o.loginMethod==="password"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),U(2),It(o.loginMethod==="otp"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),U(2),oe("formGroup",o.loginForm),U(5),oe("ngIf",((s=o.loginForm.get("emailId"))==null?null:s.invalid)&&((s=o.loginForm.get("emailId"))==null?null:s.touched)),U(),oe("ngIf",o.loginMethod==="password"),U(),oe("ngIf",o.loginMethod==="otp"),U(),oe("disabled",o.loginForm.invalid||o.loading),U(),oe("ngIf",!o.loading),U(),oe("ngIf",o.loading),U(),oe("ngIf",o.error),U(),oe("ngIf",o.loginMethod==="password")}},dependencies:[yn,Tn,e1,Xv,Qv,Zv,zs,pl,hl,Wv,xS,_h,Eh,vf,Tu],encapsulation:2});let n=e;return n})();function YX(n,e){n&1&&(_(0,"div",29),O(1," Full name is required "),C())}function XX(n,e){n&1&&(_(0,"div",29),O(1," Employee ID is required "),C())}function QX(n,e){n&1&&(_(0,"div",29),O(1," Please select your role "),C())}function ZX(n,e){n&1&&(_(0,"span"),O(1,"Email is required"),C())}function JX(n,e){n&1&&(_(0,"span"),O(1,"Please enter a valid email"),C())}function eQ(n,e){if(n&1&&(_(0,"div",29),xe(1,ZX,2,0,"span",25)(2,JX,2,0,"span",25),C()),n&2){let t,r,i=Pe();U(),oe("ngIf",(t=i.signupForm.get("email"))==null||t.errors==null?null:t.errors.required),U(),oe("ngIf",(r=i.signupForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function tQ(n,e){n&1&&(_(0,"span"),O(1,"Password is required"),C())}function nQ(n,e){n&1&&(_(0,"span"),O(1,"Password must be at least 6 characters"),C())}function rQ(n,e){if(n&1&&(_(0,"div",29),xe(1,tQ,2,0,"span",25)(2,nQ,2,0,"span",25),C()),n&2){let t,r,i=Pe();U(),oe("ngIf",(t=i.signupForm.get("password"))==null||t.errors==null?null:t.errors.required),U(),oe("ngIf",(r=i.signupForm.get("password"))==null||r.errors==null?null:r.errors.minlength)}}function iQ(n,e){n&1&&(_(0,"span"),O(1,"Please confirm your password"),C())}function oQ(n,e){n&1&&(_(0,"span"),O(1,"Passwords do not match"),C())}function sQ(n,e){if(n&1&&(_(0,"div",29),xe(1,iQ,2,0,"span",25)(2,oQ,2,0,"span",25),C()),n&2){let t,r,i=Pe();U(),oe("ngIf",(t=i.signupForm.get("confirmPassword"))==null||t.errors==null?null:t.errors.required),U(),oe("ngIf",(r=i.signupForm.get("confirmPassword"))==null||r.errors==null?null:r.errors.passwordMismatch)}}function aQ(n,e){n&1&&(_(0,"span"),O(1,"Create Account"),C())}function cQ(n,e){n&1&&(_(0,"span",30),ue(),_(1,"svg",31),te(2,"circle",32)(3,"path",33),C(),O(4," Creating account... "),C())}function uQ(n,e){if(n&1&&(_(0,"div",34),O(1),C()),n&2){let t=Pe();U(),Qe(" ",t.error," ")}}var FF=(()=>{let e=class e{constructor(r,i,o){this.fb=r,this.authService=i,this.router=o,this.loading=!1,this.error="",this.signupForm=this.fb.group({fullName:["",In.required],email:["",[In.required,In.email]],employeeId:["",In.required],role:["",In.required],password:["",[In.required,In.minLength(6)]],confirmPassword:["",In.required]},{validators:this.passwordMatchValidator})}passwordMatchValidator(r){let i=r.get("password"),o=r.get("confirmPassword");return i&&o&&i.value!==o.value?{passwordMismatch:!0}:null}onSubmit(){return E(this,null,function*(){if(!this.signupForm.invalid){this.loading=!0,this.error="";try{let r={fullName:this.signupForm.value.fullName,employeeId:this.signupForm.value.employeeId,email:this.signupForm.value.email,password:this.signupForm.value.password,confirmPassword:this.signupForm.value.confirmPassword,role:this.signupForm.value.role};yield this.authService.signup(r),this.router.navigate(["/dashboard"])}catch(r){this.error=r.message||"Signup failed. Please try again."}finally{this.loading=!1}}})}};e.\u0275fac=function(i){return new(i||e)(J(Jv),J(Hn),J(rt))},e.\u0275cmp=Kt({type:e,selectors:[["app-signup"]],decls:55,vars:11,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-100","flex","items-center","justify-center","px-4"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"bg-white","rounded-xl","shadow-lg","p-8","space-y-6",3,"ngSubmit","formGroup"],["for","fullName",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","fullName","formControlName","fullName","placeholder","Enter your full name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","employeeId",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","employeeId","formControlName","employeeId","placeholder","Enter your Employee ID",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["for","workRole",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","workRole","formControlName","role",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["value",""],["value","manufacturer"],["value","inspector"],["value","admin"],["value","vendor"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["type","submit",1,"w-full","bg-gray-400","hover:bg-gray-500","disabled:bg-gray-300","text-white","font-semibold","py-3","px-4","rounded-lg","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",4,"ngIf"],["routerLink","/login",1,"text-purple-600","hover:text-purple-700","font-medium"],[1,"text-red-500","text-sm","mt-1"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg"]],template:function(i,o){if(i&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),O(4,"QR Certificate Verifier"),C(),_(5,"p",4),O(6,"Create Your Account"),C()(),_(7,"form",5),ge("ngSubmit",function(){return o.onSubmit()}),_(8,"div")(9,"label",6),O(10,"Full Name"),C(),te(11,"input",7),xe(12,YX,2,0,"div",8),C(),_(13,"div")(14,"label",9),O(15,"Employee ID"),C(),te(16,"input",10),xe(17,XX,2,0,"div",8),C(),_(18,"div")(19,"label",11),O(20,"Work Role"),C(),_(21,"select",12)(22,"option",13),O(23,"Select Role"),C(),_(24,"option",14),O(25,"Manufacturer"),C(),_(26,"option",15),O(27,"Inspector"),C(),_(28,"option",16),O(29,"Admin"),C(),_(30,"option",17),O(31,"Vendor"),C()(),xe(32,QX,2,0,"div",8),C(),_(33,"div")(34,"label",18),O(35,"Email"),C(),te(36,"input",19),xe(37,eQ,3,2,"div",8),C(),_(38,"div")(39,"label",20),O(40,"Password"),C(),te(41,"input",21),xe(42,rQ,3,2,"div",8),C(),_(43,"div")(44,"label",22),O(45,"Confirm Password"),C(),te(46,"input",23),xe(47,sQ,3,2,"div",8),C(),_(48,"button",24),xe(49,aQ,2,0,"span",25)(50,cQ,5,0,"span",26),C(),xe(51,uQ,2,1,"div",27),C(),_(52,"div",2)(53,"a",28),O(54," Already have an account? Login "),C()()()()),i&2){let s,a,c,u,l,f;U(7),oe("formGroup",o.signupForm),U(5),oe("ngIf",((s=o.signupForm.get("fullName"))==null?null:s.invalid)&&((s=o.signupForm.get("fullName"))==null?null:s.touched)),U(5),oe("ngIf",((a=o.signupForm.get("employeeId"))==null?null:a.invalid)&&((a=o.signupForm.get("employeeId"))==null?null:a.touched)),U(15),oe("ngIf",((c=o.signupForm.get("role"))==null?null:c.invalid)&&((c=o.signupForm.get("role"))==null?null:c.touched)),U(5),oe("ngIf",((u=o.signupForm.get("email"))==null?null:u.invalid)&&((u=o.signupForm.get("email"))==null?null:u.touched)),U(5),oe("ngIf",((l=o.signupForm.get("password"))==null?null:l.invalid)&&((l=o.signupForm.get("password"))==null?null:l.touched)),U(5),oe("ngIf",((f=o.signupForm.get("confirmPassword"))==null?null:f.invalid)&&((f=o.signupForm.get("confirmPassword"))==null?null:f.touched)),U(),oe("disabled",o.signupForm.invalid||o.loading),U(),oe("ngIf",!o.loading),U(),oe("ngIf",o.loading),U(),oe("ngIf",o.error)}},dependencies:[yn,Tn,e1,Xv,Qv,Zv,zs,pl,hl,Wv,_h,Eh,vf,Tu],encapsulation:2});let n=e;return n})();function lQ(n,e){if(n&1){let t=Nt();_(0,"button",30),ge("click",function(){at(t);let i=Pe();return ct(i.navigateToCertificates())}),_(1,"div",6)(2,"div",58),ue(),_(3,"svg",59),te(4,"path",60),C()(),ye(),_(5,"div")(6,"h3",34),O(7,"My Certificates"),C(),_(8,"p",35),O(9,"View verification history"),C()()()()}}var LF=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i,this.currentUser=null,this.userSubscription=null,this.statusUpdateTimeout=null}ngOnInit(){this.userSubscription=this.authService.currentUser$.subscribe(r=>{this.currentUser=r,r&&this.updateUserStatusOnce()})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.statusUpdateTimeout&&clearTimeout(this.statusUpdateTimeout),this.authService.updateUserStatus("offline")}formatDate(r){if(!r)return"Never";try{return r&&typeof r.toDate=="function"?r.toDate().toLocaleString():r instanceof Date?r.toLocaleString():typeof r=="string"?new Date(r).toLocaleString():"Invalid Date"}catch(i){return console.error("Error formatting date:",i),"Invalid Date"}}updateUserStatusOnce(){this.statusUpdateTimeout&&clearTimeout(this.statusUpdateTimeout),this.statusUpdateTimeout=setTimeout(()=>{this.authService.updateUserStatus("online")},1e3)}canAccessCertificates(){return this.authService.hasAnyRole(["admin","inspector"])}navigateToScanner(){this.router.navigate(["/scanner"])}navigateToSearch(){this.router.navigate(["/search"])}navigateToCertificates(){this.router.navigate(["/certificates"])}navigateToNotifications(){this.router.navigate(["/notifications"])}navigateToSupport(){this.router.navigate(["/support"])}logout(){return E(this,null,function*(){try{this.authService.updateUserStatus("offline"),yield this.authService.logout(),this.router.navigate(["/login"])}catch(r){console.error("Logout error:",r),this.router.navigate(["/login"])}})}};e.\u0275fac=function(i){return new(i||e)(J(Hn),J(rt))},e.\u0275cmp=Kt({type:e,selectors:[["app-dashboard"]],decls:114,vars:12,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-16"],[1,"flex","items-center"],[1,"text-xl","font-bold","text-gray-900"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"text-xs","text-gray-500"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"text-gray-500","ml-2"],[1,"text-xs","text-gray-400"],[1,"text-gray-500","hover:text-gray-700","px-3","py-2","rounded-md","text-sm","font-medium","transition-colors","duration-200",3,"click"],[1,"max-w-7xl","mx-auto","py-8","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-2","text-sm","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"md:col-span-2"],[1,"w-full","bg-gradient-to-r","from-blue-600","to-blue-700","hover:from-blue-700","hover:to-blue-800","text-white","rounded-xl","p-8","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","group",3,"click"],[1,"flex","items-center","justify-center","space-x-4"],[1,"bg-white/20","rounded-full","p-4","group-hover:bg-white/30","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 16h4m-4 0v1a1 1 0 01-1 1H9a1 1 0 01-1-1v-1m4-4h.01m2.483 0A2.982 2.982 0 0018 9.517V7a2 2 0 00-2-2H8a2 2 0 00-2 2v2.517A2.982 2.982 0 008.483 12z"],[1,"text-left"],[1,"text-2xl","font-bold"],[1,"text-blue-100","mt-1"],[1,"bg-white","hover:bg-gray-50","border","border-gray-200","rounded-xl","p-6","shadow-md","hover:shadow-lg","transition-all","duration-300","group","text-left",3,"click"],[1,"bg-teal-100","rounded-full","p-3","group-hover:bg-teal-200","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-teal-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-600","text-sm"],["class","bg-white hover:bg-gray-50 border border-gray-200 rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 group text-left",3,"click",4,"ngIf"],[1,"bg-orange-100","rounded-full","p-3","group-hover:bg-orange-200","transition-colors","duration-300","relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-5 5v-5zM21 7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h14a2 2 0 012 2v2z"],[1,"absolute","-top-1","-right-1","bg-red-500","text-white","text-xs","rounded-full","h-5","w-5","flex","items-center","justify-center"],[1,"bg-purple-100","rounded-full","p-3","group-hover:bg-purple-200","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M12 2v2m0 16v2m10-10h-2M4 12H2"],[1,"mt-8","grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-white","rounded-lg","p-4","shadow-sm","border"],[1,"bg-blue-100","rounded-full","p-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"bg-green-100","rounded-full","p-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"bg-orange-100","rounded-full","p-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-green-100","rounded-full","p-3","group-hover:bg-green-200","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),O(6,"QR Certificate Verifier"),C()(),_(7,"div",6)(8,"div",7),te(9,"div",8),_(10,"span",9),O(11,"Online"),C()(),_(12,"div",10)(13,"span",11),O(14),C(),_(15,"span",12),O(16),Ot(17,"titlecase"),C(),_(18,"div",13),O(19),C()(),_(20,"div",9),O(21),C(),_(22,"button",14),ge("click",function(){return o.logout()}),O(23," Logout "),C()()()()(),_(24,"main",15)(25,"div",16)(26,"h2",17),O(27),C(),_(28,"p",18),O(29,"Select an option to get started with product verification"),C(),_(30,"div",19),O(31," Role: "),_(32,"span",11),O(33),Ot(34,"titlecase"),C(),O(35," | Department: "),_(36,"span",11),O(37),C()()(),_(38,"div",20)(39,"div",21)(40,"button",22),ge("click",function(){return o.navigateToScanner()}),_(41,"div",23)(42,"div",24),ue(),_(43,"svg",25),te(44,"path",26),C()(),ye(),_(45,"div",27)(46,"h3",28),O(47,"Scan QR Code"),C(),_(48,"p",29),O(49,"Verify product authenticity instantly"),C()()()()(),_(50,"button",30),ge("click",function(){return o.navigateToSearch()}),_(51,"div",6)(52,"div",31),ue(),_(53,"svg",32),te(54,"path",33),C()(),ye(),_(55,"div")(56,"h3",34),O(57,"Search Product"),C(),_(58,"p",35),O(59,"Find by Product ID"),C()()()(),xe(60,lQ,10,0,"button",36),_(61,"button",30),ge("click",function(){return o.navigateToNotifications()}),_(62,"div",6)(63,"div",37),ue(),_(64,"svg",38),te(65,"path",39),C(),ye(),_(66,"span",40),O(67,"2"),C()(),_(68,"div")(69,"h3",34),O(70,"Notifications"),C(),_(71,"p",35),O(72,"Alerts & Support"),C()()()(),_(73,"button",30),ge("click",function(){return o.navigateToSupport()}),_(74,"div",6)(75,"div",41),ue(),_(76,"svg",42),te(77,"path",43),C()(),ye(),_(78,"div")(79,"h3",34),O(80,"Support"),C(),_(81,"p",35),O(82,"Contact management"),C()()()()(),_(83,"div",44)(84,"div",45)(85,"div",4)(86,"div",46),ue(),_(87,"svg",47),te(88,"path",48),C()(),ye(),_(89,"div",49)(90,"p",50),O(91,"Verified Today"),C(),_(92,"p",51),O(93,"12"),C()()()(),_(94,"div",45)(95,"div",4)(96,"div",52),ue(),_(97,"svg",53),te(98,"path",54),C()(),ye(),_(99,"div",49)(100,"p",50),O(101,"Success Rate"),C(),_(102,"p",51),O(103,"98%"),C()()()(),_(104,"div",45)(105,"div",4)(106,"div",55),ue(),_(107,"svg",56),te(108,"path",57),C()(),ye(),_(109,"div",49)(110,"p",50),O(111,"Pending"),C(),_(112,"p",51),O(113,"3"),C()()()()()()()),i&2&&(U(14),_e(o.currentUser==null?null:o.currentUser.name),U(2),Qe("(",mo(17,8,o.currentUser==null?null:o.currentUser.role),")"),U(3),Qe("ID: ",o.currentUser==null?null:o.currentUser.employeeId),U(2),Qe(" Last: ",o.formatDate(o.currentUser==null?null:o.currentUser.lastLogin)," "),U(6),Qe("Welcome back, ",o.currentUser==null?null:o.currentUser.name,"!"),U(6),_e(mo(34,10,o.currentUser==null?null:o.currentUser.role)),U(4),_e((o.currentUser==null?null:o.currentUser.department)||"Not specified"),U(23),oe("ngIf",o.canAccessCertificates()))},dependencies:[yn,Tn,ka],encapsulation:2});let n=e;return n})();function dQ(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function fQ(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var hQ=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VF=function(n){hQ(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),dQ(o,i.prototype),fQ(o),o}return e}(Error);var pQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gQ=function(n){pQ(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(VF),lt=gQ;var mQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vQ=function(n){mQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(lt),gr=vQ;var yQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_Q=function(n){yQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(lt),Y=_Q;var EQ=function(){function n(e){if(this.binarizer=e,e===null)throw new Y("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),SS=EQ;var wQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IQ=function(n){wQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(lt),dt=IQ;var CQ=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),TS=CQ;var xQ=function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),be=xQ;var AQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SQ=function(n){AQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(lt),gl=SQ;var TQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bQ=function(n){TQ(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(gl),bS=bQ;var DQ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RQ=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Y("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new bS(t);if(r>e)throw new bS(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=DQ(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return be.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(t,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),Xe=RQ;var NQ=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),de=NQ;var OQ=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);be.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var a=i*32+de.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var a=i*32+de.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Y;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,c=s<i?31:t&31,u=(2<<c)-(1<<a);o[s]|=u}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Y;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,u=a<o?31:t&31,l=(2<<u)-(1<<c)&4294967295;if((s[a]&l)!==(r?l:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Y("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,c=e[0]>>>a,o=1;o<r;o++){var u=e[o];c|=u<<32-a,e[o-1]=c,c=u>>>a}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Xe.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Xe.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),yt=OQ;var BF=function(n){return n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",n}(BF||{}),Ve=BF;var PQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MQ=function(n){PQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(lt),q=MQ;var kQ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=function(n){return n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR",n}(ht||{}),FQ=function(){function n(e,t,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,u=0,l=c.length;u!==l;u++){var f=c[u];n.VALUES_TO_ECI.set(f,this)}try{for(var h=kQ(s),p=h.next();!p.done;p=h.next()){var m=p.value;n.NAME_TO_ECI.set(m,this)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new q("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new q("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new q("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(ht.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(ht.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(ht.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(ht.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(ht.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(ht.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(ht.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(ht.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(ht.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(ht.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(ht.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(ht.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(ht.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(ht.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(ht.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(ht.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(ht.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(ht.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(ht.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(ht.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(ht.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(ht.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(ht.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(ht.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(ht.Big5,28,"Big5"),n.GB18030=new n(ht.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(ht.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),_t=FQ;var LQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VQ=function(n){LQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(lt),yc=VQ;var BQ=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof _t?e:_t.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(_t.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new yc("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(_t.UTF8)||e.equals(_t.ISO8859_1)||e.equals(_t.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n}(),fn=BQ;var UQ=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return fn.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Ve.CHARACTER_SET)!==void 0)return t.get(Ve.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,c=0,u=0,l=0,f=0,h=0,p=0,m=0,y=0,w=0,S=0,D=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,P=0;P<r&&(i||o||s);P++){var F=e[P]&255;s&&(a>0?(F&128)===0?s=!1:a--:(F&128)!==0&&((F&64)===0?s=!1:(a++,(F&32)===0?c++:(a++,(F&16)===0?u++:(a++,(F&8)===0?l++:s=!1))))),i&&(F>127&&F<160?i=!1:F>159&&(F<192||F===215||F===247)&&S++),o&&(f>0?F<64||F===127||F>252?o=!1:f--:F===128||F===160||F>239?o=!1:F>160&&F<224?(h++,m=0,p++,p>y&&(y=p)):F>127?(f++,p=0,m++,m>w&&(w=m)):(p=0,m=0))}return s&&a>0&&(s=!1),o&&f>0&&(o=!1),s&&(D||c+u+l>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||y>=3||w>=3)?n.SHIFT_JIS:i&&o?y===2&&h===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(a,c,u,l,f,h){if(a==="%%")return"%";if(t[++i]!==void 0){a=l?parseInt(l.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=t[i];break;case"c":m=t[i][0];break;case"f":m=parseFloat(t[i]).toFixed(a);break;case"p":m=parseFloat(t[i]).toPrecision(a);break;case"e":m=parseFloat(t[i]).toExponential(a);break;case"x":m=parseInt(t[i]).toString(p||16);break;case"d":m=parseFloat(parseInt(t[i],p||10).toPrecision(a)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var y=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";m.length<y;)m=c!==void 0?m+w:w+m;return m}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return fn.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=_t.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=_t.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=_t.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Ee=UQ;var jQ=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ee.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),ae=jQ;var HQ=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Y("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Y("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Y("row lengths do not match");s=o,c++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[o]=!0,o++;else if(e.substring(u,u+r.length)===r)u+=r.length,i[o]=!1,o++;else throw new Y("illegal character encountered: "+e.substring(u));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Y("row lengths do not match");c++}for(var l=new n(a,c),f=0;f<o;f++)i[f]&&l.set(Math.floor(f%a),Math.floor(f/a));return l},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Y("input matrix dimensions do not match");for(var t=new yt(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,c=e.getRow(o,t).getBitArray(),u=0;u<r;u++)i[a+u]^=c[u]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Y("Left and top must be nonnegative");if(i<1||r<1)throw new Y("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new Y("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,u=t;u<s;u++)for(var l=u*a,f=e;f<o;f++)c[l+Math.floor(f/32)]|=1<<(f&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new yt(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){be.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new yt(e),i=new yt(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,a=-1,c=-1,u=0;u<t;u++)for(var l=0;l<r;l++){var f=i[u*r+l];if(f!==0){if(u<s&&(s=u),u>c&&(c=u),l*32<o){for(var h=0;(f<<31-h&4294967295)===0;)h++;l*32+h<o&&(o=l*32+h)}if(l*32+31>a){for(var h=31;!(f>>>h);)h--;l*32+h>a&&(a=l*32+h)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Xe.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Xe.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new ae,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Et=HQ;var $Q=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GQ=function(n){$Q(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(lt),V=GQ;var zQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WQ=function(n){zQ(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new yt(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<u&&r.set(c);else for(var l=s[0]&255,f=s[1]&255,c=1;c<o-1;c++){var h=s[c+1]&255;(f*4-l-h)/2<u&&r.set(c),l=f,f=h}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new Et(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),u=t.getRow(c,this.luminances),l=Math.floor(r*4/5),f=Math.floor(r/5);f<l;f++){var h=u[f]&255;s[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(s),m=t.getMatrix(),a=0;a<i;a++)for(var y=a*r,f=0;f<r;f++){var h=m[y+f]&255;h<p&&o.set(f,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,a=0;a<r;a++)t[a]>s&&(o=a,s=t[a]),t[a]>i&&(i=t[a]);for(var c=0,u=0,a=0;a<r;a++){var l=a-o,f=t[a]*l*l;f>u&&(c=a,u=f)}if(o>c){var h=o;o=c,c=h}if(c-o<=r/16)throw new V;for(var p=c-1,m=-1,a=c-1;a>o;a--){var y=a-o,f=y*y*(c-a)*(i-t[a]);f>m&&(p=a,m=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(TS),DS=WQ;var qQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KQ=function(n){qQ(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,r,i),u=new Et(r,i);e.calculateThresholdForBlock(o,s,a,r,i,c,u),this.matrix=u}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,a,c){for(var u=s-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,f=0;f<i;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var p=e.cap(f,2,i-3),m=0;m<r;m++){var y=m<<e.BLOCK_SIZE_POWER;y>l&&(y=l);for(var w=e.cap(m,2,r-3),S=0,D=-2;D<=2;D++){var P=a[p+D];S+=P[w-2]+P[w-1]+P[w]+P[w+1]+P[w+2]}var F=S/25;e.thresholdBlock(t,y,h,F,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,a){for(var c=0,u=i*s+r;c<e.BLOCK_SIZE;c++,u+=s)for(var l=0;l<e.BLOCK_SIZE;l++)(t[u+l]&255)<=o&&a.set(r+l,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,u=new Array(i),l=0;l<i;l++){u[l]=new Int32Array(r);var f=l<<e.BLOCK_SIZE_POWER;f>a&&(f=a);for(var h=0;h<r;h++){var p=h<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var m=0,y=255,w=0,S=0,D=f*o+p;S<e.BLOCK_SIZE;S++,D+=o){for(var P=0;P<e.BLOCK_SIZE;P++){var F=t[D+P]&255;m+=F,F<y&&(y=F),F>w&&(w=F)}if(w-y>e.MIN_DYNAMIC_RANGE)for(S++,D+=o;S<e.BLOCK_SIZE;S++,D+=o)for(var P=0;P<e.BLOCK_SIZE;P++)m+=t[D+P]&255}var H=m>>e.BLOCK_SIZE_POWER*2;if(w-y<=e.MIN_DYNAMIC_RANGE&&(H=y/2,l>0&&h>0)){var $=(u[l-1][h]+2*u[l][h-1]+u[l-1][h-1])/4;y<$&&(H=$)}u[l][h]=H}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(DS),RS=KQ;var YQ=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new yc("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new yc("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new yc("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new ae,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},n}(),jo=YQ;var XQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QQ=function(n){XQ(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(jo),_c=QQ;var ZQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UF=function(n){ZQ(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,c=0,u=t.length;a<u;a+=4,c++){var l=void 0,f=t[a+3];if(f===0)l=255;else{var h=t[a],p=t[a+1],m=t[a+2];l=306*h+601*p+117*m+512>>10}s[c]=l}else for(var a=0,c=0,y=t.length;a<y;a+=4,c++){var l=void 0,f=t[a+3];if(f===0)l=255;else{var h=t[a],p=t[a+1],m=t[a+2];l=306*h+601*p+117*m+512>>10}s[c]=255-l}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Y("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=c,r.height=u,i.translate(c/2,u/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new _c(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(jo);var jF=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}();var er=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},tr=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},JQ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$r=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return er(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,u,l,f,h;return tr(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(r=JQ(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(m){f={error:m}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return er(this,void 0,void 0,function(){var e;return tr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new jF(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return er(this,void 0,void 0,function(){var t;return tr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return er(this,void 0,void 0,function(){return tr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return er(this,void 0,void 0,function(){var r,i;return tr(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return er(this,void 0,void 0,function(){var r;return tr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return er(this,void 0,void 0,function(){var r,i;return tr(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return er(this,void 0,void 0,function(){return tr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return er(this,void 0,void 0,function(){var i,o;return tr(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return er(this,void 0,void 0,function(){var i;return tr(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return er(this,void 0,void 0,function(){var i;return tr(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return er(this,void 0,void 0,function(){var r;return tr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return er(this,void 0,void 0,function(){var t;return tr(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new gr("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new gr("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new gr("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new gr("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new gr("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new gr("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new gr("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new gr("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new gr("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new gr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return er(this,void 0,void 0,function(){return tr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return er(this,void 0,void 0,function(){return tr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new V("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(h){var u=t&&h instanceof V,l=h instanceof dt||h instanceof q,f=l&&r;if(u||f)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(h)}};return new Promise(function(s,a){return o(s,a)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof dt||c instanceof q,a=c instanceof V;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e),r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var i=this.getCaptureCanvas(e),o=new UF(i,r),s=new RS(o);return new SS(s)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}();var eZ=function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=be.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=be.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);be.arraycopy(t,0,r,0,t.length),be.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Ke=eZ;var HF=function(n){return n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",n}(HF||{}),X=HF;var $F=function(n){return n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",n}($F||{}),xt=$F;var tZ=function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Ho=tZ;var nZ=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Y;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Ec=nZ;var rZ=function(){function n(e,t){if(t.length===0)throw new Y;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),be.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=Ec.addOrSubtract(r,s)}return r}r=t[0];for(var a=t.length,c=this.field,i=1;i<a;i++)r=Ec.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;be.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=Ec.addOrSubtract(t[a-s],r[a]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,c=0;c<r;c++)for(var u=t[c],l=0;l<o;l++)s[c+l]=Ec.addOrSubtract(s[c+l],a.multiply(u,i[l]));return new n(a,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Y;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Y("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Y("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(a,c),l=t.buildMonomial(a,c);r=r.addOrSubtract(l),i=i.addOrSubtract(u)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Gr=rZ;var iZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oZ=function(n){iZ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(lt),wh=oZ;var sZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aZ=function(n){sZ(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,c=0;c<r;c++)s[c]=a,a*=2,a>=r&&(a^=t,a&=r-1);o.expTable=s;for(var u=new Int32Array(r),c=0;c<r-1;c++)u[s[c]]=c;return o.logTable=u,o.zero=new Gr(o,Int32Array.from([0])),o.one=new Gr(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Y;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Gr(this,i)},e.prototype.inverse=function(t){if(t===0)throw new wh;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+de.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Ec),Ht=aZ;var cZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uZ=function(n){cZ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(lt),ml=uZ;var lZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dZ=function(n){lZ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(lt),bn=dZ;var fZ=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Gr(r,e),o=new Int32Array(t),s=!0,a=0;a<t;a++){var c=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var u=new Gr(r,o),l=this.runEuclideanAlgorithm(r.buildMonomial(t,1),u,t),f=l[0],h=l[1],p=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,p),a=0;a<p.length;a++){var y=e.length-1-r.log(p[a]);if(y<0)throw new ml("Bad error location");e[y]=Ht.addOrSubtract(e[y],m[a])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,a=t,c=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var l=s,f=c;if(s=a,c=u,s.isZero())throw new ml("r_{i-1} was zero");a=l;for(var h=o.getZero(),p=s.getCoefficient(s.getDegree()),m=o.inverse(p);a.getDegree()>=s.getDegree()&&!a.isZero();){var y=a.getDegree()-s.getDegree(),w=o.multiply(a.getCoefficient(a.getDegree()),m);h=h.addOrSubtract(o.buildMonomial(y,w)),a=a.addOrSubtract(s.multiplyByMonomial(y,w))}if(u=h.multiply(c).addOrSubtract(f),a.getDegree()>=s.getDegree())throw new bn("Division algorithm failed to reduce polynomial?")}var S=u.getCoefficient(0);if(S===0)throw new ml("sigmaTilde(0) was zero");var D=o.inverse(S),P=u.multiplyScalar(D),F=a.multiplyScalar(D);return[P,F]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new ml("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(t[s]),c=1,u=0;u<r;u++)if(s!==u){var l=o.multiply(t[u],a),f=(l&1)===0?l|1:l&-2;c=o.multiply(c,f)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},n}(),$o=fZ;var $n=function(n){return n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY",n}($n||{}),hZ=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),a=new Ho(o,s,null,null);return a.setNumBits(i.length),a},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=$n.UPPER,i=$n.UPPER,o="",s=0;s<t;)if(i===$n.BINARY){if(t-s<5)break;var a=n.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(t-s<8){s=t;break}var u=n.readCode(e,s,8);o+=Ee.castAsNonUtf8Char(u),s+=8}i=r}else{var l=i===$n.DIGIT?4:5;if(t-s<l)break;var u=n.readCode(e,s,l);s+=l;var f=n.getCharacter(i,u);f.startsWith("CTRL_")?(r=i,i=n.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o},n.getTable=function(e){switch(e){case"L":return $n.LOWER;case"P":return $n.PUNCT;case"M":return $n.MIXED;case"D":return $n.DIGIT;case"B":return $n.BINARY;case"U":default:return $n.UPPER}},n.getCharacter=function(e,t){switch(e){case $n.UPPER:return n.UPPER_TABLE[t];case $n.LOWER:return n.LOWER_TABLE[t];case $n.MIXED:return n.MIXED_TABLE[t];case $n.PUNCT:return n.PUNCT_TABLE[t];case $n.DIGIT:return n.DIGIT_TABLE[t];default:throw new bn("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Ht.AZTEC_DATA_10):(r=12,t=Ht.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new q;for(var s=e.length%r,a=new Int32Array(o),c=0;c<o;c++,s+=r)a[c]=n.readCode(e,s,r);try{var u=new $o(t);u.decode(a,o-i)}catch(w){throw new q(w)}for(var l=(1<<r)-1,f=0,c=0;c<i;c++){var h=a[c];if(h===0||h===l)throw new q;(h===1||h===l-1)&&f++}for(var p=new Array(i*r-f),m=0,c=0;c<i;c++){var h=a[c];if(h===1||h===l-1)p.fill(h>1,m,m+r-1),m+=r-1;else for(var y=r-1;y>=0;--y)p[m++]=(h&1<<y)!==0}return p},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*de.truncDivision(de.truncDivision(i,2)-1,15),u=i/2,l=de.truncDivision(c,2),a=0;a<u;a++){var f=a+de.truncDivision(a,15);o[u-a-1]=l-f-1,o[u+a]=l+f+1}for(var a=0,h=0;a<r;a++){for(var p=(r-a)*4+(t?9:12),m=a*2,y=i-1-m,w=0;w<p;w++)for(var S=w*2,D=0;D<2;D++)s[h+S+D]=e.get(o[m+D],o[m+w]),s[h+2*p+S+D]=e.get(o[m+w],o[y-D]),s[h+4*p+S+D]=e.get(o[y-D],o[y-w]),s[h+6*p+S+D]=e.get(o[y-w],o[m+D]);h+=p*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),t1=hZ;var pZ=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n}(),De=pZ;var gZ=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ih=gZ;var mZ=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Ih.floatToIntBits(this.x)+Ih.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=t&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},n.distance=function(e,t){return De.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n}(),Q=mZ;var vZ=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),wc=vZ;var yZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_Z=function(n){yZ(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(wc),NS=_Z;var EZ=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,u=!1,l=!1,f=!1,h=this.width,p=this.height;s;){s=!1;for(var m=!0;(m||!c)&&t<h;)m=this.containsBlackPoint(r,i,t,!1),m?(t++,s=!0,c=!0):c||t++;if(t>=h){o=!0;break}for(var y=!0;(y||!u)&&i<p;)y=this.containsBlackPoint(e,t,i,!0),y?(i++,s=!0,u=!0):u||i++;if(i>=p){o=!0;break}for(var w=!0;(w||!l)&&e>=0;)w=this.containsBlackPoint(r,i,e,!1),w?(e--,s=!0,l=!0):l||e--;if(e<0){o=!0;break}for(var S=!0;(S||!f)&&r>=0;)S=this.containsBlackPoint(e,t,r,!0),S?(r--,s=!0,f=!0):f||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var D=t-e,P=null,F=1;P===null&&F<D;F++)P=this.getBlackPointOnSegment(e,i-F,e+F,i);if(P==null)throw new V;for(var H=null,F=1;H===null&&F<D;F++)H=this.getBlackPointOnSegment(e,r+F,e+F,r);if(H==null)throw new V;for(var $=null,F=1;$===null&&F<D;F++)$=this.getBlackPointOnSegment(t,r+F,t-F,r);if($==null)throw new V;for(var T=null,F=1;T===null&&F<D;F++)T=this.getBlackPointOnSegment(t,i-F,t-F,i);if(T==null)throw new V;return this.centerEdges(T,P,$,H)}else throw new V},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=De.round(De.distance(e,t,r,i)),s=(r-e)/o,a=(i-t)/o,c=this.image,u=0;u<o;u++){var l=De.round(e+u*s),f=De.round(t+u*a);if(c.get(l,f))return new Q(l,f)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),a=t.getX(),c=t.getY(),u=r.getX(),l=r.getY(),f=i.getX(),h=i.getY(),p=n.CORR;return o<this.width/2?[new Q(f-p,h+p),new Q(a+p,c+p),new Q(u-p,l-p),new Q(o+p,s-p)]:[new Q(f+p,h+p),new Q(a+p,c-p),new Q(u-p,l+p),new Q(o-p,s-p)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var a=e;a<=t;a++)if(o.get(r,a))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),vl=EZ;var wZ=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new V;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new V;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n}(),n1=wZ;var IZ=function(){function n(e,t,r,i,o,s,a,c,u){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=u}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,a,c,u,l,f,h,p,m,y,w){var S=n.quadrilateralToSquare(e,t,r,i,o,s,a,c),D=n.squareToQuadrilateral(u,l,f,h,p,m,y,w);return D.times(S)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,f=this.a33,h=0;h<t;h+=2){var p=e[h],m=e[h+1],y=o*p+c*m+f;e[h]=(r*p+s*m+u)/y,e[h+1]=(i*p+a*m+l)/y}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var m=e[p],y=t[p],w=o*m+c*y+f;e[p]=(r*m+s*y+u)/w,t[p]=(i*m+a*y+l)/w}},n.squareToQuadrilateral=function(e,t,r,i,o,s,a,c){var u=e-r+o-a,l=t-i+s-c;if(u===0&&l===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var f=r-o,h=a-o,p=i-s,m=c-s,y=f*m-h*p,w=(u*m-h*l)/y,S=(f*l-u*p)/y;return new n(r-e+w*r,a-e+S*a,e,i-t+w*i,c-t+S*c,t,w,S,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,a,c){return n.squareToQuadrilateral(e,t,r,i,o,s,a,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),Ch=IZ;var CZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xZ=function(n){CZ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,a,c,u,l,f,h,p,m,y,w,S,D,P,F){var H=Ch.quadrilateralToQuadrilateral(o,s,a,c,u,l,f,h,p,m,y,w,S,D,P,F);return this.sampleGridWithTransform(t,r,i,H)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new V;for(var s=new Et(r,i),a=new Float32Array(2*r),c=0;c<i;c++){for(var u=a.length,l=c+.5,f=0;f<u;f+=2)a[f]=f/2+.5,a[f+1]=l;o.transformPoints(a),n1.checkAndNudgePoints(t,a);try{for(var f=0;f<u;f+=2)t.get(Math.floor(a[f]),Math.floor(a[f+1]))&&s.set(f/2,c)}catch{throw new V}}return s},e}(n1),OS=xZ;var AZ=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new OS,n}(),Ic=AZ;var nr=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Q(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}();var SZ=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new NS(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,a){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(de.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new V},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new $o(Ht.AZTEC_PARAM);c.decode(s,o)}catch{throw new V}for(var u=0,a=0;a<i;a++)u=(u<<4)+s[a];return u},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),u=this.getFirstDifferent(i,s,-1,1),l=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(l,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(a,c,u,l))break}t=a,r=c,i=u,o=l,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var h=new Q(t.getX()+.5,t.getY()-.5),p=new Q(r.getX()+.5,r.getY()+.5),m=new Q(i.getX()-.5,i.getY()+.5),y=new Q(o.getX()-.5,o.getY()-.5);return this.expandSquare([h,p,m,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new vl(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new nr(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new nr(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new nr(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new nr(s-7,a-7),!1,-1,-1).toResultPoint()}var c=De.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=De.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new vl(this.image,15,c,u).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new nr(c+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new nr(c+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new nr(c-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new nr(c-7,u-7),!1,-1,-1).toResultPoint()}return c=De.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=De.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new nr(c,u)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=Ic.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,u,c,u,u,c,u,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,a=e.getX(),c=e.getY(),u=s*(t.getX()-e.getX())/o,l=s*(t.getY()-e.getY())/o,f=0;f<r;f++)this.image.get(De.round(a+f*u),De.round(c+f*l))&&(i|=1<<r-f-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new nr(e.getX()-o,e.getY()+o),t=new nr(t.getX()-o,t.getY()-o),r=new nr(r.getX()+o,r.getY()-o),i=new nr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,t);return a!==s||(a=this.getColor(t,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,a=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),l=Math.ceil(r),f=0;f<l;f++)a+=i,c+=o,this.image.get(De.round(a),De.round(c))!==u&&s++;var h=s/r;return h>.1&&h<.9?0:h<=.1===u?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new nr(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Q(a+i*o,c+i*s),l=new Q(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Q(a+i*o,c+i*s),h=new Q(a-i*o,c-i*s),p=[u,f,l,h];return p},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=De.round(e.getX()),r=De.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return De.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return De.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(de.truncDivision(this.nbLayers-4,8)+1)+15},n}(),PS=SZ;var TZ=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new PS(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new t1().decode(a)}catch(f){r=f}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new t1().decode(a)}catch(f){throw r??f}var c=new Ke(s.getText(),s.getRawBytes(),s.getNumBits(),o,X.AZTEC,be.currentTimeMillis()),u=s.getByteSegments();u!=null&&c.putMetadata(xt.BYTE_SEGMENTS,u);var l=s.getECLevel();return l!=null&&c.putMetadata(xt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Ve.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),yl=TZ;var bZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ITe=function(n){bZ(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new yl,t)||this}return e}($r);var DZ=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Ve.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(xt.ORIENTATION)===!0&&(a=a+s.get(xt.ORIENTATION)%360),o.putMetadata(xt.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var u=i.getHeight(),l=0;l<c.length;l++)c[l]=new Q(u-c[l].getY()-1,c[l].getX());return o}else throw new V}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new yt(r),s=t&&t.get(Ve.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var u=Math.trunc(i/2),l=0;l<c;l++){var f=Math.trunc((l+1)/2),h=(l&1)===0,p=u+a*(h?f:-f);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var m=function(D){if(D===1&&(o.reverse(),t&&t.get(Ve.NEED_RESULT_POINT_CALLBACK)===!0)){var P=new Map;t.forEach(function($,T){return P.set(T,$)}),P.delete(Ve.NEED_RESULT_POINT_CALLBACK),t=P}try{var F=y.decodeRow(p,o,t);if(D===1){F.putMetadata(xt.ORIENTATION,180);var H=F.getResultPoints();H!==null&&(H[0]=new Q(r-H[0].getX()-1,H[0].getY()),H[1]=new Q(r-H[1].getX()-1,H[1].getY()))}return{value:F}}catch{}},y=this,w=0;w<2;w++){var S=m(w);if(typeof S=="object")return S.value}}throw new V},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new V;for(var a=!e.get(t),c=0,u=t;u<s;){if(e.get(u)!==a)r[c]++;else{if(++c===i)break;r[c]=1,a=!a}u++}if(!(c===i||c===i-1&&u===s))throw new V},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new V;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var f=e[l],h=t[l]*c,p=f>h?f-h:h-f;if(p>r)return Number.POSITIVE_INFINITY;u+=p}return u/o},n}(),ot=DZ;var RZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NZ=function(n){RZ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,u=6,l=i;l<r;l++)if(t.get(l)!==c)s[o]++;else{if(o===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=ot.patternMatchVariance(s,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=p)}if(h>=0&&t.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,h]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new V},e.decodeCode=function(t,r,i){ot.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],u=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,s=a)}if(s>=0)return s;throw new V},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(Ve.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],c=0,u=new Uint8Array(20);u[c++]=a;var l;switch(a){case e.CODE_START_A:l=e.CODE_CODE_A;break;case e.CODE_START_B:l=e.CODE_CODE_B;break;case e.CODE_START_C:l=e.CODE_CODE_C;break;default:throw new q}for(var f=!1,h=!1,p="",m=s[0],y=s[1],w=Int32Array.from([0,0,0,0,0,0]),S=0,D=0,P=a,F=0,H=!0,$=!1,T=!1;!f;){var x=h;switch(h=!1,S=D,D=e.decodeCode(r,w,y),u[c++]=D,D!==e.CODE_STOP&&(H=!0),D!==e.CODE_STOP&&(F++,P+=F*D),m=y,y+=w.reduce(function(Qi,Zi){return Qi+Zi},0),D){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new q}switch(l){case e.CODE_CODE_A:if(D<64)T===$?p+=String.fromCharCode(32+D):p+=String.fromCharCode(32+D+128),T=!1;else if(D<96)T===$?p+=String.fromCharCode(D-64):p+=String.fromCharCode(D+64),T=!1;else switch(D!==e.CODE_STOP&&(H=!1),D){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$&&T?($=!0,T=!1):$&&T?($=!1,T=!1):T=!0;break;case e.CODE_SHIFT:h=!0,l=e.CODE_CODE_B;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(D<96)T===$?p+=String.fromCharCode(32+D):p+=String.fromCharCode(32+D+128),T=!1;else switch(D!==e.CODE_STOP&&(H=!1),D){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$&&T?($=!0,T=!1):$&&T?($=!1,T=!1):T=!0;break;case e.CODE_SHIFT:h=!0,l=e.CODE_CODE_A;break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(D<100)D<10&&(p+="0"),p+=D;else switch(D!==e.CODE_STOP&&(H=!1),D){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}x&&(l=l===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var b=y-m;if(y=r.getNextUnset(y),!r.isRange(y,Math.min(r.getSize(),y+(y-m)/2),!1))throw new V;if(P-=F*S,P%103!==S)throw new dt;var N=p.length;if(N===0)throw new V;N>0&&H&&(l===e.CODE_CODE_C?p=p.substring(0,N-2):p=p.substring(0,N-1));for(var M=(s[1]+s[0])/2,k=m+b/2,R=u.length,Mt=new Uint8Array(R),ir=0;ir<R;ir++)Mt[ir]=u[ir];var Fl=[new Q(M,t),new Q(k,t)];return new Ke(p,Mt,0,Fl,X.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ot),r1=NZ;var OZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PZ=function(n){OZ(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.counters;u.fill(0),this.decodeRowResult="";var l=e.findAsteriskPattern(r,u),f=r.getNextSet(l[1]),h=r.getSize(),p,m;do{e.recordPattern(r,f,u);var y=e.toNarrowWidePattern(u);if(y<0)throw new V;p=e.patternToChar(y),this.decodeRowResult+=p,m=f;try{for(var w=(o=void 0,MS(u)),S=w.next();!S.done;S=w.next()){var D=S.value;f+=D}}catch(R){o={error:R}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var F=MS(u),H=F.next();!H.done;H=F.next()){var D=H.value;P+=D}}catch(R){a={error:R}}finally{try{H&&!H.done&&(c=F.return)&&c.call(F)}finally{if(a)throw a.error}}var $=f-m-P;if(f!==h&&$*2<P)throw new V;if(this.usingCheckDigit){for(var T=this.decodeRowResult.length-1,x=0,b=0;b<T;b++)x+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(b));if(this.decodeRowResult.charAt(T)!==e.ALPHABET_STRING.charAt(x%43))throw new dt;this.decodeRowResult=this.decodeRowResult.substring(0,T)}if(this.decodeRowResult.length===0)throw new V;var N;this.extendedMode?N=e.decodeExtended(this.decodeRowResult):N=this.decodeRowResult;var M=(l[1]+l[0])/2,k=m+P/2;return new Ke(N,null,0,[new Q(M,t),new Q(k,t)],X.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,a=o,c=!1,u=r.length,l=o;l<i;l++)if(t.get(l)!==c)r[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new V},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,a;do{var c=2147483647;try{for(var u=(r=void 0,MS(t)),l=u.next();!l.done;l=u.next()){var f=l.value;f<c&&f>s&&(c=f)}}catch(y){r={error:y}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s=c,a=0;for(var h=0,p=0,m=0;m<o;m++){var f=t[m];f>s&&(p|=1<<o-1-m,a++,h+=f)}if(a===3){for(var m=0;m<o&&a>0;m++){var f=t[m];if(f>s&&(a--,f*2>=h))return-1}return p}}while(a>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=t.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new q;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new q;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="\x7F";else throw new q;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new q;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ot),i1=PZ;var MZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kZ=function(n){MZ(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.findAsteriskPattern(r),l=r.getNextSet(u[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(r,l,h);var y=this.toPattern(h);if(y<0)throw new V;p=this.patternToChar(y),this.decodeRowResult+=p,m=l;try{for(var w=(o=void 0,kS(h)),S=w.next();!S.done;S=w.next()){var D=S.value;l+=D}}catch(b){o={error:b}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}l=r.getNextSet(l)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var F=kS(h),H=F.next();!H.done;H=F.next()){var D=H.value;P+=D}}catch(b){a={error:b}}finally{try{H&&!H.done&&(c=F.return)&&c.call(F)}finally{if(a)throw a.error}}if(l===f||!r.get(l))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var $=this.decodeExtended(this.decodeRowResult),T=(u[1]+u[0])/2,x=m+P/2;return new Ke($,null,0,[new Q(T,t),new Q(x,t)],X.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,u=0,l=i;l<r;l++)if(t.get(l)!==a)o[u]++;else{if(u===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,l]);s+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new V},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=kS(t),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(m){r={error:m}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,l=t.length,f=0;f<l;f++){var h=Math.round(t[f]*9/o);if(h<1||h>4)return-1;if((f&1)===0)for(var p=0;p<h;p++)u=u<<1|1;else u<<=h}return u},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new V},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new q;var a=t.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new q;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new q;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="\x7F";else throw new q;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new q;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new dt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(ot),o1=kZ;var FZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VZ=function(n){FZ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,a=this.decodeStart(r),c=this.decodeEnd(r),u=new ae;e.decodeMiddle(r,a[1],c[0],u);var l=u.toString(),f=null;i!=null&&(f=i.get(Ve.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=l.length,p=!1,m=0;try{for(var y=LZ(f),w=y.next();!w.done;w=y.next()){var S=w.value;if(h===S){p=!0;break}S>m&&(m=S)}}catch(F){o={error:F}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(!p&&h>m&&(p=!0),!p)throw new q;var D=[new Q(a[1],t),new Q(c[0],t)],P=new Ke(l,null,0,D,X.ITF,new Date().getTime());return P},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);r<i;){ot.recordPattern(t,r,s);for(var u=0;u<5;u++){var l=2*u;a[u]=s[l],c[u]=s[l+1]}var f=e.decodeDigit(a);o.append(f.toString()),f=this.decodeDigit(c),o.append(f.toString()),s.forEach(function(h){r+=h})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new V},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new V;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof V&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),a=t.getSize(),c=!1,u=0,l=r;s.fill(0);for(var f=r;f<a;f++)if(t.get(f)!==c)s[u]++;else{if(u===o-1){if(ot.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[l,f];l+=s[0]+s[1],be.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,c=!c}throw new V},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=ot.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ot),s1=VZ;var BZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UZ=function(n){BZ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(r=t.isRange(c,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new q;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new q;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var a=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,u=r,l=o.length,f=i,h=r;h<a;h++)if(t.get(h)!==f)s[c]++;else{if(c===l-1){if(ot.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=s[0]+s[1];for(var p=s.slice(2,s.length),m=0;m<c-1;m++)s[m]=p[m];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new V},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,u=0;u<c;u++){var l=o[u],f=ot.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);f<s&&(s=f,a=u)}if(a>=0)return a;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ot),Xi=UZ;var jZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HZ=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Q((r[0]+r[1])/2,e),new Q(o,e)],u=new Ke(s,null,0,c,X.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<5&&c<a;l++){var f=Xi.decodeDigit(e,s,c,Xi.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,jZ(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<4-l),l!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new V;var y=this.determineCheckDigit(u);if(n.extensionChecksum(r.toString())!==y)throw new V;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new V},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[xt.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n}(),GF=HZ;var $Z=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GZ=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Q((r[0]+r[1])/2,e),new Q(o,e)],u=new Ke(s,null,0,c,X.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<2&&c<a;l++){var f=Xi.decodeDigit(e,s,c,Xi.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,$Z(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<1-l),l!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new V;if(parseInt(r.toString())%4!==u)throw new V;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[xt.ISSUE_NUMBER,parseInt(e)]])},n}(),zF=GZ;var zZ=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Xi.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new GF;return o.decodeRow(e,t,i)}catch{var s=new zF;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),WF=zZ;var WZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qZ=function(n){WZ(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(Ve.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new Q((o[0]+o[1])/2,t);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=c.rowOffset,l=c.resultString;if(s!=null){var f=new Q(u,t);s.foundPossibleResultPoint(f)}var h=e.decodeEnd(r,u);if(s!=null){var p=new Q((h[0]+h[1])/2,t);s.foundPossibleResultPoint(p)}var m=h[1],y=m+(m-h[0]);if(y>=r.getSize()||!r.isRange(m,y,!1))throw new V;var w=l.toString();if(w.length<8)throw new q;if(!e.checkChecksum(w))throw new dt;var S=(o[1]+o[0])/2,D=(h[1]+h[0])/2,P=this.getBarcodeFormat(),F=[new Q(S,t),new Q(D,t)],H=new Ke(w,null,0,F,P,new Date().getTime()),$=0;try{var T=WF.decodeRow(t,r,h[1]);H.putMetadata(xt.UPC_EAN_EXTENSION,T.getText()),H.putAllMetadata(T.getResultMetadata()),H.addResultPoints(T.getResultPoints()),$=T.getText().length}catch{}var x=i==null?null:i.get(Ve.ALLOWED_EAN_EXTENSIONS);if(x!=null){var b=!1;for(var N in x)if($.toString()===N){b=!0;break}if(!b)throw new V}return P===X.EAN_13||X.UPC_A,H},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new q;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new q;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Xi),Pt=qZ;var KZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YZ=function(n){KZ(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=r[1],h=0,p=0;p<6&&f<l;p++){var m=Pt.decodeDigit(t,u,f,Pt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var y=(o=void 0,qF(u)),w=y.next();!w.done;w=y.next()){var S=w.value;f+=S}}catch(H){o={error:H}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}m>=10&&(h|=1<<5-p)}i=e.determineFirstDigit(i,h);var D=Pt.findGuardPattern(t,f,!0,Pt.MIDDLE_PATTERN,new Int32Array(Pt.MIDDLE_PATTERN.length).fill(0));f=D[1];for(var p=0;p<6&&f<l;p++){var m=Pt.decodeDigit(t,u,f,Pt.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var P=(a=void 0,qF(u)),F=P.next();!F.done;F=P.next()){var S=F.value;f+=S}}catch(T){a={error:T}}finally{try{F&&!F.done&&(c=P.return)&&c.call(P)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return X.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Pt),_l=YZ;var XZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QZ=function(n){XZ(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=r[1],h=0;h<4&&f<l;h++){var p=Pt.decodeDigit(t,u,f,Pt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(o=void 0,KF(u)),y=m.next();!y.done;y=m.next()){var w=y.value;f+=w}}catch(F){o={error:F}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}var S=Pt.findGuardPattern(t,f,!0,Pt.MIDDLE_PATTERN,new Int32Array(Pt.MIDDLE_PATTERN.length).fill(0));f=S[1];for(var h=0;h<4&&f<l;h++){var p=Pt.decodeDigit(t,u,f,Pt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var D=(a=void 0,KF(u)),P=D.next();!P.done;P=D.next()){var w=P.value;f+=w}}catch($){a={error:$}}finally{try{P&&!P.done&&(c=D.return)&&c.call(D)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return X.EAN_8},e}(Pt),FS=QZ;var ZZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JZ=function(n){ZZ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new _l,t}return e.prototype.getBarcodeFormat=function(){return X.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Ke(r.substring(1),null,null,t.getResultPoints(),X.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Pt),LS=JZ;var eJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tJ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nJ=function(n){eJ(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a=this.decodeMiddleCounters.map(function(w){return w});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=t.getSize(),u=r[1],l=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(t,a,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var p=(o=void 0,tJ(a)),m=p.next();!m.done;m=p.next()){var y=m.value;u+=y}}catch(w){o={error:w}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}h>=10&&(l|=1<<5-f)}return e.determineNumSysAndCheckDigit(new ae(i),l),u},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Pt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return X.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new ae;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Pt),VS=nJ;var rJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iJ=function(n){rJ(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Ve.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(X.EAN_13)>-1&&o.push(new _l),i.indexOf(X.UPC_A)>-1&&o.push(new LS),i.indexOf(X.EAN_8)>-1&&o.push(new FS),i.indexOf(X.UPC_E)>-1&&o.push(new VS)),o.length===0&&(o.push(new _l),o.push(new LS),o.push(new FS),o.push(new VS)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var a=YF(this.readers),c=a.next();!c.done;c=a.next()){var u=c.value;try{var l=u.decodeRow(t,r,i),f=l.getBarcodeFormat()===X.EAN_13&&l.getText().charAt(0)==="0",h=i==null?null:i.get(Ve.POSSIBLE_FORMATS),p=h==null||h.includes(X.UPC_A);if(f&&p){var m=l.getRawBytes(),y=new Ke(l.getText().substring(1),m,m?m.length:null,l.getResultPoints(),X.UPC_A);return y.putAllMetadata(l.getResultMetadata()),y}return l}catch{}}}catch(w){o={error:w}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new V},e.prototype.reset=function(){var t,r;try{for(var i=YF(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(ot),a1=iJ;var oJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sJ=function(n){oJ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new V;var s=this.codaBarDecodeRow(o.row);if(!s)throw new V;return new Ke(s,null,0,[new Q(o.left,t),new Q(o.right,t)],X.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],c=1,u=1;u<r.length;u++)r[u]===a?c++:(a=r[u],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,u){return(c+u)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(ot),BS=sJ;var aJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cJ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uJ=function(n){aJ(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(ot.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new V},e.count=function(t){return De.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var l=cJ(t),f=l.next();!f.done;f=l.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ot),Go=uJ;var lJ=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),Cc=lJ;var dJ=function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Q(r,o)),this.resultPoints.push(new Q(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),c1=dJ;var fJ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hJ=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var a=fJ(e),c=a.next();!c.done;c=a.next()){var u=c.value;s+=u}}catch(D){i={error:D}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var l=0,f=0,h=e.length,p=0;p<h-1;p++){var m=void 0;for(m=1,f|=1<<p;m<e[p];m++,f&=~(1<<p)){var y=n.combins(s-m-1,h-p-2);if(r&&f===0&&s-m-(h-p-1)>=h-p-1&&(y-=n.combins(s-m-(h-p),h-p-2)),h-p-1>1){for(var w=0,S=s-m-(h-p-2);S>t;S--)w+=n.combins(s-m-S-1,h-p-3);y-=w*(h-1-p)}else s-m>t&&y--;l+=y}s-=m}return l},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n}(),qs=hJ;var pJ=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new yt(r),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var u=e[c],l=u.getLeftChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&i.set(o),o++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)(h&1<<f)!==0&&i.set(o),o++}return i},n}(),XF=pJ;var gJ=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),Ks=gJ;var mJ=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),El=mJ;var vJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yJ=function(n){vJ(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(El),zr=yJ;var _J=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EJ=function(n){_J(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(El),Ys=EJ;var wJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IJ=function(n){wJ(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new q;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(El),xc=IJ;var u1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CJ=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,a,c,u;if(!e)return null;if(e.length<2)throw new V;var l=e.substring(0,2);try{for(var f=u1(n.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===l)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,p[2],e):n.processFixedAI(2,p[1],e)}}catch($){t={error:$}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(e.length<3)throw new V;var m=e.substring(0,3);try{for(var y=u1(n.THREE_DIGIT_DATA_LENGTH),w=y.next();!w.done;w=y.next()){var p=w.value;if(p[0]===m)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,p[2],e):n.processFixedAI(3,p[1],e)}}catch($){i={error:$}}finally{try{w&&!w.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var S=u1(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),D=S.next();!D.done;D=S.next()){var p=D.value;if(p[0]===m)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch($){s={error:$}}finally{try{D&&!D.done&&(a=S.return)&&a.call(S)}finally{if(s)throw s.error}}if(e.length<4)throw new V;var P=e.substring(0,4);try{for(var F=u1(n.FOUR_DIGIT_DATA_LENGTH),H=F.next();!H.done;H=F.next()){var p=H.value;if(p[0]===P)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch($){c={error:$}}finally{try{H&&!H.done&&(u=F.return)&&u.call(F)}finally{if(c)throw c.error}}throw new V},n.processFixedAI=function(e,t,r){if(r.length<e)throw new V;var i=r.substring(0,e);if(r.length<e+t)throw new V;var o=r.substring(e,e+t),s=r.substring(e+t),a="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),a=r.substring(o),c="("+i+")"+s,u=n.parseFieldsInGeneralPurpose(a);return u==null?c:c+u},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),QF=CJ;var xJ=function(){function n(e){this.buffer=new ae,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=QF.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new xc(this.information.getSize(),xc.FNC1,xc.FNC1):new xc(this.information.getSize(),t-1,xc.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new xc(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Ys(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ys(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Ys(this.current.getPosition(),this.buffer.toString()):t=new Ys(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ks(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Ys(this.current.getPosition(),this.buffer.toString());return new Ks(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ks(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ys(this.current.getPosition(),this.buffer.toString());return new Ks(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ks(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ys(this.current.getPosition(),this.buffer.toString());return new Ks(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ks(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new zr(e+5,zr.FNC1);if(t>=5&&t<15)return new zr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new zr(e+7,""+(r+1));if(r>=90&&r<116)return new zr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new q}return new zr(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new zr(e+5,zr.FNC1);if(t>=5&&t<15)return new zr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new zr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new bn("Decoding invalid alphanumeric value: "+r)}return new zr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),wl=xJ;var AJ=function(){function n(e){this.information=e,this.generalDecoder=new wl(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),xh=AJ;var SJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TJ=function(n){SJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(xh),rr=TJ;var bJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DJ=function(n){bJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new ae;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(rr),ZF=DJ;var RJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NJ=function(n){RJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new ae;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(xh),JF=NJ;var OJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PJ=function(n){OJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&t.append("0"),a/=10;t.append(s)},e}(rr),Il=PJ;var MJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kJ=function(n){MJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Il.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var t=new ae;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Il.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Il),l1=kJ;var FJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LJ=function(n){FJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(l1),eL=LJ;var VJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BJ=function(n){VJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(l1),tL=BJ;var UJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jJ=function(n){UJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+rr.GTIN_SIZE)throw new V;var t=new ae;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+rr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+rr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(rr),nL=jJ;var HJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$J=function(n){HJ(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+rr.GTIN_SIZE)throw new V;var t=new ae;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+rr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+rr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+rr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(rr),rL=$J;var GJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zJ=function(n){GJ(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var t=new ae;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Il),zo=zJ;function US(n){try{if(n.get(1))return new ZF(n);if(!n.get(2))return new JF(n);var e=wl.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new eL(n);case 5:return new tL(n)}var t=wl.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new nL(n);case 13:return new rL(n)}var r=wl.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new zo(n,"310","11");case 57:return new zo(n,"320","11");case 58:return new zo(n,"310","13");case 59:return new zo(n,"320","13");case 60:return new zo(n,"310","15");case 61:return new zo(n,"320","15");case 62:return new zo(n,"310","17");case 63:return new zo(n,"320","17")}}catch(i){throw console.log(i),new bn("unknown decoder: "+n)}}var WJ=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),jS=WJ;var qJ=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),iL=qJ;var KJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xs=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YJ=function(n){KJ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof V){if(!this.pairs.length)throw new V;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new V},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Xs(t)),u=c.next();!u.done;u=c.next()){var l=u.value;this.pairs.push(l.getPairs())}}catch(h){i={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(t);f.push(a);try{return this.checkRows(f,s+1)}catch(h){console.log(h)}}}throw new V},e.isValidSequence=function(t){var r,i;try{for(var o=Xs(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(t.length>a.length)){for(var c=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==a[u]){c=!1;break}if(c)return!0}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new iL(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,a,c,u;try{for(var l=Xs(r),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.getPairs().length!==t.length){var p=!0;try{for(var m=(s=void 0,Xs(h.getPairs())),y=m.next();!y.done;y=m.next()){var w=y.value,S=!1;try{for(var D=(c=void 0,Xs(t)),P=D.next();!P.done;P=D.next()){var F=P.value;if(jS.equals(w,F)){S=!0;break}}}catch(H){c={error:H}}finally{try{P&&!P.done&&(u=D.return)&&u.call(D)}finally{if(c)throw c.error}}S||(p=!1)}}catch(H){s={error:H}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}}}}catch(H){i={error:H}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,a,c,u;try{for(var l=Xs(r),f=l.next();!f.done;f=l.next()){var h=f.value,p=!0;try{for(var m=(s=void 0,Xs(t)),y=m.next();!y.done;y=m.next()){var w=y.value,S=!1;try{for(var D=(c=void 0,Xs(h.getPairs())),P=D.next();!P.done;P=D.next()){var F=P.value;if(w.equals(F)){S=!0;break}}}catch(H){c={error:H}}finally{try{P&&!P.done&&(u=D.return)&&u.call(D)}finally{if(c)throw c.error}}if(!S){p=!1;break}}}catch(H){s={error:H}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}if(p)return!0}}catch(H){i={error:H}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=XF.buildBitArray(t),i=US(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new Ke(o,null,null,c,X.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var u=c.getRightChar();u!=null&&(o+=u.getChecksumPortion(),s++)}o%=211;var l=211*(s-4)+o;return l===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var u=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new V;var l;try{l=this.decodeDataCharacter(t,s,o,!1)}catch(f){l=null,console.log(f)}return new jS(u,l,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var c=r[r.length-1];a=c.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var l=!1;a<s&&(l=!t.get(a),!!l);)a++;for(var f=0,h=a,p=a;p<s;p++)if(t.get(p)!==l)o[f]++;else{if(f===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=h,this.startEnd[1]=p;return}u&&e.reverseCounters(o),h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,l=!l}throw new V},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var u=this.getDecodeFinderCounters();be.arraycopy(u,0,u,1,u.length-1),u[0]=o;var l;try{l=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new c1(l,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,u=s.length-1;c<u;c++,u--){var l=s[c];s[c]=s[u],s[u]=l}}var f=17,h=De.sum(new Int32Array(s))/f,p=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new V;for(var m=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var D=1*s[c]/h,P=D+.5;if(P<1){if(D<.3)throw new V;P=1}else if(P>8){if(D>8.7)throw new V;P=8}var F=c/2;(c&1)===0?(m[F]=P,w[F]=D-P):(y[F]=P,S[F]=D-P)}this.adjustOddEvenCounts(f);for(var H=4*r.getValue()+(i?0:2)+(o?0:1)-1,$=0,T=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var x=e.WEIGHTS[H][2*c];T+=m[c]*x}$+=m[c]}for(var b=0,c=y.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var x=e.WEIGHTS[H][2*c+1];b+=y[c]*x}var N=T+b;if(($&1)!==0||$>13||$<4)throw new V;var M=(13-$)/2,k=e.SYMBOL_WIDEST[M],R=9-k,Mt=qs.getRSSvalue(m,k,!0),ir=qs.getRSSvalue(y,R,!1),Fl=e.EVEN_TOTAL_SUBSET[M],Qi=e.GSUM[M],Zi=Mt*Fl+ir+Qi;return new Cc(Zi,N)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=De.sum(new Int32Array(this.getOddCounts())),i=De.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var u=r+i-t,l=(r&1)===1,f=(i&1)===0;if(u===1)if(l){if(f)throw new V;s=!0}else{if(!f)throw new V;c=!0}else if(u===-1)if(l){if(f)throw new V;o=!0}else{if(!f)throw new V;a=!0}else if(u===0){if(l){if(!f)throw new V;r<i?(o=!0,c=!0):(s=!0,a=!0)}else if(f)throw new V}else throw new V;if(o){if(s)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Go),HS=YJ;var XJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QJ=function(n){XJ(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Cc),oL=QJ;var ZJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$S=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JJ=function(n){ZJ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var l=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,l),r.reverse();try{for(var f=$S(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var m=(a=void 0,$S(this.possibleRightPairs)),y=m.next();!y.done;y=m.next()){var w=y.value;if(w.getCount()>1&&e.checkChecksum(p,w))return e.constructResult(p,w)}}catch(S){a={error:S}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}}}catch(S){o={error:S}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}throw new V},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var a=$S(t),c=a.next();!c.done;c=a.next()){var u=c.value;if(u.getValue()===r.getValue()){u.incrementCount(),s=!0;break}}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new ae,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var u=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*u:u}c=10-c%10,c===10&&(c=0),s.append(c.toString());var l=t.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new Ke(s.toString(),null,0,[l[0],l[1],f[0],f[1]],X.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),a=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(Ve.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(s[0]+s[1])/2;r&&(u=t.getSize()-1-u),c.foundPossibleResultPoint(new Q(u,i))}var l=this.decodeDataCharacter(t,a,!0),f=this.decodeDataCharacter(t,a,!1);return new oL(1597*l.getValue()+f.getValue(),l.getChecksumPortion()+4*f.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)ot.recordPatternInReverse(t,r.getStartEnd()[0],o);else{ot.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var u=o[a];o[a]=o[c],o[c]=u}}for(var l=i?16:15,f=De.sum(new Int32Array(o))/l,h=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var w=o[a]/f,S=Math.floor(w+.5);S<1?S=1:S>8&&(S=8);var D=Math.floor(a/2);(a&1)===0?(h[D]=S,m[D]=w-S):(p[D]=S,y[D]=w-S)}this.adjustOddEvenCounts(i,l);for(var P=0,F=0,a=h.length-1;a>=0;a--)F*=9,F+=h[a],P+=h[a];for(var H=0,$=0,a=p.length-1;a>=0;a--)H*=9,H+=p[a],$+=p[a];var T=F+3*H;if(i){if((P&1)!==0||P>12||P<4)throw new V;var x=(12-P)/2,b=e.OUTSIDE_ODD_WIDEST[x],N=9-b,M=qs.getRSSvalue(h,b,!1),k=qs.getRSSvalue(p,N,!0),R=e.OUTSIDE_EVEN_TOTAL_SUBSET[x],Mt=e.OUTSIDE_GSUM[x];return new Cc(M*R+k+Mt,T)}else{if(($&1)!==0||$>10||$<4)throw new V;var x=(10-$)/2,b=e.INSIDE_ODD_WIDEST[x],N=9-b,M=qs.getRSSvalue(h,b,!0),k=qs.getRSSvalue(p,N,!1),ir=e.INSIDE_ODD_TOTAL_SUBSET[x],Mt=e.INSIDE_GSUM[x];return new Cc(k*ir+M+Mt,T)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,a=0;a<o&&(s=!t.get(a),r!==s);)a++;for(var c=0,u=a,l=a;l<o;l++)if(t.get(l)!==s)i[c]++;else{if(c===3){if(Go.isFinderPattern(i))return[u,l];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new V},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),a=o[0]-1;a>=0&&s!==t.get(a);)a--;a++;var c=o[0]-a,u=this.getDecodeFinderCounters(),l=new Int32Array(u.length);be.arraycopy(u,0,l,1,u.length-1),l[0]=c;var f=this.parseFinderValue(l,e.FINDER_PATTERNS),h=a,p=o[1];return i&&(h=t.getSize()-1-h,p=t.getSize()-1-p),new c1(f,[a,o[1]],h,p,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=De.sum(new Int32Array(this.getOddCounts())),o=De.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,u=!1;t?(i>12?a=!0:i<4&&(s=!0),o>12?u=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?u=!0:o<4&&(c=!0));var l=i+o-r,f=(i&1)===(t?1:0),h=(o&1)===1;if(l===1)if(f){if(h)throw new V;a=!0}else{if(!h)throw new V;u=!0}else if(l===-1)if(f){if(h)throw new V;s=!0}else{if(!h)throw new V;c=!0}else if(l===0){if(f){if(!h)throw new V;i<o?(s=!0,u=!0):(a=!0,c=!0)}else if(h)throw new V}else throw new V;if(s){if(a)throw new V;Go.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Go.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new V;Go.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Go.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Go),d1=JJ;var eee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tee=function(n){eee(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Ve.POSSIBLE_FORMATS):null,o=t&&t.get(Ve.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(Ve.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(X.EAN_13)||i.includes(X.UPC_A)||i.includes(X.EAN_8)||i.includes(X.UPC_E))&&r.readers.push(new a1(t)),i.includes(X.CODE_39)&&r.readers.push(new i1(o,s)),i.includes(X.CODE_93)&&r.readers.push(new o1),i.includes(X.CODE_128)&&r.readers.push(new r1),i.includes(X.ITF)&&r.readers.push(new s1),i.includes(X.CODABAR)&&r.readers.push(new BS),i.includes(X.RSS_14)&&r.readers.push(new d1),i.includes(X.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new HS))),r.readers.length===0&&(r.readers.push(new a1(t)),r.readers.push(new i1),r.readers.push(new o1),r.readers.push(new a1(t)),r.readers.push(new r1),r.readers.push(new s1),r.readers.push(new d1)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(ot),Qs=tee;var nee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FRe=function(n){nee(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Qs(r),t,r)||this}return e}($r);var sL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},st=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}();var et=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}();var ree=function(){function n(e,t,r,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var u=0,l=s.getECCodewords(),f=s.getECBlocks();try{for(var h=sL(f),p=h.next();!p.done;p=h.next()){var m=p.value;u+=m.getCount()*(m.getDataCodewords()+l)}}catch(y){a={error:y}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new q;try{for(var o=sL(n.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new q},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new st(5,new et(1,3))),new n(2,12,12,10,10,new st(7,new et(1,5))),new n(3,14,14,12,12,new st(10,new et(1,8))),new n(4,16,16,14,14,new st(12,new et(1,12))),new n(5,18,18,16,16,new st(14,new et(1,18))),new n(6,20,20,18,18,new st(18,new et(1,22))),new n(7,22,22,20,20,new st(20,new et(1,30))),new n(8,24,24,22,22,new st(24,new et(1,36))),new n(9,26,26,24,24,new st(28,new et(1,44))),new n(10,32,32,14,14,new st(36,new et(1,62))),new n(11,36,36,16,16,new st(42,new et(1,86))),new n(12,40,40,18,18,new st(48,new et(1,114))),new n(13,44,44,20,20,new st(56,new et(1,144))),new n(14,48,48,22,22,new st(68,new et(1,174))),new n(15,52,52,24,24,new st(42,new et(2,102))),new n(16,64,64,14,14,new st(56,new et(2,140))),new n(17,72,72,16,16,new st(36,new et(4,92))),new n(18,80,80,18,18,new st(48,new et(4,114))),new n(19,88,88,20,20,new st(56,new et(4,144))),new n(20,96,96,22,22,new st(68,new et(4,174))),new n(21,104,104,24,24,new st(56,new et(6,136))),new n(22,120,120,18,18,new st(68,new et(6,175))),new n(23,132,132,20,20,new st(62,new et(8,163))),new n(24,144,144,22,22,new st(62,new et(8,156),new et(2,155))),new n(25,8,18,6,16,new st(7,new et(1,5))),new n(26,8,32,6,14,new st(11,new et(1,10))),new n(27,12,26,10,24,new st(14,new et(1,16))),new n(28,12,36,10,16,new st(18,new et(1,22))),new n(29,16,36,14,16,new st(24,new et(1,32))),new n(30,16,48,14,22,new st(28,new et(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),aL=ree;var iee=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new q;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Et(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return aL.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,u=!1,l=!1;do if(r===o&&i===0&&!a)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!u)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&7)===4&&!l)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,l=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new q;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Y("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,a=r/o|0,c=s*i,u=a*o,l=new Et(u,c),f=0;f<s;++f)for(var h=f*i,p=0;p<a;++p)for(var m=p*o,y=0;y<i;++y)for(var w=f*(i+2)+1+y,S=h+y,D=0;D<o;++D){var P=p*(o+2)+1+D;if(e.get(P,w)){var F=m+D;l.set(F,S)}}return l},n}(),cL=iee;var uL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oee=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,a=t.getECBlocks(),c=0,u=a.getECBlocks();try{for(var l=uL(u),f=l.next();!f.done;f=l.next()){var h=f.value;c+=h.getCount()}}catch(Mt){r={error:Mt}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var p=new Array(c),m=0;try{for(var y=uL(u),w=y.next();!w.done;w=y.next())for(var h=w.value,S=0;S<h.getCount();S++){var D=h.getDataCodewords(),P=a.getECCodewords()+D;p[m++]=new n(D,new Uint8Array(P))}}catch(Mt){o={error:Mt}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}for(var F=p[0].codewords.length,H=F-a.getECCodewords(),$=H-1,T=0,S=0;S<$;S++)for(var x=0;x<m;x++)p[x].codewords[S]=e[T++];for(var b=t.getVersionNumber()===24,N=b?8:m,x=0;x<N;x++)p[x].codewords[H-1]=e[T++];for(var M=p[0].codewords.length,S=H;S<M;S++)for(var x=0;x<m;x++){var k=b?(x+8)%m:x,R=b&&k>7?S-1:S;p[k].codewords[R]=e[T++]}if(T!==e.length)throw new Y;return p},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),lL=oee;var see=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Y(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,c=s-a,u=255>>8-a<<c;t=(o[i]&u)>>c,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;t=t<<e|(o[i]&u)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Ah=see;var Cn=function(n){return n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE",n}(Cn||{}),aee=function(){function n(){}return n.decode=function(e){var t=new Ah(e),r=new ae,i=new ae,o=new Array,s=Cn.ASCII_ENCODE;do if(s===Cn.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case Cn.C40_ENCODE:this.decodeC40Segment(t,r);break;case Cn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Cn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Cn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Cn.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new q}s=Cn.ASCII_ENCODE}while(s!==Cn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Ho(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new q;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),Cn.ASCII_ENCODE;if(o===129)return Cn.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return Cn.C40_ENCODE;case 231:return Cn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Cn.ANSIX12_ENCODE;case 239:return Cn.TEXT_ENCODE;case 240:return Cn.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return Cn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new q;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new q}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new q}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new q;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new q}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u),o=0}else throw new q;break;default:throw new q}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new q;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new q;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new q;a[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append(fn.decode(a,Ee.ISO88591))}catch(u){throw new bn("Platform does not support required encoding: "+u.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"],n}(),GS=aee;var cee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uee=function(){function n(){this.rsDecoder=new $o(Ht.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new cL(e),o=i.getVersion(),s=i.readCodewords(),a=lL.getDataBlocks(s,o),c=0;try{for(var u=cee(a),l=u.next();!l.done;l=u.next()){var f=l.value;c+=f.getNumDataCodewords()}}catch(P){t={error:P}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var h=new Uint8Array(c),p=a.length,m=0;m<p;m++){var y=a[m],w=y.getCodewords(),S=y.getNumDataCodewords();this.correctErrors(w,S);for(var D=0;D<S;D++)h[D*p+m]=w[D]}return GS.decode(h)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new dt}for(var i=0;i<t;i++)e[i]=r[i]},n}(),dL=uee;var lee=function(){function n(e){this.image=e,this.rectangleDetector=new vl(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new V;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],a=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var u=n.sampleGrid(this.image,r,i,o,s,a,c);return new wc(u,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new Q(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new Q(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),u=this.transitionsBetween(o,t),l=s,f=[o,t,r,i];return l>a&&(l=a,f[0]=t,f[1]=r,f[2]=i,f[3]=o),l>c&&(l=c,f[0]=r,f[1]=i,f[2]=o,f[3]=t),l>u&&(f[0]=i,f[1]=o,f[2]=t,f[3]=r),f},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),u=this.transitionsBetween(a,t),l=this.transitionsBetween(c,o);return u<l?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(a+1)*4),u=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(u,o);var l=new Q(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),f=new Q(o.getX()+(t.getX()-r.getX())/(a+1),o.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(l))return this.isValid(f)?f:null;if(!this.isValid(f))return l;var h=this.transitionsBetween(c,l)+this.transitionsBetween(u,l),p=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>p?l:f},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,a=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,a*4),u=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(u,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var l=(t.getX()+r.getX()+i.getX()+o.getX())/4,f=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,l,f),r=n.moveAway(r,l,f),i=n.moveAway(i,l,f),o=n.moveAway(o,l,f);var h,p;return c=n.shiftPoint(t,r,a*4),c=n.shiftPoint(c,o,s*4),h=n.shiftPoint(r,t,a*4),h=n.shiftPoint(h,i,s*4),u=n.shiftPoint(i,o,a*4),u=n.shiftPoint(u,r,s*4),p=n.shiftPoint(o,i,a*4),p=n.shiftPoint(p,t,s*4),[c,h,u,p]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,a){var c=Ic.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var c=r;r=i,i=c,c=o,o=s,s=c}for(var u=Math.abs(o-r),l=Math.abs(s-i),f=-u/2,h=i<s?1:-1,p=r<o?1:-1,m=0,y=this.image.get(a?i:r,a?r:i),w=r,S=i;w!==o;w+=p){var D=this.image.get(a?S:w,a?w:S);if(D!==y&&(m++,y=D),f+=l,f>0){if(S===s)break;S+=h,f-=u}}return m},n}(),fL=lee;var dee=function(){function n(){this.decoder=new dL}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Ve.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new fL(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),c=new Ke(r.getText(),a,8*a.length,i,X.DATA_MATRIX,be.currentTimeMillis()),u=r.getByteSegments();u!=null&&c.putMetadata(xt.BYTE_SEGMENTS,u);var l=r.getECLevel();return l!=null&&c.putMetadata(xt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new V;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0],u=(c-a+1)/i,l=(s-o+1)/i;if(u<=0||l<=0)throw new V;var f=i/2;o+=f,a+=f;for(var h=new Et(u,l),p=0;p<l;p++)for(var m=o+p*i,y=0;y<u;y++)e.get(a+y*i,m)&&h.set(y,p);return h},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new V;var s=i-e[0];if(s===0)throw new V;return s},n.NO_POINTS=[],n}(),Cl=dee;var fee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bNe=function(n){fee(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Cl,t)||this}return e}($r);var Sh=function(n){return n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H",n}(Sh||{}),hee=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new gr(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Y;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Sh.L,"L",1),n.M=new n(Sh.M,"M",0),n.Q=new n(Sh.Q,"Q",3),n.H=new n(Sh.H,"H",2),n}(),Wo=hee;var pee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gee=function(){function n(e){this.errorCorrectionLevel=Wo.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return de.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=pee(n.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var u=c.value,l=u[0];if(l===e||l===t)return new n(u[1]);var f=n.numBitsDiffering(e,l);f<o&&(s=u[1],o=f),e!==t&&(f=n.numBitsDiffering(t,l),f<o&&(s=u[1],o=f))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Th=gee;var mee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vee=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=mee(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),B=vee;var yee=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),A=yee;var _ee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eee=function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var l=_ee(u),f=l.next();!f.done;f=l.next()){var h=f.value;a+=h.getCount()*(h.getDataCodewords()+c)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}this.totalCodewords=a}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Y;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=Th.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Et(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new B(7,new A(1,19)),new B(10,new A(1,16)),new B(13,new A(1,13)),new B(17,new A(1,9))),new n(2,Int32Array.from([6,18]),new B(10,new A(1,34)),new B(16,new A(1,28)),new B(22,new A(1,22)),new B(28,new A(1,16))),new n(3,Int32Array.from([6,22]),new B(15,new A(1,55)),new B(26,new A(1,44)),new B(18,new A(2,17)),new B(22,new A(2,13))),new n(4,Int32Array.from([6,26]),new B(20,new A(1,80)),new B(18,new A(2,32)),new B(26,new A(2,24)),new B(16,new A(4,9))),new n(5,Int32Array.from([6,30]),new B(26,new A(1,108)),new B(24,new A(2,43)),new B(18,new A(2,15),new A(2,16)),new B(22,new A(2,11),new A(2,12))),new n(6,Int32Array.from([6,34]),new B(18,new A(2,68)),new B(16,new A(4,27)),new B(24,new A(4,19)),new B(28,new A(4,15))),new n(7,Int32Array.from([6,22,38]),new B(20,new A(2,78)),new B(18,new A(4,31)),new B(18,new A(2,14),new A(4,15)),new B(26,new A(4,13),new A(1,14))),new n(8,Int32Array.from([6,24,42]),new B(24,new A(2,97)),new B(22,new A(2,38),new A(2,39)),new B(22,new A(4,18),new A(2,19)),new B(26,new A(4,14),new A(2,15))),new n(9,Int32Array.from([6,26,46]),new B(30,new A(2,116)),new B(22,new A(3,36),new A(2,37)),new B(20,new A(4,16),new A(4,17)),new B(24,new A(4,12),new A(4,13))),new n(10,Int32Array.from([6,28,50]),new B(18,new A(2,68),new A(2,69)),new B(26,new A(4,43),new A(1,44)),new B(24,new A(6,19),new A(2,20)),new B(28,new A(6,15),new A(2,16))),new n(11,Int32Array.from([6,30,54]),new B(20,new A(4,81)),new B(30,new A(1,50),new A(4,51)),new B(28,new A(4,22),new A(4,23)),new B(24,new A(3,12),new A(8,13))),new n(12,Int32Array.from([6,32,58]),new B(24,new A(2,92),new A(2,93)),new B(22,new A(6,36),new A(2,37)),new B(26,new A(4,20),new A(6,21)),new B(28,new A(7,14),new A(4,15))),new n(13,Int32Array.from([6,34,62]),new B(26,new A(4,107)),new B(22,new A(8,37),new A(1,38)),new B(24,new A(8,20),new A(4,21)),new B(22,new A(12,11),new A(4,12))),new n(14,Int32Array.from([6,26,46,66]),new B(30,new A(3,115),new A(1,116)),new B(24,new A(4,40),new A(5,41)),new B(20,new A(11,16),new A(5,17)),new B(24,new A(11,12),new A(5,13))),new n(15,Int32Array.from([6,26,48,70]),new B(22,new A(5,87),new A(1,88)),new B(24,new A(5,41),new A(5,42)),new B(30,new A(5,24),new A(7,25)),new B(24,new A(11,12),new A(7,13))),new n(16,Int32Array.from([6,26,50,74]),new B(24,new A(5,98),new A(1,99)),new B(28,new A(7,45),new A(3,46)),new B(24,new A(15,19),new A(2,20)),new B(30,new A(3,15),new A(13,16))),new n(17,Int32Array.from([6,30,54,78]),new B(28,new A(1,107),new A(5,108)),new B(28,new A(10,46),new A(1,47)),new B(28,new A(1,22),new A(15,23)),new B(28,new A(2,14),new A(17,15))),new n(18,Int32Array.from([6,30,56,82]),new B(30,new A(5,120),new A(1,121)),new B(26,new A(9,43),new A(4,44)),new B(28,new A(17,22),new A(1,23)),new B(28,new A(2,14),new A(19,15))),new n(19,Int32Array.from([6,30,58,86]),new B(28,new A(3,113),new A(4,114)),new B(26,new A(3,44),new A(11,45)),new B(26,new A(17,21),new A(4,22)),new B(26,new A(9,13),new A(16,14))),new n(20,Int32Array.from([6,34,62,90]),new B(28,new A(3,107),new A(5,108)),new B(26,new A(3,41),new A(13,42)),new B(30,new A(15,24),new A(5,25)),new B(28,new A(15,15),new A(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new B(28,new A(4,116),new A(4,117)),new B(26,new A(17,42)),new B(28,new A(17,22),new A(6,23)),new B(30,new A(19,16),new A(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new B(28,new A(2,111),new A(7,112)),new B(28,new A(17,46)),new B(30,new A(7,24),new A(16,25)),new B(24,new A(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new B(30,new A(4,121),new A(5,122)),new B(28,new A(4,47),new A(14,48)),new B(30,new A(11,24),new A(14,25)),new B(30,new A(16,15),new A(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new B(30,new A(6,117),new A(4,118)),new B(28,new A(6,45),new A(14,46)),new B(30,new A(11,24),new A(16,25)),new B(30,new A(30,16),new A(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new B(26,new A(8,106),new A(4,107)),new B(28,new A(8,47),new A(13,48)),new B(30,new A(7,24),new A(22,25)),new B(30,new A(22,15),new A(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new B(28,new A(10,114),new A(2,115)),new B(28,new A(19,46),new A(4,47)),new B(28,new A(28,22),new A(6,23)),new B(30,new A(33,16),new A(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new B(30,new A(8,122),new A(4,123)),new B(28,new A(22,45),new A(3,46)),new B(30,new A(8,23),new A(26,24)),new B(30,new A(12,15),new A(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new B(30,new A(3,117),new A(10,118)),new B(28,new A(3,45),new A(23,46)),new B(30,new A(4,24),new A(31,25)),new B(30,new A(11,15),new A(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new B(30,new A(7,116),new A(7,117)),new B(28,new A(21,45),new A(7,46)),new B(30,new A(1,23),new A(37,24)),new B(30,new A(19,15),new A(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new B(30,new A(5,115),new A(10,116)),new B(28,new A(19,47),new A(10,48)),new B(30,new A(15,24),new A(25,25)),new B(30,new A(23,15),new A(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new B(30,new A(13,115),new A(3,116)),new B(28,new A(2,46),new A(29,47)),new B(30,new A(42,24),new A(1,25)),new B(30,new A(23,15),new A(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new B(30,new A(17,115)),new B(28,new A(10,46),new A(23,47)),new B(30,new A(10,24),new A(35,25)),new B(30,new A(19,15),new A(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new B(30,new A(17,115),new A(1,116)),new B(28,new A(14,46),new A(21,47)),new B(30,new A(29,24),new A(19,25)),new B(30,new A(11,15),new A(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new B(30,new A(13,115),new A(6,116)),new B(28,new A(14,46),new A(23,47)),new B(30,new A(44,24),new A(7,25)),new B(30,new A(59,16),new A(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new B(30,new A(12,121),new A(7,122)),new B(28,new A(12,47),new A(26,48)),new B(30,new A(39,24),new A(14,25)),new B(30,new A(22,15),new A(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new B(30,new A(6,121),new A(14,122)),new B(28,new A(6,47),new A(34,48)),new B(30,new A(46,24),new A(10,25)),new B(30,new A(2,15),new A(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new B(30,new A(17,122),new A(4,123)),new B(28,new A(29,46),new A(14,47)),new B(30,new A(49,24),new A(10,25)),new B(30,new A(24,15),new A(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new B(30,new A(4,122),new A(18,123)),new B(28,new A(13,46),new A(32,47)),new B(30,new A(48,24),new A(14,25)),new B(30,new A(42,15),new A(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new B(30,new A(20,117),new A(4,118)),new B(28,new A(40,47),new A(7,48)),new B(30,new A(43,24),new A(22,25)),new B(30,new A(10,15),new A(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new B(30,new A(19,118),new A(6,119)),new B(28,new A(18,47),new A(31,48)),new B(30,new A(34,24),new A(34,25)),new B(30,new A(20,15),new A(61,16)))],n}(),Ei=Eee;var Dn=function(n){return n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111",n}(Dn||{}),wee=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Dn.DATA_MASK_000,new n(Dn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Dn.DATA_MASK_001,new n(Dn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Dn.DATA_MASK_010,new n(Dn.DATA_MASK_010,function(e,t){return t%3===0})],[Dn.DATA_MASK_011,new n(Dn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Dn.DATA_MASK_100,new n(Dn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Dn.DATA_MASK_101,new n(Dn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Dn.DATA_MASK_110,new n(Dn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Dn.DATA_MASK_111,new n(Dn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),f1=wee;var Iee=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new q;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=Th.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ei.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=Ei.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=Ei.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new q},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=f1.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),c=0,u=0,l=0,f=i-1;f>0;f-=2){f===6&&f--;for(var h=0;h<i;h++)for(var p=s?i-1-h:h,m=0;m<2;m++)o.get(f-m,p)||(l++,u<<=1,this.bitMatrix.get(f-m,p)&&(u|=1),l===8&&(a[c++]=u,l=0,u=0));s=!s}if(c!==t.getTotalCodewords())throw new q;return a},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=f1.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),hL=Iee;var pL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cee=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,a;if(e.length!==t.getTotalCodewords())throw new Y;var c=t.getECBlocksForLevel(r),u=0,l=c.getECBlocks();try{for(var f=pL(l),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getCount()}}catch(R){i={error:R}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var m=new Array(u),y=0;try{for(var w=pL(l),S=w.next();!S.done;S=w.next())for(var p=S.value,D=0;D<p.getCount();D++){var P=p.getDataCodewords(),F=c.getECCodewordsPerBlock()+P;m[y++]=new n(P,new Uint8Array(F))}}catch(R){s={error:R}}finally{try{S&&!S.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}for(var H=m[0].codewords.length,$=m.length-1;$>=0;){var T=m[$].codewords.length;if(T===H)break;$--}$++;for(var x=H-c.getECCodewordsPerBlock(),b=0,D=0;D<x;D++)for(var N=0;N<y;N++)m[N].codewords[D]=e[b++];for(var N=$;N<y;N++)m[N].codewords[x]=e[b++];for(var M=m[0].codewords.length,D=x;D<M;D++)for(var N=0;N<y;N++){var k=N<$?D:D+1;m[N].codewords[k]=e[b++]}return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),gL=Cee;var wi=function(n){return n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI",n}(wi||{}),xee=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Y;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(wi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(wi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(wi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(wi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(wi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(wi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(wi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(wi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(wi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(wi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),pt=xee;var Aee=function(){function n(){}return n.decode=function(e,t,r,i){var o=new Ah(e),s=new ae,a=new Array,c=-1,u=-1;try{var l=null,f=!1,h=void 0;do{if(o.available()<4)h=pt.TERMINATOR;else{var p=o.readBits(4);h=pt.forBits(p)}switch(h){case pt.TERMINATOR:break;case pt.FNC1_FIRST_POSITION:case pt.FNC1_SECOND_POSITION:f=!0;break;case pt.STRUCTURED_APPEND:if(o.available()<16)throw new q;c=o.readBits(8),u=o.readBits(8);break;case pt.ECI:var m=n.parseECIValue(o);if(l=_t.getCharacterSetECIByValue(m),l===null)throw new q;break;case pt.HANZI:var y=o.readBits(4),w=o.readBits(h.getCharacterCountBits(t));y===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,w);break;default:var S=o.readBits(h.getCharacterCountBits(t));switch(h){case pt.NUMERIC:n.decodeNumericSegment(o,s,S);break;case pt.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,S,f);break;case pt.BYTE:n.decodeByteSegment(o,s,S,l,a,i);break;case pt.KANJI:n.decodeKanjiSegment(o,s,S);break;default:throw new q}break}}while(h!==pt.TERMINATOR)}catch{throw new q}return new Ho(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,u)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new q;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{t.append(fn.decode(i,Ee.GB2312))}catch(c){throw new q(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new q;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{t.append(fn.decode(i,Ee.SHIFT_JIS))}catch(c){throw new q(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new q;for(var a=new Uint8Array(r),c=0;c<r;c++)a[c]=e.readBits(8);var u;i===null?u=Ee.guessEncoding(a,s):u=i.getName();try{t.append(fn.decode(a,u))}catch(l){throw new q(l)}o.push(a)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new q;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new q;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new q;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new q;var i=e.readBits(10);if(i>=1e3)throw new q;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new q;var o=e.readBits(7);if(o>=100)throw new q;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new q;var s=e.readBits(4);if(s>=10)throw new q;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new q},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),zS=Aee;var See=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),h1=See;var mL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tee=function(){function n(){this.rsDecoder=new $o(Ht.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Et.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new hL(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new h1(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),l=gL.getDataBlocks(u,a,c),f=0;try{for(var h=mL(l),p=h.next();!p.done;p=h.next()){var m=p.value;f+=m.getNumDataCodewords()}}catch($){r={error:$}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var y=new Uint8Array(f),w=0;try{for(var S=mL(l),D=S.next();!D.done;D=S.next()){var m=D.value,P=m.getCodewords(),F=m.getNumDataCodewords();this.correctErrors(P,F);for(var H=0;H<F;H++)y[w++]=P[H]}}catch($){o={error:$}}finally{try{D&&!D.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}return zS.decode(y,a,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new dt}for(var i=0;i<t;i++)e[i]=r[i]},n}(),vL=Tee;var bee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dee=function(n){bee(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e}(Q),yL=Dee;var Ree=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nee=function(){function n(e,t,r,i,o,s,a){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),a=this.image,c=0;c<t;c++){var u=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var l=e;l<i&&!a.get(l,u);)l++;for(var f=0;l<i;){if(a.get(l,u))if(f===1)s[1]++;else if(f===2){if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,l);if(h!==null)return h}s[0]=s[2],s[1]=1,s[2]=0,f=1}else s[++f]++;else f===1&&f++,s[f]++;l++}if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&a[1]<=r;)a[1]++,c++;if(c===s||a[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&a[2]<=r;)a[2]++,c++;if(a[2]>r)return NaN;var u=a[0]+a[1]+a[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],a=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,a,2*e[1],s);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var l=Ree(this.possibleCenters),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.aboutEquals(u,c,a))return h.combineEstimate(c,a,u)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}var p=new yL(a,c,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},n}(),_L=Nee;var Oee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pee=function(n){Oee(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e}(Q),EL=Pee;var Mee=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),wL=Mee;var bh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kee=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Ve.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ve.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*n.MAX_MODULES));(a<n.MIN_SKIP||t)&&(a=n.MIN_SKIP);for(var c=!1,u=new Int32Array(5),l=a-1;l<o&&!c;l+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<s;h++)if(i.get(h,l))(f&1)===1&&f++,u[f]++;else if((f&1)===0)if(f===4)if(n.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,h,r);if(p===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(l+=m-u[2]-a,h=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;else u[f]++;if(n.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,s,r);p===!0&&(a=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return Q.orderBestPatterns(y),new wL(y)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&t>=s&&a.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=a.getHeight(),u=a.getWidth();for(s=1;e+s<c&&t+s<u&&a.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=u)return!1;for(;e+s<c&&t+s<u&&!a.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=u||o[3]>=r)return!1;for(;e+s<c&&t+s<u&&a.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var l=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(l-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=2*i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,u=!1,l=this.possibleCenters,f=0,h=l.length;f<h;f++){var p=l[f];if(p.aboutEquals(c,a,s)){l[f]=p.combineEstimate(a,s,c),u=!0;break}}if(!u){var m=new EL(s,a,c);l.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=bh(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=n.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=bh(this.possibleCenters),u=c.next();!u.done;u=c.next()){var l=u.value;l.getCount()>=n.CENTER_QUORUM&&(o++,s+=l.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var f=s/a,h=0;try{for(var p=bh(this.possibleCenters),m=p.next();!m.done;m=p.next()){var l=m.value;h+=Math.abs(l.getEstimatedModuleSize()-f)}}catch(y){r={error:y}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new V;var s=this.possibleCenters,a;if(o>3){var c=0,u=0;try{for(var l=bh(this.possibleCenters),f=l.next();!f.done;f=l.next()){var h=f.value,p=h.getEstimatedModuleSize();c+=p,u+=p*p}}catch(H){e={error:H}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}a=c/o;var m=Math.sqrt(u/o-a*a);s.sort(function(H,$){var T=Math.abs($.getEstimatedModuleSize()-a),x=Math.abs(H.getEstimatedModuleSize()-a);return T<x?-1:T>x?1:0});for(var y=Math.max(.2*a,m),w=0;w<s.length&&s.length>3;w++){var S=s[w];Math.abs(S.getEstimatedModuleSize()-a)>y&&(s.splice(w,1),w--)}}if(s.length>3){var c=0;try{for(var D=bh(s),P=D.next();!P.done;P=D.next()){var F=P.value;c+=F.getEstimatedModuleSize()}}catch($){r={error:$}}finally{try{P&&!P.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}a=c/s.length,s.sort(function($,T){if(T.getCount()===$.getCount()){var x=Math.abs(T.getEstimatedModuleSize()-a),b=Math.abs($.getEstimatedModuleSize()-a);return x<b?1:x>b?-1:0}else return T.getCount()-$.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),IL=kee;var Fee=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ve.NEED_RESULT_POINT_CALLBACK);var t=new IL(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new V("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),a=Ei.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var l=r.getX()-t.getX()+i.getX(),f=r.getY()-t.getY()+i.getY(),h=1-3/c,p=Math.floor(t.getX()+h*(l-t.getX())),m=Math.floor(t.getY()+h*(f-t.getY())),y=4;y<=16;y<<=1)try{u=this.findAlignmentInRegion(o,p,m,y);break}catch(P){if(!(P instanceof V))throw P}var w=n.createTransform(t,r,i,u,s),S=n.sampleGrid(this.image,w,s),D;return u===null?D=[i,t,r]:D=[i,t,r,u],new wc(S,D)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,a,c,u,l;return i!==null?(a=i.getX(),c=i.getY(),u=s-3,l=u):(a=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),u=s,l=s),Ch.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,l,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Ic.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=De.round(Q.distance(e,t)/i),s=De.round(Q.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new V("Dimensions could be not found.")}return a},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,a,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),c=Math.abs(i-t),u=-a/2,l=e<r?1:-1,f=t<i?1:-1,h=0,p=r+l,m=e,y=t;m!==p;m+=l){var w=o?y:m,S=o?m:y;if(h===1===this.image.get(w,S)){if(h===2)return De.distance(m,y,e,t);h++}if(u+=c,u>0){if(y===i)break;y+=f,u-=a}}return h===2?De.distance(r+l,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-s<e*3)throw new V("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-c<e*3)throw new V("Alignment bottom exceeds estimated module size.");var l=new _L(this.image,s,c,a-s,u-c,e,this.resultPointCallback);return l.find()},n}(),CL=Fee;var Lee=function(){function n(){this.decoder=new vL}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Ve.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new CL(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof h1&&r.getOther().applyMirroredCorrection(i);var a=new Ke(r.getText(),r.getRawBytes(),void 0,i,X.QR_CODE,void 0),c=r.getByteSegments();c!==null&&a.putMetadata(xt.BYTE_SEGMENTS,c);var u=r.getECLevel();return u!==null&&a.putMetadata(xt.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(a.putMetadata(xt.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(xt.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new V;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0];if(a>=c||o>=s)throw new V;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new V;var u=Math.round((c-a+1)/i),l=Math.round((s-o+1)/i);if(u<=0||l<=0)throw new V;if(l!==u)throw new V;var f=Math.floor(i/2);o+=f,a+=f;var h=a+Math.floor((u-1)*i)-c;if(h>0){if(h>f)throw new V;a-=h}var p=o+Math.floor((l-1)*i)-s;if(p>0){if(p>f)throw new V;o-=p}for(var m=new Et(u,l),y=0;y<l;y++)for(var w=o+Math.floor(y*i),S=0;S<u;S++)e.get(a+Math.floor(S*i),w)&&m.set(S,y);return m},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<r;){if(a!==t.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===r)throw new V;return(o-e[0])/7},n.NO_POINTS=new Array,n}(),xl=Lee;var Vee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bee=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return De.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=Vee(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Xe.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),ke=Bee;var Uee=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),xL=Uee;var jee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hee=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new xL(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,a=0,c=!1;s<t.getHeight();){var u=n.findVertices(t,s,a);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,a=0;try{for(var l=(r=void 0,jee(o)),f=l.next();!f.done;f=l.next()){var h=f.value;h[1]!=null&&(s=Math.trunc(Math.max(s,h[1].getY()))),h[3]!=null&&(s=Math.max(s,Math.trunc(h[3].getY())))}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var a=new Array(4),c=!1,u=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var l=n.findGuardPattern(e,o,i,r,!1,s,u);if(l!=null){for(;i>0;){var f=n.findGuardPattern(e,o,--i,r,!1,s,u);if(f!=null)l=f;else{i++;break}}a[0]=new Q(l[0],i),a[1]=new Q(l[1],i),c=!0;break}}var h=i+1;if(c){for(var p=0,f=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);h<t;h++){var l=n.findGuardPattern(e,f[0],h,r,!1,s,u);if(l!=null&&Math.abs(f[0]-l[0])<n.MAX_PATTERN_DRIFT&&Math.abs(f[1]-l[1])<n.MAX_PATTERN_DRIFT)f=l,p=0;else{if(p>n.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,a[2]=new Q(f[0],h),a[3]=new Q(f[1],h)}return h-i<n.BARCODE_MIN_HEIGHT&&Xe.fill(a,null),a},n.findGuardPattern=function(e,t,r,i,o,s,a){Xe.fillWithin(a,0,a.length,0);for(var c=t,u=0;e.get(c,r)&&c>0&&u++<n.MAX_PIXEL_DRIFT;)c--;for(var l=c,f=0,h=s.length,p=o;l<i;l++){var m=e.get(l,r);if(m!==p)a[f]++;else{if(f===h-1){if(n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,l]);c+=a[0]+a[1],be.arraycopy(a,2,a,0,f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,p=!p}}return f===h-1&&n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,l-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return 1/0;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var f=e[l],h=t[l]*c,p=f>h?f-h:h-f;if(p>r)return 1/0;u+=p}return u/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),AL=Hee;var $ee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gee=function(){function n(e,t){if(t.length===0)throw new Y;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),be.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=$ee(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],u=this.coefficients.length,l=1;l<u;l++)c=this.field.add(this.field.multiply(e,c),this.coefficients[l]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;be.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(t[a-s],r[a]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Y("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var c=t[a],u=0;u<o;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(c,i[u]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Y;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new ae,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),qo=Gee;var zee=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Y;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new wh;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),SL=zee;var Wee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qee=function(n){Wee(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new qo(i,new Int32Array([0])),i.one=new qo(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Y;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new qo(this,i)},e.PDF417_GF=new e(ke.NUMBER_OF_CODEWORDS,3),e}(SL),TL=qee;var Kee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yee=function(){function n(){this.field=TL.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new qo(this.field,e),a=new Int32Array(t),c=!1,u=t;u>0;u--){var l=s.evaluateAt(this.field.exp(u));a[t-u]=l,l!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(r!=null)try{for(var h=Kee(r),p=h.next();!p.done;p=h.next()){var m=p.value,y=this.field.exp(e.length-1-m),w=new qo(this.field,new Int32Array([this.field.subtract(0,y),1]));f=f.multiply(w)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}for(var S=new qo(this.field,a),D=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),S,t),P=D[0],F=D[1],H=this.findErrorLocations(P),$=this.findErrorMagnitudes(F,P,H),u=0;u<H.length;u++){var T=e.length-1-this.field.log(H[u]);if(T<0)throw dt.getChecksumInstance();e[T]=this.field.subtract(e[T],$[u])}return H.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var u=o,l=a;if(o=s,a=c,o.isZero())throw dt.getChecksumInstance();s=u;for(var f=this.field.getZero(),h=o.getCoefficient(o.getDegree()),p=this.field.inverse(h);s.getDegree()>=o.getDegree()&&!s.isZero();){var m=s.getDegree()-o.getDegree(),y=this.field.multiply(s.getCoefficient(s.getDegree()),p);f=f.add(this.field.buildMonomial(m,y)),s=s.subtract(o.multiplyByMonomial(m,y))}c=f.multiply(a).subtract(l).negative()}var w=c.getCoefficient(0);if(w===0)throw dt.getChecksumInstance();var S=this.field.inverse(w),D=c.multiply(S),P=s.multiply(S);return[D,P]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw dt.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var a=new qo(this.field,o),c=r.length,u=new Int32Array(c),s=0;s<c;s++){var l=this.field.inverse(r[s]),f=this.field.subtract(0,e.evaluateAt(l)),h=this.field.inverse(a.evaluateAt(l));u[s]=this.field.multiply(f,h)}return u},n}(),WS=Yee;var Xee=function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,a=i==null||o==null;if(s&&a)throw new V;s?(t=new Q(0,i.getY()),r=new Q(0,o.getY())):a&&(i=new Q(e.getWidth()-1,t.getY()),o=new Q(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var l=new Q(c.getX(),u);r?i=l:s=l}if(t>0){var f=r?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+t);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new Q(f.getX(),h);r?o=p:a=p}return new n(this.image,i,o,s,a)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),Dh=Xee;var Qee=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),bL=Qee;var Zee=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,a,c,u,l,f){if(s==="%%")return"%";if(t[++r]!==void 0){s=u?parseInt(u.substr(1)):void 0;var h=l?parseInt(l.substr(1)):void 0,p;switch(f){case"s":p=t[r];break;case"c":p=t[r][0];break;case"f":p=parseFloat(t[r]).toFixed(s);break;case"p":p=parseFloat(t[r]).toPrecision(s);break;case"e":p=parseFloat(t[r]).toExponential(s);break;case"x":p=parseInt(t[r]).toString(h||16);break;case"d":p=parseFloat(parseInt(t[r],h||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(c),y=c&&c[0]+""=="0"?"0":" ";p.length<m;)p=a!==void 0?p+y:y+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),Al=Zee;var Jee=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ete=function(){function n(e){this.boundingBox=new Dh(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Al,i=0;try{for(var o=Jee(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),p1=ete;var tte=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nte=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},rte=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>r?(r=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===r&&i.push(p.getKey())};try{for(var s=tte(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=nte(a.value,2),u=c[0],l=c[1];o(u,l)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return ke.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),Ac=rte;var ite=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ote=function(n){ite(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=qS(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,l=1,f=0,h=a;h<c;h++)if(r[h]!=null){var p=r[h],m=p.getRowNumber()-u;if(m===0)f++;else if(m===1)l=Math.max(l,f),f=1,u=p.getRowNumber();else if(m<0||p.getRowNumber()>=t.getRowCount()||m>h)r[h]=null;else{var y=void 0;l>2?y=(l-2)*m:y=m;for(var w=y>=h,S=1;S<=y&&!w;S++)w=r[h-S]!=null;w?r[h]=null:(u=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=qS(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var u=c.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),u=-1,l=1,f=0,h=s;h<a;h++)if(c[h]!=null){var p=c[h];p.setRowNumberAsRowIndicatorColumn();var m=p.getRowNumber()-u;m===0?f++:m===1?(l=Math.max(l,f),f=1,u=p.getRowNumber()):p.getRowNumber()>=t.getRowCount()?c[h]=null:(u=p.getRowNumber(),f=1)}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new Ac,s=new Ac,a=new Ac,c=new Ac;try{for(var u=qS(i),l=u.next();!l.done;l=u.next()){var f=l.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(h*3+1);break;case 1:c.setValue(h/3),a.setValue(h%3);break;case 2:o.setValue(h+1);break}}}}catch(y){t={error:y}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<ke.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>ke.MAX_ROWS_IN_BARCODE)return null;var m=new bL(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(p1),KS=ote;var ste=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ate=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ke.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[t],u[3]=c[t],t>0&&(u[0]=r[t-1],u[4]=a[t-1],u[5]=c[t-1]),t>1&&(u[8]=r[t-2],u[10]=a[t-2],u[11]=c[t-2]),t<r.length-1&&(u[1]=r[t+1],u[6]=a[t+1],u[7]=c[t+1]),t<r.length-2&&(u[9]=r[t+2],u[12]=a[t+2],u[13]=c[t+2]);try{for(var l=ste(u),f=l.next();!f.done;f=l.next()){var h=f.value;if(n.adjustRowNumber(s,h))return}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Al,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n}(),DL=ate;var cte=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),RL=cte;var ute=function(){function n(){}return n.initialize=function(){for(var e=0;e<ke.SYMBOL_TABLE.length;e++)for(var t=ke.SYMBOL_TABLE[e],r=t&1,i=0;i<ke.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(ke.BARS_IN_MODULE)),n.RATIOS_TABLE[e][ke.BARS_IN_MODULE-i-1]=Math.fround(o/ke.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=De.sum(e),r=new Int32Array(ke.BARS_IN_MODULE),i=0,o=0,s=0;s<ke.MODULES_IN_CODEWORD;s++){var a=t/(2*ke.MODULES_IN_CODEWORD)+s*t/ke.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return ke.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=De.sum(e),r=new Array(ke.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=Ih.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var a=0;a<n.RATIOS_TABLE.length;a++){for(var c=0,u=n.RATIOS_TABLE[a],l=0;l<ke.BARS_IN_MODULE;l++){var f=Math.fround(u[l]-r[l]);if(c+=Math.fround(f*f),c>=o)break}c<o&&(o=c,s=ke.SYMBOL_TABLE[a])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ke.SYMBOL_TABLE.length).map(function(e){return e=new Array(ke.BARS_IN_MODULE)}),n}(),NL=ute;var lte=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),YS=lte;var dte=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),XS=dte;var fte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hte=function(n){fte(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(lt),OL=hte;var pte=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new OL;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new gl;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),PL=pte;var gte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mte=function(n){gte(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(lt),ML=mte;var vte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yte=function(n){vte(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Y("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new ML;i=de.MAX_VALUE}this.buf=Xe.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new gl;this.ensureCapacity(this.count+i),be.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Xe.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(PL),kL=yte;var wt=function(n){return n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT",n}(wt||{});function FL(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var g1;function Zs(n){if(typeof g1>"u"&&(g1=FL()),g1===null)throw new Error("BigInt is not supported!");return g1(n)}function _te(){var n=[];n[0]=Zs(1);var e=Zs(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var Ete=function(){function n(){}return n.decode=function(e,t){var r=new ae(""),i=_t.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new YS;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:var c=_t.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,a);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new q;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw q.getFormatInstance()}if(r.length()===0)throw q.getFormatInstance();var u=new Ho(null,r.toString(),null,t);return u.setOther(a),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(de.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new ae;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var a=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new ae;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new ae;t=n.textCompaction(e,t+1,u),r.setSender(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new ae;t=n.textCompaction(e,t+1,l),r.setAddressee(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new ae;t=n.numericCompaction(e,t+1,f),r.setSegmentCount(de.parseInt(f.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new ae;t=n.numericCompaction(e,t+1,h),r.setTimestamp(XS.parseLong(h.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new ae;t=n.numericCompaction(e,t+1,p),r.setChecksum(de.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new ae;t=n.numericCompaction(e,t+1,m),r.setFileSize(XS.parseLong(m.toString()));break;default:throw q.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(a!==-1){var y=t-a;r.isLastSegment()&&y--,r.setOptionalData(Xe.copyOfRange(e,a,a+y))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,a=!1;t<e[0]&&!a;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=wt.ALPHA,s=wt.ALPHA,a=0;a<r;){var c=e[a],u="";switch(o){case wt.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.LL:o=wt.LOWER;break;case n.ML:o=wt.MIXED;break;case n.PS:s=o,o=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=wt.ALPHA;break}break;case wt.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case n.AS:s=o,o=wt.ALPHA_SHIFT;break;case n.ML:o=wt.MIXED;break;case n.PS:s=o,o=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=wt.ALPHA;break}break;case wt.MIXED:if(c<n.PL)u=n.MIXED_CHARS[c];else switch(c){case n.PL:o=wt.PUNCT;break;case 26:u=" ";break;case n.LL:o=wt.LOWER;break;case n.AL:o=wt.ALPHA;break;case n.PS:s=o,o=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=wt.ALPHA;break}break;case wt.PUNCT:if(c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=wt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=wt.ALPHA;break}break;case wt.ALPHA_SHIFT:if(o=s,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=wt.ALPHA;break}break;case wt.PUNCT_SHIFT:if(o=s,c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=wt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=wt.ALPHA;break}break}u!==""&&i.append(u),a++}},n.byteCompaction=function(e,t,r,i,o){var s=new kL,a=0,c=0,u=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),f=t[i++];i<t[0]&&!u;)switch(l[a++]=f,c=900*c+f,f=t[i++],f){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Zs(c)>>Zs(8*(5-h))));c=0,a=0}break}i===t[0]&&f<n.TEXT_COMPACTION_MODE_LATCH&&(l[a++]=f);for(var p=0;p<a;p++)s.write(l[p]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var m=t[i++];if(m<n.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+m;else switch(m){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Zs(c)>>Zs(8*(5-h))));c=0,a=0}}break}return o.append(fn.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var a=e[t++];if(t===e[0]&&(o=!0),a<n.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||a===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Zs(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Zs(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new q;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=FL()?_te():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),QS=Ete;var Rh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wte=function(){function n(){}return n.decode=function(e,t,r,i,o,s,a){for(var c=new Dh(e,t,r,i,o),u=null,l=null,f,h=!0;;h=!1){if(t!=null&&(u=n.getRowIndicatorColumn(e,c,t,!0,s,a)),i!=null&&(l=n.getRowIndicatorColumn(e,c,i,!1,s,a)),f=n.merge(u,l),f==null)throw V.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))c=p;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,l);for(var y=u!=null,w=1;w<=m;w++){var S=y?w:m-w;if(f.getDetectionResultColumn(S)===void 0){var D=void 0;S===0||S===m?D=new KS(c,S===0):D=new p1(c),f.setDetectionResultColumn(S,D);for(var P=-1,F=P,H=c.getMinY();H<=c.getMaxY();H++){if(P=n.getStartColumn(f,S,H,y),P<0||P>c.getMaxX()){if(F===-1)continue;P=F}var $=n.detectCodeword(e,c.getMinX(),c.getMaxX(),y,P,H,s,a);$!=null&&(D.setCodeword(H,$),F=P,s=Math.min(s,$.getWidth()),a=Math.max(a,$.getWidth()))}}}return n.createDecoderResult(f)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Dh.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new DL(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var a=Rh(i),c=a.next();!c.done;c=a.next()){var u=c.value;if(s+=o-u,u>0)break}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var l=e.getCodewords(),f=0;s>0&&l[f]==null;f++)s--;for(var h=0,f=i.length-1;f>=0&&(h+=o-i[f],!(i[f]>0));f--);for(var f=l.length-1;h>0&&l[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(s,h,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=Rh(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var a=new KS(t,i),c=0;c<2;c++)for(var u=c===0?1:-1,l=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=t.getMaxY()&&f>=t.getMinY();f+=u){var h=n.detectCodeword(e,0,e.getWidth(),i,l,f,o,s);h!=null&&(a.setCodeword(f,h),i?l=h.getStartX():l=h.getEndX())}return a},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>ke.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=t[a][c+1].getValue(),l=a*e.getBarcodeColumnCount()+c;u.length===0?r.push(l):u.length===1?i[l]=u[0]:(s.push(l),o.push(u))}for(var f=new Array(o.length),h=0;h<f.length;h++)f[h]=o[h];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,ke.toIntArray(r),ke.toIntArray(s),f)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(l){var u=l instanceof dt;if(!u)throw l}if(s.length===0)throw dt.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw dt.getChecksumInstance()}throw dt.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new Ac;var u=0;try{for(var l=Rh(e.getDetectionResultColumns()),f=l.next();!f.done;f=l.next()){var h=f.value;if(h!=null)try{for(var p=(i=void 0,Rh(h.getCodewords())),m=p.next();!m.done;m=p.next()){var y=m.value;if(y!=null){var w=y.getRowNumber();if(w>=0){if(w>=s.length)continue;s[w][u].setValue(y.getValue())}}}}catch(S){i={error:S}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u++}}catch(S){t={error:S}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,a=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var u=0;n.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var l=(o=void 0,Rh(e.getDetectionResultColumn(t).getCodewords())),f=l.next();!f.done;f=l.next()){var h=f.value;if(h!=null)return(i?h.getEndX():h.getStartX())+a*u*(h.getEndX()-h.getStartX())}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,a,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var u=n.getModuleBitCount(e,t,r,i,o,s);if(u==null)return null;var l,f=De.sum(u);if(i)l=o+f;else{for(var h=0;h<u.length/2;h++){var p=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=p}l=o,o=l-f}if(!n.checkCodewordSkew(f,a,c))return null;var m=NL.getDecodedValue(u),y=ke.getCodeword(m);return y===-1?null:new RL(o,l,n.getCodewordBucketNumber(m),y)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var a=o,c=new Int32Array(8),u=0,l=i?1:-1,f=i;(i?a<r:a>=t)&&u<c.length;)e.get(a,s)===f?(c[u]++,a+=l):(u++,f=!f);return u===c.length||a===(i?r:t)&&u===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var a=o,c=i?-1:1,u=0;u<2;u++){for(;(i?a>=t:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>n.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw q.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=QS.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw dt.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw q.getFormatInstance();var r=e[0];if(r>e.length)throw q.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw q.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Al,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new WS,n}(),LL=wte;var Ite=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cte=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw V.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof q||r instanceof dt?V.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,a=AL.detectMultiple(e,t,r);try{for(var c=Ite(a.getPoints()),u=c.next();!u.done;u=c.next()){var l=u.value,f=LL.decode(a.getBits(),l[4],l[5],l[6],l[7],n.getMinCodewordWidth(l),n.getMaxCodewordWidth(l)),h=new Ke(f.getText(),f.getRawBytes(),void 0,l,X.PDF_417);h.putMetadata(xt.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(xt.PDF417_EXTRA_METADATA,p),s.push(h)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(m){return m})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?de.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),Sl=Cte;var xte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ate=function(n){xte(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(lt),m1=Ate;var VL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ste=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Ve.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ve.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===X.UPC_A||s===X.UPC_E||s===X.EAN_13||s===X.EAN_8||s===X.CODABAR||s===X.CODE_39||s===X.CODE_93||s===X.CODE_128||s===X.ITF||s===X.RSS_14||s===X.RSS_EXPANDED});o&&!t&&i.push(new Qs(e)),r.includes(X.QR_CODE)&&i.push(new xl),r.includes(X.DATA_MATRIX)&&i.push(new Cl),r.includes(X.AZTEC)&&i.push(new yl),r.includes(X.PDF_417)&&i.push(new Sl),o&&t&&i.push(new Qs(e))}i.length===0&&(t||i.push(new Qs(e)),i.push(new xl),i.push(new Cl),i.push(new yl),i.push(new Sl),t&&i.push(new Qs(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=VL(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new m1("No readers where selected, nothing can be read.");try{for(var i=VL(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof m1)continue}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new V("No MultiFormat Readers were able to detect the code.")},n}(),ZS=Ste;var Tte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BL=function(n){Tte(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new ZS;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}($r);var bte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hke=function(n){bte(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Sl,t)||this}return e}($r);var Dte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vke=function(n){Dte(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new xl,t)||this}return e}($r);var UL=function(n){return n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40",n}(UL||{}),$e=UL;var Rte=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Gr(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new Gr(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Y("No error correction bytes");var r=e.length-t;if(r<=0)throw new Y("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);be.arraycopy(e,0,o,0,r);var s=new Gr(this.field,o);s=s.multiplyByMonomial(t,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),u=t-c.length,l=0;l<u;l++)e[r+l]=0;be.arraycopy(c,0,e,r+u,c.length)},n}(),Nh=Rte;var Nte=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],c=0;c<i-1;c++){var u=a[c];u===a[c+1]&&u===r[s+1][c]&&u===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(n.isWhiteHorizontal(c,a-4,a)||n.isWhiteHorizontal(c,a+7,a+11))&&t++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(n.isWhiteVertical(r,a,s-4,s)||n.isWhiteVertical(r,a,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],c=0;c<i;c++)a[c]===1&&t++;var u=e.getHeight()*e.getWidth(),l=Math.floor(Math.abs(t*2-u)*10/u);return l*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new Y("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,u=-1,l=0;l<o;l++){var f=t?s[a][l]:s[l][a];f===u?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,u=f)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Js=Nte;var Ote=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pte=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=Ote(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;Xe.fill(s,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},n.prototype.toString=function(){for(var e=new ae,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Oh=Pte;var Mte=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new ae;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Tl=Mte;var kte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fte=function(n){kte(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(lt),gt=Fte;var Lte=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new yt;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],u=c[0],l=c[1];if(r.setBoolean(u,l,a),o<8){var f=r.getWidth()-o-1,h=8;r.setBoolean(f,h,a)}else{var f=8,h=r.getHeight()-7+(o-8);r.setBoolean(f,h,a)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new yt;n.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,o,a)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var c=0;c<2;++c){var u=s-c;if(n.isEmpty(r.get(u,a))){var l=void 0;i<e.getSize()?(l=e.get(i),++i):l=!1,t!==255&&Js.getDataMaskBit(t,u,a)&&(l=!l),r.setBoolean(u,a,l)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new gt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-de.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Y("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Tl.isValidMaskPattern(t))throw new gt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new yt;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new gt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new gt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new gt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new gt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new gt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var u=i[c];u>=0&&n.isEmpty(t.get(u,a))&&n.embedPositionAdjustmentPattern(u-2,a-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),v1=Lte;var Vte=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),jL=Vte;var HL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bte=function(){function n(){}return n.calculateMaskPenalty=function(e){return Js.applyMaskPenaltyRule1(e)+Js.applyMaskPenaltyRule2(e)+Js.applyMaskPenaltyRule3(e)+Js.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get($e.CHARACTER_SET)!==void 0;o&&(i=r.get($e.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new yt;if(s===pt.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=_t.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var u=new yt;this.appendBytes(e,s,u,i);var l;if(r!==null&&r.get($e.QR_VERSION)!==void 0){var f=Number.parseInt(r.get($e.QR_VERSION).toString(),10);l=Ei.getVersionForNumber(f);var h=this.calculateBitsNeeded(s,a,u,l);if(!this.willFit(h,l,t))throw new gt("Data too big for requested version")}else l=this.recommendVersion(t,s,a,u);var p=new yt;p.appendBitArray(a);var m=s===pt.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,l,s,p),p.appendBitArray(u);var y=l.getECBlocksForLevel(t),w=l.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(w,p);var S=this.interleaveWithECBytes(p,l.getTotalCodewords(),w,y.getNumBlocks()),D=new Tl;D.setECLevel(t),D.setMode(s),D.setVersion(l);var P=l.getDimensionForVersion(),F=new Oh(P,P),H=this.chooseMaskPattern(S,t,l,F);return D.setMaskPattern(H),v1.buildMatrix(S,t,l,H,F),D.setMatrix(F),D},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,Ei.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(a,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),_t.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return pt.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(n.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return pt.BYTE}return i?pt.ALPHANUMERIC:r?pt.NUMERIC:pt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=fn.encode(e,_t.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<Tl.NUM_MASK_PATTERNS;a++){v1.buildMatrix(e,t,r,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Ei.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new gt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new gt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new gt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new gt("Block ID too large");var a=e%r,c=r-a,u=Math.floor(e/r),l=u+1,f=Math.floor(t/r),h=f+1,p=u-f,m=l-h;if(p!==m)throw new gt("EC bytes mismatch");if(r!==c+a)throw new gt("RS blocks mismatch");if(e!==(f+p)*c+(h+m)*a)throw new gt("Total bytes mismatch");i<c?(o[0]=f,s[0]=p):(o[0]=h,s[0]=m)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,a,c;if(e.getSizeInBytes()!==r)throw new gt("Number of bits and data bytes does not match");for(var u=0,l=0,f=0,h=new Array,p=0;p<i;++p){var m=new Int32Array(1),y=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,p,m,y);var w=m[0],S=new Uint8Array(w);e.toBytes(8*u,S,0,w);var D=n.generateECBytes(S,y[0]);h.push(new jL(S,D)),l=Math.max(l,w),f=Math.max(f,D.length),u+=m[0]}if(r!==u)throw new gt("Data bytes does not match offset");for(var P=new yt,p=0;p<l;++p)try{for(var F=(o=void 0,HL(h)),H=F.next();!H.done;H=F.next()){var $=H.value,S=$.getDataBytes();p<S.length&&P.appendBits(S[p],8)}}catch(N){o={error:N}}finally{try{H&&!H.done&&(s=F.return)&&s.call(F)}finally{if(o)throw o.error}}for(var p=0;p<f;++p)try{for(var T=(a=void 0,HL(h)),x=T.next();!x.done;x=T.next()){var $=x.value,D=$.getErrorCorrectionBytes();p<D.length&&P.appendBits(D[p],8)}}catch(N){a={error:N}}finally{try{x&&!x.done&&(c=T.return)&&c.call(T)}finally{if(a)throw a.error}}if(t!==P.getSizeInBytes())throw new gt("Interleaving error: "+t+" and "+P.getSizeInBytes()+" differ.");return P},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new Nh(Ht.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new gt(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case pt.NUMERIC:n.appendNumericBytes(e,r);break;case pt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case pt.BYTE:n.append8BitBytes(e,r,i);break;case pt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new gt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),a=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new gt;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new gt;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=fn.encode(e,r)}catch(c){throw new gt(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];t.appendBits(a,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=fn.encode(e,_t.SJIS)}catch(f){throw new gt(f)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,c=s<<8&4294967295|a,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new gt("Invalid byte sequence");var l=(u>>8)*192+(u&255);t.appendBits(l,13)}},n.appendECI=function(e,t){t.appendBits(pt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=_t.UTF8.getName(),n}(),Ph=Bte;var a3e=function(){function n(){}return n.prototype.write=function(e,t,r,i){if(i===void 0&&(i=null),e.length===0)throw new Y("Found empty contents");if(t<0||r<0)throw new Y("Requested dimensions are too small: "+t+"x"+r);var o=Wo.L,s=n.QUIET_ZONE_SIZE;i!==null&&(i.get($e.ERROR_CORRECTION)!==void 0&&(o=Wo.fromString(i.get($e.ERROR_CORRECTION).toString())),i.get($e.MARGIN)!==void 0&&(s=Number.parseInt(i.get($e.MARGIN).toString(),10)));var a=Ph.encode(e,o,i);return this.renderResult(a,t,r,s)},n.prototype.writeToDom=function(e,t,r,i,o){o===void 0&&(o=null),typeof e=="string"&&(e=document.querySelector(e));var s=this.write(t,r,i,o);e&&e.appendChild(s)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new bn;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=this.createSVGElement(l,f),w=0,S=m;w<a;w++,S+=h)for(var D=0,P=p;D<s;D++,P+=h)if(o.get(D,w)===1){var F=this.createSvgRectElement(P,S,h,h);y.appendChild(F)}return y},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n}();var Ute=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(e.length===0)throw new Y("Found empty contents");if(t!==X.QR_CODE)throw new Y("Can only encode QR_CODE, but got "+t);if(r<0||i<0)throw new Y("Requested dimensions are too small: "+r+"x"+i);var s=Wo.L,a=n.QUIET_ZONE_SIZE;o!==null&&(o.get($e.ERROR_CORRECTION)!==void 0&&(s=Wo.fromString(o.get($e.ERROR_CORRECTION).toString())),o.get($e.MARGIN)!==void 0&&(a=Number.parseInt(o.get($e.MARGIN).toString(),10)));var c=Ph.encode(e,s,o);return n.renderResult(c,r,i,a)},n.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new bn;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=new Et(l,f),w=0,S=m;w<a;w++,S+=h)for(var D=0,P=p;D<s;D++,P+=h)o.get(D,w)===1&&y.setRegion(P,S,h,h);return y},n.QUIET_ZONE_SIZE=4,n}(),JS=Ute;var P3e=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){var s;switch(t){case X.QR_CODE:s=new JS;break;default:throw new Y("No encoder available for format "+t)}return s.encode(e,t,r,i,o)},n}();var jte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),B3e=function(n){jte(e,n);function e(t,r,i,o,s,a,c,u){var l=n.call(this,a,c)||this;if(l.yuvData=t,l.dataWidth=r,l.dataHeight=i,l.left=o,l.top=s,o+a>r||s+c>i)throw new Y("Crop rectangle does not fit within image data.");return u&&l.reverseHorizontal(a,c),l}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Y("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return be.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return be.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;be.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var c=a*t,u=0;u<t;u++){var l=o[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+u]=4278190080|l*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+t/2,c=s,u=s+t-1;c<a;c++,u--){var l=i[c];i[c]=i[u],i[u]=l}},e.prototype.invert=function(){return new _c(this)},e.THUMBNAIL_SCALE_FACTOR=2,e}(jo);var Hte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),W3e=function(n){Hte(e,n);function e(t,r,i,o,s,a,c){var u=n.call(this,r,i)||this;if(u.dataWidth=o,u.dataHeight=s,u.left=a,u.top=c,t.BYTES_PER_ELEMENT===4){for(var l=r*i,f=new Uint8ClampedArray(l),h=0;h<l;h++){var p=t[h],m=p>>16&255,y=p>>7&510,w=p&255;f[h]=(m+y+w)/4&255}u.luminances=f}else u.luminances=t;if(o===void 0&&(u.dataWidth=r),s===void 0&&(u.dataHeight=i),a===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+i>u.dataHeight)throw new Y("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Y("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return be.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return be.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;be.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new _c(this)},e}(jo);var $te=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gte=function(n){$te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(_t),Sc=Gte;var zte=function(){function n(){}return n.ISO_8859_1=_t.ISO8859_1,n}(),Mh=zte;var Wte=function(){function n(e,t,r){this.codewords=e,this.numcols=t,this.numrows=r,this.bits=new Uint8Array(t*r),Xe.fill(this.bits,2)}return n.prototype.getNumrows=function(){return this.numrows},n.prototype.getNumcols=function(){return this.numcols},n.prototype.getBits=function(){return this.bits},n.prototype.getBit=function(e,t){return this.bits[t*this.numcols+e]===1},n.prototype.setBit=function(e,t,r){this.bits[t*this.numcols+e]=r?1:0},n.prototype.noBit=function(e,t){return this.bits[t*this.numcols+e]===2},n.prototype.place=function(){var e=0,t=4,r=0;do{t===this.numrows&&r===0&&this.corner1(e++),t===this.numrows-2&&r===0&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&r===0&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&r===2&&this.numcols%8===0&&this.corner4(e++);do t<this.numrows&&r>=0&&this.noBit(r,t)&&this.utah(t,r,e++),t-=2,r+=2;while(t>=0&&r<this.numcols);t++,r+=3;do t>=0&&r<this.numcols&&this.noBit(r,t)&&this.utah(t,r,e++),t+=2,r-=2;while(t<this.numrows&&r>=0);t+=3,r++}while(t<this.numrows||r<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},n.prototype.module=function(e,t,r,i){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(r);o&=1<<8-i,this.setBit(t,e,o!==0)},n.prototype.utah=function(e,t,r){this.module(e-2,t-2,r,1),this.module(e-2,t-1,r,2),this.module(e-1,t-2,r,3),this.module(e-1,t-1,r,4),this.module(e-1,t,r,5),this.module(e,t-2,r,6),this.module(e,t-1,r,7),this.module(e,t,r,8)},n.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},n.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},n}(),y1=Wte;var eT,tT=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],$L=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],qte=301,Kte=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=qte);return{LOG:n,ALOG:e}},kh=(eT=Kte([],[]),eT.LOG),nT=eT.ALOG;var rT=129,_1=230,GL=231,zL=235,WL=236,qL=237,KL=238,YL=239,XL=240,E1=254,QL=254,bl="[)>05",Dl="[)>06",Rl="",Ge=0,an=1,xn=2,$t=3,Qt=4,hn=5;var Yte=function(){function n(){}return n.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var r=new ae;r.append(e);var i=t.getInterleavedBlockCount();if(i===1){var o=this.createECCBlock(e,t.getErrorCodewords());r.append(o)}else{for(var s=[],a=[],c=0;c<i;c++)s[c]=t.getDataLengthForInterleavedBlock(c+1),a[c]=t.getErrorLengthForInterleavedBlock(c+1);for(var u=0;u<i;u++){for(var l=new ae,f=u;f<t.getDataCapacity();f+=i)l.append(e.charAt(f));for(var o=this.createECCBlock(l.toString(),a[u]),h=0,p=u;p<a[u]*i;p+=i)r.setCharAt(t.getDataCapacity()+p,o.charAt(h++))}}return r.toString()},n.createECCBlock=function(e,t){for(var r=-1,i=0;i<tT.length;i++)if(tT[i]===t){r=i;break}if(r<0)throw new Error("Illegal number of error correction codewords specified: "+t);for(var o=$L[r],s=[],i=0;i<t;i++)s[i]=0;for(var i=0;i<e.length;i++){for(var a=s[t-1]^e.charAt(i).charCodeAt(0),c=t-1;c>0;c--)a!==0&&o[c]!==0?s[c]=s[c-1]^nT[(kh[a]+kh[o[c]])%255]:s[c]=s[c-1];a!==0&&o[0]!==0?s[0]=nT[(kh[a]+kh[o[0]])%255]:s[0]=0}for(var u=[],i=0;i<t;i++)u[i]=s[t-i-1];return u.map(function(l){return String.fromCharCode(l)}).join("")},n}(),w1=Yte;var iT=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ge},n.prototype.encode=function(e){var t=Ie.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case hn:e.writeCodeword(GL),e.signalEncoderChange(hn);return;case an:e.writeCodeword(_1),e.signalEncoderChange(an);return;case $t:e.writeCodeword(KL),e.signalEncoderChange($t);break;case xn:e.writeCodeword(YL),e.signalEncoderChange(xn);break;case Qt:e.writeCodeword(XL),e.signalEncoderChange(Qt);break;default:throw new Error("Illegal mode: "+i)}else Ie.isExtendedASCII(r)?(e.writeCodeword(zL),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Ie.isDigit(e)&&Ie.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}();var oT=function(){function n(){}return n.prototype.getEncodingMode=function(){return hn},n.prototype.encode=function(e){var t=new ae;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Ge);break}}var o=t.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,Ee.getCharAt(o));else if(o<=1555)t.setCharAt(0,Ee.getCharAt(Math.floor(o/250)+249)),t.insert(1,Ee.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,r=t.length();u<r;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}();var Tc=function(){function n(){}return n.prototype.getEncodingMode=function(){return an},n.prototype.encodeMaximal=function(e){for(var t=new ae,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,l=Math.floor(t.length()%3);(l===2&&u!==2||l===1&&(r>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(_1),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new ae;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new ae;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var u=t.length();if(u%3===0){var l=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(Ge);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(E1)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(E1),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(E1)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ge)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new ae;return o.append(r),o.append(i),o.toString()},n}();var sT=function(){function n(){}return n.prototype.getEncodingMode=function(){return Qt},n.prototype.encode=function(e){for(var t=new ae;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Ge);break}}}t.append(Ee.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),u=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(Ge)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Ee.getCharAt(e-64)):Ie.illegalCharacter(Ee.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,u=a>>8&255,l=a&255,f=new ae;return f.append(c),t>=2&&f.append(u),t>=3&&f.append(l),f.toString()},n}();var Xte=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qte=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=function(){function n(e,t,r,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,a;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=Qte(Jte),u=c.next();!u.done;u=c.next()){var l=u.value;if(!(t===1&&l.rectangular)&&!(t===2&&!l.rectangular)&&!(r!=null&&(l.getSymbolWidth()<r.getWidth()||l.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(l.getSymbolWidth()>i.getWidth()||l.getSymbolHeight()>i.getHeight()))&&e<=l.dataCapacity)return l}}catch(f){s={error:f}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),Nl=tt,Zte=function(n){Xte(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(tt),Jte=[new tt(!1,3,5,8,8,1),new tt(!1,5,7,10,10,1),new tt(!0,5,7,16,6,1),new tt(!1,8,10,12,12,1),new tt(!0,10,11,14,6,2),new tt(!1,12,12,14,14,1),new tt(!0,16,14,24,10,1),new tt(!1,18,14,16,16,1),new tt(!1,22,18,18,18,1),new tt(!0,22,18,16,10,2),new tt(!1,30,20,20,20,1),new tt(!0,32,24,16,14,2),new tt(!1,36,24,22,22,1),new tt(!1,44,28,24,24,1),new tt(!0,49,28,22,14,2),new tt(!1,62,36,14,14,4),new tt(!1,86,42,16,16,4),new tt(!1,114,48,18,18,4),new tt(!1,144,56,20,20,4),new tt(!1,174,68,22,22,4),new tt(!1,204,84,24,24,4,102,42),new tt(!1,280,112,14,14,16,140,56),new tt(!1,368,144,16,16,16,92,36),new tt(!1,456,192,18,18,16,114,48),new tt(!1,576,224,20,20,16,144,56),new tt(!1,696,272,22,22,16,174,68),new tt(!1,816,336,24,24,16,136,56),new tt(!1,1050,408,18,18,36,175,68),new tt(!1,1304,496,20,20,36,163,62),new Zte];var aT=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),r=new ae,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new ae,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Nl.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}();var ene=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cT=function(n){ene(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return $t},e.prototype.encode=function(t){for(var r=new ae;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=Ie.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Ge);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Ie.illegalCharacter(Ee.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(QL),t.getNewEncoding()<0&&t.signalEncoderChange(Ge)},e}(Tc);var tne=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uT=function(n){tne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return xn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(Tc);var nne=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=rT+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Tc,a=[new iT,s,new uT,new cT,new sT,new oT],c=new aT(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(bl)&&e.endsWith(Rl)?(c.writeCodeword(WL),c.setSkipAtEnd(2),c.pos+=bl.length):e.startsWith(Dl)&&e.endsWith(Rl)&&(c.writeCodeword(qL),c.setSkipAtEnd(2),c.pos+=Dl.length);var u=Ge;for(o&&(s.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var l=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();l<f&&u!==Ge&&u!==hn&&u!==Qt&&c.writeCodeword("\xFE");var h=c.getCodewords();for(h.length()<f&&h.append(rT);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===$t&&i===$t){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Ge}else if(r===Qt&&i===Qt){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Ge}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Ge?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(t+o===e.length){Xe.fill(s,0),Xe.fill(a,0);var c=this.findMinimums(i,a,de.MAX_VALUE,s),u=this.getMinimumCount(s);if(a[Ge]===c)return Ge;if(u===1){if(s[hn]>0)return hn;if(s[Qt]>0)return Qt;if(s[xn]>0)return xn;if(s[$t]>0)return $t}return an}var l=e.charCodeAt(t+o);if(o++,this.isDigit(l)?i[Ge]+=.5:this.isExtendedASCII(l)?(i[Ge]=Math.ceil(i[Ge]),i[Ge]+=2):(i[Ge]=Math.ceil(i[Ge]),i[Ge]++),this.isNativeC40(l)?i[an]+=2/3:this.isExtendedASCII(l)?i[an]+=8/3:i[an]+=4/3,this.isNativeText(l)?i[xn]+=2/3:this.isExtendedASCII(l)?i[xn]+=8/3:i[xn]+=4/3,this.isNativeX12(l)?i[$t]+=2/3:this.isExtendedASCII(l)?i[$t]+=13/3:i[$t]+=10/3,this.isNativeEDIFACT(l)?i[Qt]+=3/4:this.isExtendedASCII(l)?i[Qt]+=17/4:i[Qt]+=13/4,this.isSpecialB256(l)?i[hn]+=4:i[hn]++,o>=4){if(Xe.fill(s,0),Xe.fill(a,0),this.findMinimums(i,a,de.MAX_VALUE,s),a[Ge]<this.min(a[hn],a[an],a[xn],a[$t],a[Qt]))return Ge;if(a[hn]<a[Ge]||a[hn]+1<this.min(a[an],a[xn],a[$t],a[Qt]))return hn;if(a[Qt]+1<this.min(a[hn],a[an],a[xn],a[$t],a[Ge]))return Qt;if(a[xn]+1<this.min(a[hn],a[an],a[Qt],a[$t],a[Ge]))return xn;if(a[$t]+1<this.min(a[hn],a[an],a[Qt],a[xn],a[Ge]))return $t;if(a[an]+1<this.min(a[Ge],a[hn],a[Qt],a[xn])){if(a[an]<a[$t])return an;if(a[an]===a[$t]){for(var f=t+o+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return $t;if(!this.isNativeX12(h))break;f++}return an}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,Xe.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=de.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Ie=nne;var lT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZL=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return fn.encode(e,this.charset)!=null}catch{return!1}},n}(),JL=function(){function n(e,t,r){var i,o,s,a,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(b){return new ZL(Sc.forName(b))}),this.encoders=[];var l=[];l.push(new ZL(Mh.ISO_8859_1));for(var f=t!=null&&t.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var m=(i=void 0,lT(l)),y=m.next();!y.done;y=m.next()){var w=y.value,S=e.charAt(h),D=S.charCodeAt(0);if(D===r||w.canEncode(S)){p=!0;break}}}catch(b){i={error:b}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var P=(s=void 0,lT(this.ENCODERS)),F=P.next();!F.done;F=P.next()){var w=F.value;if(w.canEncode(e.charAt(h))){l.push(w),p=!0;break}}}catch(b){s={error:b}}finally{try{F&&!F.done&&(a=P.return)&&a.call(P)}finally{if(s)throw s.error}}p||(f=!0)}if(l.length===1&&!f)this.encoders=[l[0]];else{this.encoders=[];var H=0;try{for(var $=lT(l),T=$.next();!T.done;T=$.next()){var w=T.value;this.encoders[H++]=w}}catch(b){c={error:b}}finally{try{T&&!T.done&&(u=$.return)&&u.call($)}finally{if(c)throw c.error}}}var x=-1;if(t!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&t.name===this.encoders[h].name){x=h;break}}this.priorityEncoderIndex=x}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return fn.encode(Ee.getCharAt(e),this.encoders[t].name)},n}();var rne=3,t8=function(){function n(e,t,r){this.fnc1=r;var i=new JL(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new ae,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(a===s||t.canEncode(a,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),u=c+1);for(var l=c;l<u;l++)(a===s||t.canEncode(a,l))&&this.addEdge(r,i+1,new e8(a,t,l,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new e8[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<t.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][a],r);for(var a=0;a<t.length();a++)o[s-1][a]=null}for(var c=-1,u=de.MAX_VALUE,a=0;a<t.length();a++)if(o[i][a]!=null){var l=o[i][a];l.cachedTotalSize<u&&(u=l.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=o[i][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=t.encode(h.c,h.encoderIndex),s=p.length-1;s>=0;s--)f.unshift(p[s]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+t.getECIValue(h.encoderIndex)),h=h.previous}for(var y=[],s=0;s<y.length;s++)y[s]=f[s];return y},n}();var e8=function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=rne),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}();var ine=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},one=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},sne=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(one(arguments[e]));return n},ee=function(n){return n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256",n}(ee||{}),ane=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gn=function(){function n(){}return n.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},n.isInC40Shift1Set=function(e){return e<=31},n.isInC40Shift2Set=function(e,t){var r,i;try{for(var o=Fh(ane),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.charCodeAt(0)===e)return!0}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return e===t},n.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},n.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},n.encodeHighLevel=function(e,t,r,i){t===void 0&&(t=null),r===void 0&&(r=-1),i===void 0&&(i=0);var o=0;return e.startsWith(bl)&&e.endsWith(Rl)?(o=5,e=e.substring(bl.length,e.length-2)):e.startsWith(Dl)&&e.endsWith(Rl)&&(o=6,e=e.substring(Dl.length,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,sne(this.encode(e,t,r,i,o)))))},n.encode=function(e,t,r,i,o){return this.encodeMinimally(new une(e,t,r,i,o)).getBytes()},n.addEdge=function(e,t){var r=t.fromPosition+t.characterLength;(e[r][t.getEndMode()]===null||e[r][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[r][t.getEndMode()]=t)},n.getNumberOfC40Words=function(e,t,r,i){for(var o=0,s=t;s<e.length();s++){if(e.isECI(s))return i[0]=0,0;var a=e.charAt(s);if(r&&Ie.isNativeC40(a)||!r&&Ie.isNativeText(a))o++;else if(!n.isExtendedASCII(a,e.getFNC1Character()))o+=2;else{var c=a&255;c>=128&&(r&&Ie.isNativeC40(c-128)||!r&&Ie.isNativeText(c-128))?o+=3:o+=4}if(o%3===0||(o-2)%3===0&&s+1===e.length())return i[0]=s-t+1,Math.ceil(o/3)}return i[0]=0,0},n.addEdges=function(e,t,r,i){var o,s;if(e.isECI(r)){this.addEdge(t,new Wr(e,ee.ASCII,r,1,i));return}var a=e.charAt(r);if(i===null||i.getEndMode()!==ee.EDF){Ie.isDigit(a)&&e.haveNCharacters(r,2)&&Ie.isDigit(e.charAt(r+1))?this.addEdge(t,new Wr(e,ee.ASCII,r,2,i)):this.addEdge(t,new Wr(e,ee.ASCII,r,1,i));var c=[ee.C40,ee.TEXT];try{for(var u=Fh(c),l=u.next();!l.done;l=u.next()){var f=l.value,h=[];n.getNumberOfC40Words(e,r,f===ee.C40,h)>0&&this.addEdge(t,new Wr(e,f,r,h[0],i))}}catch(y){o={error:y}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}e.haveNCharacters(r,3)&&Ie.isNativeX12(e.charAt(r))&&Ie.isNativeX12(e.charAt(r+1))&&Ie.isNativeX12(e.charAt(r+2))&&this.addEdge(t,new Wr(e,ee.X12,r,3,i)),this.addEdge(t,new Wr(e,ee.B256,r,1,i))}var p;for(p=0;p<3;p++){var m=r+p;if(e.haveNCharacters(m,1)&&Ie.isNativeEDIFACT(e.charAt(m)))this.addEdge(t,new Wr(e,ee.EDF,r,p+1,i));else break}p===3&&e.haveNCharacters(r,4)&&Ie.isNativeEDIFACT(e.charAt(r+3))&&this.addEdge(t,new Wr(e,ee.EDF,r,4,i))},n.encodeMinimally=function(e){var t=e.length(),r=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,r,0,null);for(var i=1;i<=t;i++){for(var o=0;o<6;o++)r[i][o]!==null&&i<t&&this.addEdges(e,r,i,r[i][o]);for(var o=0;o<6;o++)r[i-1][o]=null}for(var s=-1,a=de.MAX_VALUE,o=0;o<6;o++)if(r[t][o]!==null){var c=r[t][o],u=o>=1&&o<=3?c.cachedTotalSize+1:c.cachedTotalSize;u<a&&(a=u,s=o)}if(s<0)throw new Error('Failed to encode "'+e+'"');return new cne(r[t][s])},n}();var cne=function(){function n(e){var t=e.input,r=0,i=[],o=[],s=[];(e.mode===ee.C40||e.mode===ee.TEXT||e.mode===ee.X12)&&e.getEndMode()!==ee.ASCII&&(r+=this.prepend(Wr.getBytes(254),i));for(var a=e;a!==null;)r+=this.prepend(a.getDataBytes(),i),(a.previous===null||a.getPreviousStartMode()!==a.getMode())&&(a.getMode()===ee.B256&&(r<=249?(i.unshift(r),r++):(i.unshift(r%250),i.unshift(r/250+249),r+=2),o.push(i.length),s.push(r)),this.prepend(a.getLatchBytes(),i),r=0),a=a.previous;t.getMacroId()===5?r+=this.prepend(Wr.getBytes(236),i):t.getMacroId()===6&&(r+=this.prepend(Wr.getBytes(237),i)),t.getFNC1Character()>0&&(r+=this.prepend(Wr.getBytes(232),i));for(var c=0;c<o.length;c++)this.applyRandomPattern(i,i.length-o[c],s[c]);var u=e.getMinSymbolSize(i.length);for(i.length<u&&i.push(129);i.length<u;)i.push(this.randomize253State(i.length+1));this.bytes=new Uint8Array(i.length);for(var c=0;c<this.bytes.length;c++)this.bytes[c]=i[c]}return n.prototype.prepend=function(e,t){for(var r=e.length-1;r>=0;r--)t.unshift(e[r]);return e.length},n.prototype.randomize253State=function(e){var t=149*e%253+1,r=129+t;return r<=254?r:r-254},n.prototype.applyRandomPattern=function(e,t,r){for(var i=0;i<r;i++){var o=t+i,s=e[o]&255,a=149*(o+1)%255+1,c=s+a;e[o]=c<=255?c:c-256}},n.prototype.getBytes=function(){return this.bytes},n}(),Wr=function(){function n(e,t,r,i,o){if(this.input=e,this.mode=t,this.fromPosition=r,this.characterLength=i,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(r+i<=e.length()))throw new Error("Invalid edge");var s=o!==null?o.cachedTotalSize:0,a=this.getPreviousMode();switch(t){case ee.ASCII:s++,(e.isECI(r)||Gn.isExtendedASCII(e.charAt(r),e.getFNC1Character()))&&s++,(a===ee.C40||a===ee.TEXT||a===ee.X12)&&s++;break;case ee.B256:s++,(a!==ee.B256||this.getB256Size()===250)&&s++,a===ee.ASCII?s++:(a===ee.C40||a===ee.TEXT||a===ee.X12)&&(s+=2);break;case ee.C40:case ee.TEXT:case ee.X12:if(t===ee.X12)s+=2;else{var c=[];s+=Gn.getNumberOfC40Words(e,r,t===ee.C40,c)*2}a===ee.ASCII||a===ee.B256?s++:a!==t&&(a===ee.C40||a===ee.TEXT||a===ee.X12)&&(s+=2);break;case ee.EDF:s+=3,a===ee.ASCII||a===ee.B256?s++:(a===ee.C40||a===ee.TEXT||a===ee.X12)&&(s+=2);break}this.cachedTotalSize=s}return n.prototype.getB256Size=function(){for(var e=0,t=this;t!==null&&t.mode===ee.B256&&e<=250;)e++,t=t.previous;return e},n.prototype.getPreviousStartMode=function(){return this.previous===null?ee.ASCII:this.previous.mode},n.prototype.getPreviousMode=function(){return this.previous===null?ee.ASCII:this.previous.getEndMode()},n.prototype.getEndMode=function(){if(this.mode===ee.EDF){if(this.characterLength<4)return ee.ASCII;var e=this.getLastASCII();if(e>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return ee.ASCII}if(this.mode===ee.C40||this.mode===ee.TEXT||this.mode===ee.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&this.getCodewordsRemaining(this.cachedTotalSize)===0)return ee.ASCII;var e=this.getLastASCII();if(e===1&&this.getCodewordsRemaining(this.cachedTotalSize+1)===0)return ee.ASCII}return this.mode},n.prototype.getMode=function(){return this.mode},n.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?Gn.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?Gn.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||Gn.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:Ie.isDigit(this.input.charAt(t))&&Ie.isDigit(this.input.charAt(t+1))?1:2:e-t===3?Ie.isDigit(this.input.charAt(t))&&Ie.isDigit(this.input.charAt(t+1))&&!Gn.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||Ie.isDigit(this.input.charAt(t+1))&&Ie.isDigit(this.input.charAt(t+2))&&!Gn.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:Ie.isDigit(this.input.charAt(t))&&Ie.isDigit(this.input.charAt(t+1))&&Ie.isDigit(this.input.charAt(t+2))&&Ie.isDigit(this.input.charAt(t+3))?2:0},n.prototype.getMinSymbolSize=function(e){var t,r,i,o,s,a;switch(this.input.getShapeHint()){case 1:try{for(var c=Fh(this.squareCodewordCapacities),u=c.next();!u.done;u=c.next()){var l=u.value;if(l>=e)return l}}catch(y){t={error:y}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}break;case 2:try{for(var f=Fh(this.rectangularCodewordCapacities),h=f.next();!h.done;h=f.next()){var l=h.value;if(l>=e)return l}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}break}try{for(var p=Fh(this.allCodewordCapacities),m=p.next();!m.done;m=p.next()){var l=m.value;if(l>=e)return l}}catch(y){s={error:y}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},n.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},n.getBytes=function(e,t){var r=new Uint8Array(t?2:1);return r[0]=e,t&&(r[1]=t),r},n.prototype.setC40Word=function(e,t,r,i,o){var s=1600*(r&255)+40*(i&255)+(o&255)+1;e[t]=s/256,e[t+1]=s%256},n.prototype.getX12Value=function(e){return e===13?0:e===42?1:e===62?2:e===32?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},n.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},n.prototype.getShiftValue=function(e,t,r){return t&&Gn.isInC40Shift1Set(e)||!t&&Gn.isInTextShift1Set(e)?0:t&&Gn.isInC40Shift2Set(e,r)||!t&&Gn.isInTextShift2Set(e,r)?1:2},n.prototype.getC40Value=function(e,t,r,i){if(r===i){if(t!==2)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?r<=31?r:r===32?3:r<=47?r-33:r<=57?r-44:r<=64?r-43:r<=90?r-51:r<=95?r-69:r<=127?r-96:r:r===0?0:t===0&&r<=3?r-1:t===1&&r<=31?r:r===32?3:r>=33&&r<=47?r-33:r>=48&&r<=57?r-44:r>=58&&r<=64?r-43:r>=65&&r<=90?r-64:r>=91&&r<=95?r-69:r===96?0:r>=97&&r<=122?r-83:r>=123&&r<=127?r-96:r},n.prototype.getC40Words=function(e,t){for(var r=[],i=0;i<this.characterLength;i++){var o=this.input.charAt(this.fromPosition+i);if(e&&Ie.isNativeC40(o)||!e&&Ie.isNativeText(o))r.push(this.getC40Value(e,0,o,t));else if(Gn.isExtendedASCII(o,t)){var a=(o&255)-128;if(e&&Ie.isNativeC40(a)||!e&&Ie.isNativeText(a))r.push(1),r.push(30),r.push(this.getC40Value(e,0,a,t));else{r.push(1),r.push(30);var s=this.getShiftValue(a,e,t);r.push(s),r.push(this.getC40Value(e,s,a,t))}}else{var s=this.getShiftValue(o,e,t);r.push(s),r.push(this.getC40Value(e,s,o,t))}}if(r.length%3!==0){if(!((r.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");r.push(0)}for(var c=new Uint8Array(r.length/3*2),u=0,i=0;i<r.length;i+=3)this.setC40Word(c,u,r[i]&255,r[i+1]&255,r[i+2]&255),u+=2;return c},n.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(e*3),r=this.fromPosition,i=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var s=[],a=0;a<4;a++)r<=i?s[a]=this.input.charAt(r++)&63:s[a]=r===i+1?31:0;var c=s[0]<<18;c|=s[1]<<12,c|=s[2]<<6,c|=s[3],t[o]=c>>16&255,t[o+1]=c>>8&255,t[o+2]=c&255}return t},n.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case ee.ASCII:case ee.B256:switch(this.mode){case ee.B256:return n.getBytes(231);case ee.C40:return n.getBytes(230);case ee.TEXT:return n.getBytes(239);case ee.X12:return n.getBytes(238);case ee.EDF:return n.getBytes(240)}break;case ee.C40:case ee.TEXT:case ee.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case ee.ASCII:return n.getBytes(254);case ee.B256:return n.getBytes(254,231);case ee.C40:return n.getBytes(254,230);case ee.TEXT:return n.getBytes(254,239);case ee.X12:return n.getBytes(254,238);case ee.EDF:return n.getBytes(254,240)}break;case ee.EDF:if(this.mode!==ee.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)},n.prototype.getDataBytes=function(){switch(this.mode){case ee.ASCII:return this.input.isECI(this.fromPosition)?n.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Gn.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?n.getBytes(235,this.input.charAt(this.fromPosition)-127):this.characterLength===2?n.getBytes(this.input.charAt(this.fromPosition)*10+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?n.getBytes(232):n.getBytes(this.input.charAt(this.fromPosition)+1);case ee.B256:return n.getBytes(this.input.charAt(this.fromPosition));case ee.C40:return this.getC40Words(!0,this.input.getFNC1Character());case ee.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case ee.X12:return this.getX12Words();case ee.EDF:return this.getEDFBytes()}},n}(),une=function(n){ine(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(t8);var xFe=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(o===void 0&&(o=null),e.trim()==="")throw new Error("Found empty contents");if(t!==X.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(r<0||i<0)throw new Error("Requested dimensions can't be negative: "+r+"x"+i);var s=0,a=null,c=null;if(o!=null){var u=o.get($e.DATA_MATRIX_SHAPE);u!=null&&(s=u);var l=o.get($e.MIN_SIZE);l!=null&&(a=l);var f=o.get($e.MAX_SIZE);f!=null&&(c=f)}var h,p=o!=null&&o.has($e.DATA_MATRIX_COMPACT)&&!!o.get($e.DATA_MATRIX_COMPACT).toString();if(p){var m=o.has($e.GS1_FORMAT)&&!!o.get($e.GS1_FORMAT).toString(),y=null,w=o.has($e.CHARACTER_SET);w&&(y=Sc.forName(o.get($e.CHARACTER_SET).toString())),h=Gn.encodeHighLevel(e,y,m?29:-1,s)}else{var S=o!=null&&o.has($e.FORCE_C40)&&!!o.get($e.FORCE_C40).toString();h=Ie.encodeHighLevel(e,s,a,c,S)}var D=Nl.lookup(h.length,s,a,c,!0),P=w1.encodeECC200(h,D),F=new y1(P,D.getSymbolDataWidth(),D.getSymbolDataHeight());return F.place(),this.encodeLowLevel(F,D,r,i)},n.prototype.encodeLowLevel=function(e,t,r,i){for(var o=t.getSymbolDataWidth(),s=t.getSymbolDataHeight(),a=new Oh(t.getSymbolWidth(),t.getSymbolHeight()),c=0,u=0;u<s;u++){var l=void 0;if(u%t.matrixHeight===0){l=0;for(var f=0;f<t.getSymbolWidth();f++)a.setBoolean(l,c,f%2===0),l++;c++}l=0;for(var f=0;f<o;f++)f%t.matrixWidth===0&&(a.setBoolean(l,c,!0),l++),a.setBoolean(l,c,e.getBit(f,u)),l++,f%t.matrixWidth===t.matrixWidth-1&&(a.setBoolean(l,c,u%2===0),l++);if(c++,u%t.matrixHeight===t.matrixHeight-1){l=0;for(var f=0;f<t.getSymbolWidth();f++)a.setBoolean(l,c,!0),l++;c++}}return this.convertByteMatrixToBitMatrix(a,r,i)},n.prototype.convertByteMatrixToBitMatrix=function(e,t,r){var i=e.getWidth(),o=e.getHeight(),s=Math.max(t,i),a=Math.max(r,o),c=Math.min(s/i,a/o),u=(s-i*c)/2,l=(a-o*c)/2,f;r<o||t<i?(u=0,l=0,f=new Et(i,o)):f=new Et(t,r),f.clear();for(var h=0,p=l;h<o;h++,p+=c)for(var m=0,y=u;m<i;m++,y+=c)e.get(m,h)===1&&f.setRegion(y,p,c,c);return f},n}();var lne=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),dT=lne;var dne=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),fT=dne;var fne=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),n8=fne;var hne=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pne=function(n){hne(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+de.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(n8),Ol=pne;var gne=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mne=function(n){gne(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Ol),r8=mne;function i8(n,e,t){return new r8(n,e,t)}function Pl(n,e,t){return new Ol(n,e,t)}var o8=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ii=0,Ml=1,zn=2,I1=3,mr=4,s8=new Ol(null,0,0);var x1=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var _ne=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ene(n){var e,t;try{for(var r=_ne(n),i=r.next();!i.done;i=r.next()){var o=i.value;Xe.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Ii][mr]=0,n[Ml][mr]=0,n[Ml][Ii]=28,n[I1][mr]=0,n[zn][mr]=0,n[zn][Ii]=15,n}var A1=Ene(Xe.createInt32Array(6,6));var wne=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ine=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=x1[this.mode][e];i=Pl(i,o&65535,o>>16),r+=o>>16}var s=e===zn?4:5;return i=Pl(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===zn?4:5;return r=Pl(r,A1[this.mode][e],i),r=Pl(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===mr||this.mode===zn){var o=x1[r][Ii];t=Pl(t,o&65535,o>>16),i+=o>>16,r=Ii}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new n(t,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=i8(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(x1[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new yt;try{for(var a=wne(i),c=a.next();!c.done;c=a.next()){var u=c.value;u.appendTo(s,e)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return Ee.format("%s bits=%d bytes=%d",o8[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(s8,Ii,0,0),n}(),c8=Ine;function Cne(n){var e=Ee.getCharCode(" "),t=Ee.getCharCode("."),r=Ee.getCharCode(",");n[Ii][e]=1;for(var i=Ee.getCharCode("Z"),o=Ee.getCharCode("A"),s=o;s<=i;s++)n[Ii][s]=s-o+2;n[Ml][e]=1;for(var a=Ee.getCharCode("z"),c=Ee.getCharCode("a"),s=c;s<=a;s++)n[Ml][s]=s-c+2;n[zn][e]=1;for(var u=Ee.getCharCode("9"),l=Ee.getCharCode("0"),s=l;s<=u;s++)n[zn][s]=s-l+2;n[zn][r]=12,n[zn][t]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],h=0;h<f.length;h++)n[I1][Ee.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)Ee.getCharCode(p[h])>0&&(n[mr][Ee.getCharCode(p[h])]=h);return n}var S1=Cne(Xe.createInt32Array(5,256));var T1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ane=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Ee.getCharCode(" "),t=Ee.getCharCode(`
`),r=fT.singletonList(c8.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ee.getCharCode("\r"):o=s===t?2:0;break;case Ee.getCharCode("."):o=s===e?3:0;break;case Ee.getCharCode(","):o=s===e?4:0;break;case Ee.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=fT.min(r,function(c,u){return c.getBitCount()-u.getBitCount()});return a.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=T1(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,t,o)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=S1[e.getMode()][i]>0,s=null,a=0;a<=mr;a++){var c=S1[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||a===e.getMode()||a===zn){var u=s.latchAndAppend(a,c);r.push(u)}if(!o&&A1[e.getMode()][a]>=0){var l=s.shiftAndAppend(a,c);r.push(l)}}}if(e.getBinaryShiftByteCount()>0||S1[e.getMode()][i]===0){var f=e.addBinaryShiftChar(t);r.push(f)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var a=T1(e),c=a.next();!c.done;c=a.next()){var u=c.value;this.updateStateForPair(u,t,r,s)}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(mr,r)),e.getMode()!==mr&&i.push(o.shiftAndAppend(mr,r)),r===3||r===4){var s=o.latchAndAppend(zn,16-r).latchAndAppend(zn,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var a=T1(e),c=a.next();!c.done;c=a.next()){var u=c.value,l=!0,f=function(w){if(w.isBetterThanOrEqualTo(u))return l=!1,"break";u.isBetterThanOrEqualTo(w)&&(s=s.filter(function(S){return S!==w}))};try{for(var h=(i=void 0,T1(s)),p=h.next();!p.done;p=h.next()){var m=p.value,y=f(m);if(y==="break")break}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}l&&s.push(u)}}catch(w){t={error:w}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n}(),hT=Ane;var Sne=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tne=function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new hT(e).encode(),o=de.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,a,c,u,l,f;if(r!==n.DEFAULT_AZTEC_LAYERS){if(a=r<0,c=Math.abs(r),c>(a?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Y(Ee.format("Illegal value %s for layers",r));u=n.totalBitsInLayer(c,a),l=n.WORD_SIZE[c];var h=u-u%l;if(f=n.stuffBits(i,l),f.getSize()+o>h)throw new Y("Data to large for user specified layer");if(a&&f.getSize()>l*64)throw new Y("Data to large for user specified layer")}else{l=0,f=null;for(var p=0;;p++){if(p>n.MAX_NB_BITS)throw new Y("Data too large for an Aztec code");if(a=p<=3,c=a?p+1:p,u=n.totalBitsInLayer(c,a),!(s>u)){(f==null||l!==n.WORD_SIZE[c])&&(l=n.WORD_SIZE[c],f=n.stuffBits(i,l));var h=u-u%l;if(!(a&&f.getSize()>l*64)&&f.getSize()+o<=h)break}}}var m=n.generateCheckWords(f,u,l),y=f.getSize()/l,w=n.generateModeMessage(a,c,y),S=(a?11:14)+c*4,D=new Int32Array(S),P;if(a){P=S;for(var p=0;p<D.length;p++)D[p]=p}else{P=S+1+2*de.truncDivision(de.truncDivision(S,2)-1,15);for(var F=de.truncDivision(S,2),H=de.truncDivision(P,2),p=0;p<F;p++){var $=p+de.truncDivision(p,15);D[F-p-1]=H-$-1,D[F+p]=H+$+1}}for(var T=new Et(P),p=0,x=0;p<c;p++){for(var b=(c-p)*4+(a?9:12),N=0;N<b;N++)for(var M=N*2,k=0;k<2;k++)m.get(x+M+k)&&T.set(D[p*2+k],D[p*2+N]),m.get(x+b*2+M+k)&&T.set(D[p*2+N],D[S-1-p*2-k]),m.get(x+b*4+M+k)&&T.set(D[S-1-p*2-k],D[S-1-p*2-N]),m.get(x+b*6+M+k)&&T.set(D[S-1-p*2-N],D[p*2+k]);x+=b*8}if(n.drawModeMessage(T,a,P,w),a)n.drawBullsEye(T,de.truncDivision(P,2),5);else{n.drawBullsEye(T,de.truncDivision(P,2),7);for(var p=0,N=0;p<de.truncDivision(S,2)-1;p+=15,N+=16)for(var k=de.truncDivision(P,2)&1;k<P;k+=2)T.set(de.truncDivision(P,2)-N,k),T.set(de.truncDivision(P,2)+N,k),T.set(k,de.truncDivision(P,2)-N),T.set(k,de.truncDivision(P,2)+N)}var R=new dT;return R.setCompact(a),R.setSize(P),R.setLayers(c),R.setCodeWords(y),R.setMatrix(T),R},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new yt;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=de.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+de.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,a=new Nh(n.getGF(r)),c=de.truncDivision(t,r),u=n.bitsToWords(e,r,c);a.encode(u,c-s);var l=t%r,f=new yt;f.appendBits(0,l);try{for(var h=Sne(Array.from(u)),p=h.next();!p.done;p=h.next()){var m=p.value;f.appendBits(m,r)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return f},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var a=0,c=0;c<t;c++)a|=e.get(o*t+c)?1<<t-c-1:0;i[o]=a}return i},n.getGF=function(e){switch(e){case 4:return Ht.AZTEC_PARAM;case 6:return Ht.AZTEC_DATA_6;case 8:return Ht.AZTEC_DATA_8;case 10:return Ht.AZTEC_DATA_10;case 12:return Ht.AZTEC_DATA_12;default:throw new Y("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new yt,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var a=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(a|=1<<t-1-c);(a&o)===o?(r.appendBits(a&o,t),s--):(a&o)===0?(r.appendBits(a|1,t),s--):r.appendBits(a,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n}(),Lh=Tne;var hLe=function(){function n(){}return n.prototype.encode=function(e,t,r,i){return this.encodeWithHints(e,t,r,i,null)},n.prototype.encodeWithHints=function(e,t,r,i,o){var s=Mh.ISO_8859_1,a=Lh.DEFAULT_EC_PERCENT,c=Lh.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has($e.CHARACTER_SET)&&(s=Sc.forName(o.get($e.CHARACTER_SET).toString())),o.has($e.ERROR_CORRECTION)&&(a=de.parseInt(o.get($e.ERROR_CORRECTION).toString())),o.has($e.AZTEC_LAYERS)&&(c=de.parseInt(o.get($e.AZTEC_LAYERS).toString()))),n.encodeLayers(e,t,r,i,s,a,c)},n.encodeLayers=function(e,t,r,i,o,s,a){if(t!==X.AZTEC)throw new Y("Can only encode AZTEC, but got "+t);var c=Lh.encode(Ee.getBytes(e,o),s,a);return n.renderResult(c,r,i)},n.renderResult=function(e,t,r){var i=e.getMatrix();if(i==null)throw new bn;for(var o=i.getWidth(),s=i.getHeight(),a=Math.max(t,o),c=Math.max(r,s),u=Math.min(a/o,c/s),l=(a-o*u)/2,f=(c-s*u)/2,h=new Et(a,c),p=0,m=f;p<s;p++,m+=u)for(var y=0,w=l;y<o;y++,w+=u)i.get(y,p)&&h.setRegion(w,m,u,u);return h},n}();var kl=(()=>{let e=class e{constructor(){this.firestore=z(mi),this.productsCollection=gc(this.firestore,"products")}getProductByQR(r){try{return We(vi(yi(this.productsCollection,_i("qrCode","==",r)))).pipe(we(i=>{if(i.empty)return null;let o=i.docs[0],s=o.data();return G({id:o.id},s)}))}catch(i){return console.error("Error in getProductByQR:",i),We(Promise.resolve(null))}}getProductById(r){try{return We(fh(pr(this.firestore,"products",r))).pipe(we(i=>{if(i.exists()){let o=i.data();return G({id:i.id},o)}return null}))}catch(i){return console.error("Error in getProductById:",i),We(Promise.resolve(null))}}getUserCertificates(r){try{return We(vi(yi(this.productsCollection,_i("verifiedBy","==",r)))).pipe(we(i=>i.docs.map(o=>{let s=o.data();return G({id:o.id},s)})))}catch(i){return console.error("Error in getUserCertificates:",i),We(Promise.resolve([]))}}verifyProduct(r,i){return E(this,null,function*(){try{let o=pr(this.firestore,"products",r);yield Uo(o,{"inspection.lastInspectionDate":new Date,"inspection.inspectorId":i,"inspection.status":"completed",updatedAt:new Date})}catch(o){throw console.error("Error in verifyProduct:",o),new Error("Failed to verify product")}})}getProductFromFirebase(r){return E(this,null,function*(){try{console.log("Searching for product with QR code:",r);let i=yield vi(yi(this.productsCollection,_i("qrCode","==",r)));if(i.empty){let a=r;r.includes("/verify/")&&(a=r.split("/verify/")[1]),console.log("Trying to find by product ID:",a),i=yield vi(yi(this.productsCollection,_i("id","==",a)))}if(i.empty)return console.log("No product found for QR code or ID:",r),null;let o=i.docs[0],s=o.data();return console.log("Product found:",s),le(G({id:o.id},s),{createdAt:s.createdAt?.toDate()||new Date,updatedAt:s.updatedAt?.toDate()||new Date,manufacturer:le(G({},s.manufacturer),{manufacturingDate:s.manufacturer?.manufacturingDate?.toDate()||new Date,expiryDate:s.manufacturer?.expiryDate?.toDate()||new Date}),certificate:le(G({},s.certificate),{issueDate:s.certificate?.issueDate?.toDate()||new Date}),warranty:le(G({},s.warranty),{startDate:s.warranty?.startDate?.toDate()||new Date,endDate:s.warranty?.endDate?.toDate()||new Date}),inspection:le(G({},s.inspection),{lastInspectionDate:s.inspection?.lastInspectionDate?.toDate()||new Date,nextDueDate:s.inspection?.nextDueDate?.toDate()||new Date}),logistics:le(G({},s.logistics),{estimatedDelivery:s.logistics?.estimatedDelivery?.toDate()})})}catch(i){return console.error("Error fetching product from Firebase:",i),null}})}createProduct(r){return E(this,null,function*(){try{let i=le(G({},r),{createdAt:new Date,updatedAt:new Date});return(yield kv(this.productsCollection,i)).id}catch(i){throw console.error("Error creating product:",i),new Error("Failed to create product")}})}updateProduct(r,i){return E(this,null,function*(){try{let o=pr(this.firestore,"products",r);yield Uo(o,le(G({},i),{updatedAt:new Date}))}catch(o){throw console.error("Error updating product:",o),new Error("Failed to update product")}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var b1=(()=>{let e=class e{constructor(){this.firestore=z(mi),this.notificationsCollection=gc(this.firestore,"notifications")}getUserNotifications(r){return We(vi(yi(this.notificationsCollection,_i("userId","==",r)))).pipe(we(i=>i.docs.map(o=>{let s=o.data();return G({id:o.id},s)}).sort((o,s)=>s.createdAt.getTime()-o.createdAt.getTime())))}markAsRead(r){return E(this,null,function*(){let i=pr(this.firestore,"notifications",r);yield Uo(i,{isRead:!0})})}createNotification(r){return E(this,null,function*(){try{let i=le(G({},r),{createdAt:new Date});return(yield kv(this.notificationsCollection,i)).id}catch(i){throw console.error("Error creating notification:",i),new Error("Failed to create notification")}})}getNotificationsFromFirebase(r){return E(this,null,function*(){try{return(yield vi(yi(this.notificationsCollection,_i("userId","==",r)))).docs.map(o=>{let s=o.data();return le(G({id:o.id},s),{createdAt:s.createdAt?.toDate()||new Date})}).sort((o,s)=>s.createdAt.getTime()-o.createdAt.getTime())}catch(i){return console.error("Error fetching notifications from Firebase:",i),[]}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var bne=["video"];function Dne(n,e){n&1&&(_(0,"div",33)(1,"div",34),ue(),_(2,"svg",35),te(3,"circle",36)(4,"path",37),C(),O(5," Scanning for QR codes... "),C()())}function Rne(n,e){if(n&1&&(_(0,"div",33)(1,"div",38),ue(),_(2,"svg",39),te(3,"path",40),C(),O(4),C()()),n&2){let t=Pe();U(4),Qe(" ",t.error," ")}}function Nne(n,e){if(n&1){let t=Nt();_(0,"button",41),ge("click",function(){at(t);let i=Pe();return ct(i.startScanning())}),O(1," Start Camera "),C()}}function One(n,e){if(n&1){let t=Nt();_(0,"button",42),ge("click",function(){at(t);let i=Pe();return ct(i.stopScanning())}),O(1," Stop Camera "),C()}}function Pne(n,e){if(n&1){let t=Nt();_(0,"button",43),ge("click",function(){at(t);let i=Pe();return ct(i.switchCamera())}),O(1," Switch Camera "),C()}}function Mne(n,e){if(n&1){let t=Nt();_(0,"div",47),ge("click",function(){let i=at(t).$implicit,o=Pe(2);return ct(o.viewProduct(i.productId))}),_(1,"div")(2,"p",48),O(3),C(),_(4,"p",49),O(5),C(),_(6,"p",50),O(7),Ot(8,"date"),C()(),_(9,"div",51),O(10),C()()}if(n&2){let t=e.$implicit;U(3),_e(t.productName),U(2),_e(t.qrCode),U(2),_e(Vn(8,6,t.scannedAt,"short")),U(2),It(t.isAuthentic?"text-green-600":"text-red-600"),U(),Qe(" ",t.isAuthentic?"\u2713 Authentic":"\u2717 Suspicious"," ")}}function kne(n,e){if(n&1&&(_(0,"div",44)(1,"h3",28),O(2,"Recent Scans"),C(),_(3,"div",45),xe(4,Mne,11,9,"div",46),C()()),n&2){let t=Pe();U(4),oe("ngForOf",t.recentScans)}}var gT=(()=>{let e=class e{constructor(r,i,o,s){this.router=r,this.productService=i,this.notificationService=o,this.authService=s,this.scanning=!1,this.error="",this.manualQrCode="",this.recentScans=[],this.codeReader=new BL}ngOnInit(){let r=localStorage.getItem("recentScans");r&&(this.recentScans=JSON.parse(r))}ngOnDestroy(){this.stopScanning()}startScanning(){return E(this,null,function*(){try{this.error="",this.scanning=!0;let r=yield this.codeReader.listVideoInputDevices();if(r.length===0)throw new Error("No camera devices found");yield this.codeReader.decodeFromVideoDevice(r[0].deviceId,this.videoElement.nativeElement,i=>{this.handleScanResult(i.getText())})}catch(r){console.error("Error starting scanner:",r),this.error=r.message||"Failed to start camera",this.scanning=!1}})}stopScanning(){this.scanning=!1,this.codeReader.reset()}switchCamera(){return E(this,null,function*(){try{let r=yield this.codeReader.listVideoInputDevices();if(r.length<2){this.error="No additional cameras available";return}let i=yield this.codeReader.getVideoInputDevices(),s=(r.findIndex(a=>a.deviceId===i[0]?.deviceId)+1)%r.length;this.stopScanning(),yield this.startScanning()}catch{this.error="Failed to switch camera"}})}handleScanResult(r){return E(this,null,function*(){try{console.log("QR Code scanned:",r),this.stopScanning();let i=yield this.productService.getProductFromFirebase(r);i?(this.addToRecentScans(i),this.router.navigate(["/product",i.id])):(yield this.handleProductNotFound(r),this.error="Product not found in database",setTimeout(()=>this.startScanning(),3e3))}catch(i){console.error("Error handling scan result:",i),this.error="Error processing QR code",setTimeout(()=>this.startScanning(),3e3)}})}searchProduct(){return E(this,null,function*(){if(this.manualQrCode.trim())try{let r=yield this.productService.getProductFromFirebase(this.manualQrCode.trim());r?(this.addToRecentScans(r),this.router.navigate(["/product",r.id])):(yield this.handleProductNotFound(this.manualQrCode.trim()),this.error="Product not found in database")}catch(r){console.error("Error searching product:",r),this.error="Error searching for product"}})}addToRecentScans(r){let i={productId:r.id,productName:r.name,qrCode:r.qrCode,isAuthentic:r.isAuthentic,scannedAt:new Date};this.recentScans.unshift(i),this.recentScans.length>10&&(this.recentScans=this.recentScans.slice(0,10)),localStorage.setItem("recentScans",JSON.stringify(this.recentScans))}handleProductNotFound(r){return E(this,null,function*(){let i=this.authService.getCurrentUser();if(i)try{yield this.notificationService.createNotification({userId:i.uid,type:"fake_qr",title:"Unknown QR Code Detected",message:`QR Code "${r}" not found in database. This may be a counterfeit product.`,isRead:!1,priority:"high"})}catch(o){console.error("Error creating notification:",o)}})}viewProduct(r){this.router.navigate(["/product",r])}goBack(){this.router.navigate(["/dashboard"])}};e.\u0275fac=function(i){return new(i||e)(J(rt),J(kl),J(b1),J(Hn))},e.\u0275cmp=Kt({type:e,selectors:[["app-scanner"]],viewQuery:function(i,o){if(i&1&&qE(bne,5),i&2){let s;Xg(s=Qg())&&(o.videoElement=s.first)}},decls:39,vars:8,consts:[["video",""],[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","items-center","h-16"],[1,"mr-4","p-2","rounded-md","text-gray-400","hover:text-gray-600","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","font-bold","text-gray-900"],[1,"max-w-4xl","mx-auto","py-8","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-xl","shadow-md","p-6","mb-8"],[1,"text-center","mb-6"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"relative"],["autoplay","",1,"w-full","max-w-md","mx-auto","rounded-lg","border-2","border-gray-300"],[1,"absolute","inset-0","max-w-md","mx-auto","flex","items-center","justify-center","pointer-events-none"],[1,"w-64","h-64","border-2","border-blue-500","rounded-lg","relative"],[1,"absolute","top-0","left-0","w-8","h-8","border-t-4","border-l-4","border-blue-500"],[1,"absolute","top-0","right-0","w-8","h-8","border-t-4","border-r-4","border-blue-500"],[1,"absolute","bottom-0","left-0","w-8","h-8","border-b-4","border-l-4","border-blue-500"],[1,"absolute","bottom-0","right-0","w-8","h-8","border-b-4","border-r-4","border-blue-500"],["class","text-center mt-4",4,"ngIf"],[1,"flex","justify-center","space-x-4","mt-6"],["class","bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors duration-200",3,"click",4,"ngIf"],["class","bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors duration-200",3,"click",4,"ngIf"],["class","bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors duration-200",3,"click",4,"ngIf"],[1,"bg-white","rounded-xl","shadow-md","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"flex","space-x-4"],["type","text","placeholder","Enter QR Code or Product ID",1,"flex-1","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors","duration-200",3,"click","disabled"],["class","bg-white rounded-xl shadow-md p-6 mt-8",4,"ngIf"],[1,"text-center","mt-4"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-100","text-blue-800","rounded-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"inline-flex","items-center","px-4","py-2","bg-red-100","text-red-800","rounded-full"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors","duration-200",3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors","duration-200",3,"click"],[1,"bg-gray-600","hover:bg-gray-700","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors","duration-200",3,"click"],[1,"bg-white","rounded-xl","shadow-md","p-6","mt-8"],[1,"space-y-3"],["class","flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-3","bg-gray-50","rounded-lg","hover:bg-gray-100","transition-colors","duration-200","cursor-pointer",3,"click"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500"],[1,"font-semibold"]],template:function(i,o){if(i&1){let s=Nt();_(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),ge("click",function(){return at(s),ct(o.goBack())}),ue(),_(5,"svg",6),te(6,"path",7),C()(),ye(),_(7,"h1",8),O(8,"QR Code Scanner"),C()()()(),_(9,"main",9)(10,"div",10)(11,"div",11)(12,"h2",12),O(13,"Scan QR Code"),C(),_(14,"p",13),O(15,"Point your camera at a QR code to verify product authenticity"),C()(),_(16,"div",14),te(17,"video",15,0),_(19,"div",16)(20,"div",17),te(21,"div",18)(22,"div",19)(23,"div",20)(24,"div",21),C()(),xe(25,Dne,6,0,"div",22)(26,Rne,5,1,"div",22),C(),_(27,"div",23),xe(28,Nne,2,0,"button",24)(29,One,2,0,"button",25)(30,Pne,2,0,"button",26),C()(),_(31,"div",27)(32,"h3",28),O(33,"Manual Search"),C(),_(34,"div",29)(35,"input",30),Jg("ngModelChange",function(c){return at(s),KE(o.manualQrCode,c)||(o.manualQrCode=c),ct(c)}),C(),_(36,"button",31),ge("click",function(){return at(s),ct(o.searchProduct())}),O(37," Search "),C()()(),xe(38,kne,5,1,"div",32),C()()}i&2&&(U(25),oe("ngIf",o.scanning),U(),oe("ngIf",o.error),U(2),oe("ngIf",!o.scanning),U(),oe("ngIf",o.scanning),U(),oe("ngIf",o.scanning),U(5),Zg("ngModel",o.manualQrCode),U(),oe("disabled",!o.manualQrCode),U(2),oe("ngIf",o.recentScans.length>0))},dependencies:[yn,Oi,Tn,_o,MF,zs,hl,CS],encapsulation:2});let n=e;return n})();var l8=(()=>{let e=class e{transform(r,i,o){return r&&r.replace(new RegExp(i,"g"),o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=fu({name:"replace",type:e,pure:!0});let n=e;return n})();function Fne(n,e){n&1&&(ue(),_(0,"svg",62),te(1,"path",34),C())}function Lne(n,e){n&1&&(ue(),_(0,"svg",62),te(1,"path",63),C())}function Vne(n,e){if(n&1&&(_(0,"div")(1,"p",23),O(2,"Estimated Delivery"),C(),_(3,"p",28),O(4),Ot(5,"date"),C()()),n&2){let t=Pe(2);U(4),_e(Vn(5,1,t.product.logistics.estimatedDelivery,"mediumDate"))}}function Bne(n,e){if(n&1){let t=Nt();_(0,"button",64),ge("click",function(){at(t);let i=Pe(2);return ct(i.verifyProduct())}),ue(),_(1,"svg",57),te(2,"path",65),C(),ye(),_(3,"span"),O(4,"Verify Product"),C()()}}function Une(n,e){if(n&1){let t=Nt();_(0,"main",9)(1,"div",10)(2,"div",11)(3,"div",12),xe(4,Fne,2,0,"svg",13)(5,Lne,2,0,"svg",13),C(),_(6,"div")(7,"h2",14),O(8),C(),_(9,"p",15),O(10),C()()()(),_(11,"div",16)(12,"div",17)(13,"div",18)(14,"h3",19),ue(),_(15,"svg",20),te(16,"path",21),C(),O(17," Product Information "),C(),ye(),_(18,"div",22)(19,"div")(20,"p",23),O(21,"Product Name"),C(),_(22,"p",24),O(23),C()(),_(24,"div")(25,"p",23),O(26,"Product ID"),C(),_(27,"p",25),O(28),C()(),_(29,"div")(30,"p",23),O(31,"QR Code"),C(),_(32,"p",25),O(33),C()()()(),_(34,"div",18)(35,"h3",19),ue(),_(36,"svg",20),te(37,"path",26),C(),O(38," Manufacturer Details "),C(),ye(),_(39,"div",22)(40,"div")(41,"p",23),O(42,"Company"),C(),_(43,"p",27),O(44),C()(),_(45,"div")(46,"p",23),O(47,"Location"),C(),_(48,"p",28),O(49),C()(),_(50,"div",29)(51,"div")(52,"p",23),O(53,"Manufacturing Date"),C(),_(54,"p",28),O(55),Ot(56,"date"),C()(),_(57,"div")(58,"p",23),O(59,"Expiry Date"),C(),_(60,"p",28),O(61),Ot(62,"date"),C()()()()(),_(63,"div",18)(64,"h3",19),ue(),_(65,"svg",20),te(66,"path",30),C(),O(67," Vendor Information "),C(),ye(),_(68,"div",22)(69,"div")(70,"p",23),O(71,"Vendor Name"),C(),_(72,"p",27),O(73),C()(),_(74,"div")(75,"p",23),O(76,"Address"),C(),_(77,"p",28),O(78),C()(),_(79,"div",29)(80,"div")(81,"p",23),O(82,"Phone"),C(),_(83,"a",31),O(84),C()(),_(85,"div")(86,"p",23),O(87,"Email"),C(),_(88,"a",31),O(89),C()()()()()(),_(90,"div",17)(91,"div",18)(92,"h3",19),ue(),_(93,"svg",20),te(94,"path",32),C(),O(95," Blockchain Certificate "),C(),ye(),_(96,"div",22)(97,"div")(98,"p",23),O(99,"Certificate Number"),C(),_(100,"p",25),O(101),C()(),_(102,"div")(103,"p",23),O(104,"Issued By"),C(),_(105,"p",27),O(106),C()(),_(107,"div")(108,"p",23),O(109,"Issue Date"),C(),_(110,"p",28),O(111),Ot(112,"date"),C()(),_(113,"div")(114,"p",23),O(115,"Blockchain Hash"),C(),_(116,"p",33),O(117),C()()()(),_(118,"div",18)(119,"h3",19),ue(),_(120,"svg",20),te(121,"path",34),C(),O(122," Warranty Status "),C(),ye(),_(123,"div",22)(124,"div",35)(125,"p",36),O(126),C(),_(127,"p",37),O(128),C()(),_(129,"div",29)(130,"div")(131,"p",23),O(132,"Start Date"),C(),_(133,"p",28),O(134),Ot(135,"date"),C()(),_(136,"div")(137,"p",23),O(138,"End Date"),C(),_(139,"p",28),O(140),Ot(141,"date"),C()()()()(),_(142,"div",18)(143,"h3",19),ue(),_(144,"svg",20),te(145,"path",38),C(),O(146," Inspection Details "),C(),ye(),_(147,"div",22)(148,"div",35)(149,"p",36),O(150),Ot(151,"titlecase"),C(),_(152,"p",37),O(153),C()(),_(154,"div",29)(155,"div")(156,"p",23),O(157,"Last Inspection"),C(),_(158,"p",28),O(159),Ot(160,"date"),C()(),_(161,"div")(162,"p",23),O(163,"Next Due"),C(),_(164,"p",28),O(165),Ot(166,"date"),C()()()()(),_(167,"div",18)(168,"h3",19),ue(),_(169,"svg",20),te(170,"path",39),C(),O(171," Logistics Status "),C(),ye(),_(172,"div",22)(173,"div",35)(174,"p",36),O(175),Ot(176,"titlecase"),Ot(177,"replace"),C(),_(178,"p",37),O(179),C()(),xe(180,Vne,6,4,"div",40),C()()()(),_(181,"div",41)(182,"h3",19),ue(),_(183,"svg",20),te(184,"path",42),C(),O(185," Management Contact "),C(),ye(),_(186,"div",43)(187,"a",44)(188,"div",45),ue(),_(189,"svg",46),te(190,"path",42),C()(),ye(),_(191,"div")(192,"p",27),O(193,"Call Support"),C(),_(194,"p",47),O(195),C()()(),_(196,"a",48)(197,"div",49),ue(),_(198,"svg",50),te(199,"path",51),C()(),ye(),_(200,"div")(201,"p",27),O(202,"Email Support"),C(),_(203,"p",47),O(204),C()()(),_(205,"a",52)(206,"div",45),ue(),_(207,"svg",53),te(208,"path",54),C()(),ye(),_(209,"div")(210,"p",27),O(211,"WhatsApp"),C(),_(212,"p",47),O(213),C()()()()(),_(214,"div",55)(215,"button",56),ge("click",function(){at(t);let i=Pe();return ct(i.downloadCertificate())}),ue(),_(216,"svg",57),te(217,"path",58),C(),ye(),_(218,"span"),O(219,"Download PDF"),C()(),_(220,"button",59),ge("click",function(){at(t);let i=Pe();return ct(i.shareCertificate())}),ue(),_(221,"svg",57),te(222,"path",60),C(),ye(),_(223,"span"),O(224,"Share Certificate"),C()(),xe(225,Bne,5,0,"button",61),C()()}if(n&2){let t=Pe();U(),It(t.product.isAuthentic?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),U(2),It(t.product.isAuthentic?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),U(),oe("ngIf",t.product.isAuthentic),U(),oe("ngIf",!t.product.isAuthentic),U(2),It(t.product.isAuthentic?"text-green-800":"text-red-800"),U(),Qe(" ",t.product.isAuthentic?"Authentic Product \u2705":"Warning: Suspicious Product \u274C"," "),U(),It(t.product.isAuthentic?"text-green-600":"text-red-600"),U(),Qe(" ",t.product.isAuthentic?"Blockchain verified and secure":"This product may be counterfeit"," "),U(13),_e(t.product.name),U(5),_e(t.product.id),U(5),_e(t.product.qrCode),U(11),_e(t.product.manufacturer.company),U(5),_e(t.product.manufacturer.location),U(6),_e(Vn(56,58,t.product.manufacturer.manufacturingDate,"mediumDate")),U(6),_e(Vn(62,61,t.product.manufacturer.expiryDate,"mediumDate")),U(12),_e(t.product.vendor.name),U(5),_e(t.product.vendor.address),U(5),oe("href",Na("tel:",t.product.vendor.phone),ms),U(),_e(t.product.vendor.phone),U(4),oe("href",Na("mailto:",t.product.vendor.email),ms),U(),_e(t.product.vendor.email),U(12),_e(t.product.certificate.certificateNumber),U(5),_e(t.product.certificate.issuedBy),U(5),_e(Vn(112,64,t.product.certificate.issueDate,"mediumDate")),U(6),_e(t.product.certificate.blockchainHash),U(7),It(t.product.warranty.isActive?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),U(2),Qe(" ",t.product.warranty.isActive?"Active Warranty":"Warranty Expired"," "),U(2),Qe(" ",t.product.warranty.daysLeft," days remaining "),U(6),_e(Vn(135,67,t.product.warranty.startDate,"mediumDate")),U(6),_e(Vn(141,70,t.product.warranty.endDate,"mediumDate")),U(8),It(t.getInspectionStatusClass(t.product.inspection.status)),U(2),_e(mo(151,73,t.product.inspection.status)),U(3),Qe("Inspector ID: ",t.product.inspection.inspectorId),U(6),_e(Vn(160,75,t.product.inspection.lastInspectionDate,"mediumDate")),U(6),_e(Vn(166,78,t.product.inspection.nextDueDate,"mediumDate")),U(8),It(t.getLogisticsStatusClass(t.product.logistics.status)),U(2),_e(XE(177,83,mo(176,81,t.product.logistics.status),"_"," ")),U(4),Qe("Current Location: ",t.product.logistics.currentLocation),U(),oe("ngIf",t.product.logistics.estimatedDelivery),U(7),oe("href",Na("tel:",t.product.management.supportPhone),ms),U(8),_e(t.product.management.supportPhone),U(),oe("href",Na("mailto:",t.product.management.supportEmail),ms),U(8),_e(t.product.management.supportEmail),U(),oe("href",Na("https://wa.me/",t.product.management.whatsapp.replace("+","")),ms),U(8),_e(t.product.management.whatsapp),U(12),oe("ngIf",t.canVerify())}}var d8=(()=>{let e=class e{constructor(r,i,o){this.route=r,this.router=i,this.productService=o,this.product=null,this.productId="",this.error=""}ngOnInit(){this.productId=this.route.snapshot.params.id,this.loadProduct()}loadProduct(){return E(this,null,function*(){try{let r=yield this.productService.getProductById(this.productId).toPromise();r?this.product=r:this.error="Product not found in database"}catch(r){console.error("Error loading product:",r),this.error="Failed to load product information"}})}goBack(){this.router.navigate(["/dashboard"])}getInspectionStatusClass(r){switch(r){case"completed":return"bg-green-50 border-green-200 text-green-800";case"pending":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"overdue":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}}getLogisticsStatusClass(r){switch(r){case"delivered":return"bg-green-50 border-green-200 text-green-800";case"in_transit":return"bg-blue-50 border-blue-200 text-blue-800";case"manufacturing":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"returned":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}}canVerify(){let r=sessionStorage.getItem("currentUser");if(r){let i=JSON.parse(r);return i.role==="inspector"||i.role==="admin"}return!1}downloadCertificate(){alert("Certificate download functionality would be implemented here")}shareCertificate(){navigator.share?navigator.share({title:`${this.product?.name} Certificate`,text:`Product Certificate for ${this.product?.name}`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Certificate link copied to clipboard"))}verifyProduct(){alert("Product verification functionality would be implemented here")}};e.\u0275fac=function(i){return new(i||e)(J(Ur),J(rt),J(kl))},e.\u0275cmp=Kt({type:e,selectors:[["app-product-certificate"]],decls:10,vars:1,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","items-center","h-16"],[1,"mr-4","p-2","rounded-md","text-gray-400","hover:text-gray-600","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","font-bold","text-gray-900"],["class","max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",4,"ngIf"],[1,"max-w-4xl","mx-auto","py-8","px-4","sm:px-6","lg:px-8"],[1,"rounded-xl","border-2","p-6","mb-8"],[1,"flex","items-center","space-x-4"],[1,"w-16","h-16","rounded-full","flex","items-center","justify-center"],["class","w-8 h-8","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"space-y-6"],[1,"bg-white","rounded-xl","shadow-md","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"space-y-3"],[1,"text-sm","text-gray-500"],[1,"text-lg","font-medium","text-gray-900"],[1,"font-mono","text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"font-medium","text-gray-900"],[1,"text-gray-900"],[1,"grid","grid-cols-2","gap-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-blue-600","hover:text-blue-800","font-medium",3,"href"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"font-mono","text-xs","text-gray-600","break-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"rounded-lg","border","p-3"],[1,"font-medium"],[1,"text-sm","opacity-80"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[4,"ngIf"],[1,"mt-8","bg-white","rounded-xl","shadow-md","p-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","items-center","space-x-3","p-4","bg-green-50","hover:bg-green-100","rounded-lg","transition-colors","duration-200","group",3,"href"],[1,"bg-green-100","group-hover:bg-green-200","rounded-full","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","space-x-3","p-4","bg-blue-50","hover:bg-blue-100","rounded-lg","transition-colors","duration-200","group",3,"href"],[1,"bg-blue-100","group-hover:bg-blue-200","rounded-full","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["target","_blank",1,"flex","items-center","space-x-3","p-4","bg-green-50","hover:bg-green-100","rounded-lg","transition-colors","duration-200","group",3,"href"],["fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["d","M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.479 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-2.462-.996-4.779-2.811-6.598-1.815-1.819-4.145-2.817-6.605-2.819-5.448 0-9.886 4.435-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.277-.856zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413z"],[1,"mt-8","flex","flex-col","sm:flex-row","gap-4"],[1,"flex-1","bg-blue-600","hover:bg-blue-700","text-white","py-3","px-6","rounded-lg","font-semibold","transition-colors","duration-200","flex","items-center","justify-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex-1","bg-teal-600","hover:bg-teal-700","text-white","py-3","px-6","rounded-lg","font-semibold","transition-colors","duration-200","flex","items-center","justify-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["class","flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors duration-200 flex items-center justify-center space-x-2",3,"click",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"flex-1","bg-green-600","hover:bg-green-700","text-white","py-3","px-6","rounded-lg","font-semibold","transition-colors","duration-200","flex","items-center","justify-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"button",4),ge("click",function(){return o.goBack()}),ue(),_(5,"svg",5),te(6,"path",6),C()(),ye(),_(7,"h1",7),O(8,"Product Certificate"),C()()()(),xe(9,Une,226,87,"main",8),C()),i&2&&(U(9),oe("ngIf",o.product))},dependencies:[yn,Tn,ka,_o,l8],encapsulation:2});let n=e;return n})();function jne(n,e){n&1&&(ue(),_(0,"svg",5),te(1,"path",30),C())}function Hne(n,e){n&1&&(ue(),_(0,"svg",5),te(1,"path",31),C())}function $ne(n,e){n&1&&(ue(),_(0,"svg",5),te(1,"path",32),C())}function Gne(n,e){if(n&1){let t=Nt();_(0,"button",33),ge("click",function(){at(t);let i=Pe().$implicit,o=Pe();return ct(o.viewProduct(i.productId))}),O(1," View Product "),C()}}function zne(n,e){if(n&1){let t=Nt();_(0,"button",34),ge("click",function(){at(t);let i=Pe().$implicit,o=Pe();return ct(o.markAsRead(i.id))}),O(1," Mark as Read "),C()}}function Wne(n,e){n&1&&te(0,"div",35)}function qne(n,e){if(n&1&&(_(0,"div",15)(1,"div",16)(2,"div",17),xe(3,jne,2,0,"svg",18)(4,Hne,2,0,"svg",18)(5,$ne,2,0,"svg",18),C(),_(6,"div",19)(7,"div",20)(8,"h3",21),O(9),C(),_(10,"div",22)(11,"span",23),O(12),Ot(13,"titlecase"),C(),_(14,"span",24),O(15),Ot(16,"date"),C()()(),_(17,"p",25),O(18),C(),_(19,"div",26),xe(20,Gne,2,0,"button",27)(21,zne,2,0,"button",28),C()(),xe(22,Wne,1,0,"div",29),C()()),n&2){let t=e.$implicit,r=Pe();It(t.isRead?"bg-white border-gray-200":"bg-blue-50 border-blue-200"),U(2),It(r.getNotificationIconClass(t.type)),U(),oe("ngIf",t.type==="warranty_expiry"),U(),oe("ngIf",t.type==="inspection_reminder"),U(),oe("ngIf",t.type==="fake_qr"||t.type==="tamper_detected"),U(3),It(t.isRead?"text-gray-800 font-medium":"text-gray-900 font-semibold"),U(),_e(t.title),U(2),It(r.getPriorityClass(t.priority)),U(),Qe(" ",mo(13,18,t.priority)," "),U(3),_e(Vn(16,20,t.createdAt,"short")),U(3),_e(t.message),U(2),oe("ngIf",t.productId),U(),oe("ngIf",!t.isRead),U(),oe("ngIf",!t.isRead)}}function Kne(n,e){n&1&&(_(0,"div",36),ue(),_(1,"svg",37),te(2,"path",38),C(),ye(),_(3,"h3",39),O(4,"No notifications"),C(),_(5,"p",40),O(6,"You're all caught up! Check back later for updates."),C()())}var f8=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.notificationService=i,this.authService=o,this.notifications=[]}ngOnInit(){this.loadNotifications()}loadNotifications(){return E(this,null,function*(){try{let r=this.authService.getCurrentUser();r?this.notifications=yield this.notificationService.getNotificationsFromFirebase(r.uid):this.notifications=[]}catch(r){console.error("Error loading notifications:",r),this.notifications=[]}})}goBack(){this.router.navigate(["/dashboard"])}getNotificationIconClass(r){switch(r){case"warranty_expiry":return"bg-orange-100 text-orange-600";case"inspection_reminder":return"bg-blue-100 text-blue-600";case"fake_qr":case"tamper_detected":return"bg-red-100 text-red-600";default:return"bg-gray-100 text-gray-600"}}getPriorityClass(r){switch(r){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}viewProduct(r){this.router.navigate(["/product",r])}markAsRead(r){let i=this.notifications.find(o=>o.id===r);i&&(i.isRead=!0)}};e.\u0275fac=function(i){return new(i||e)(J(rt),J(b1),J(Hn))},e.\u0275cmp=Kt({type:e,selectors:[["app-notifications"]],decls:18,vars:2,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","items-center","h-16"],[1,"mr-4","p-2","rounded-md","text-gray-400","hover:text-gray-600","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","font-bold","text-gray-900"],[1,"max-w-4xl","mx-auto","py-8","px-4","sm:px-6","lg:px-8"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-4"],["class","border rounded-xl p-6 hover:shadow-md transition-all duration-200",3,"class",4,"ngFor","ngForOf"],["class","text-center py-12 bg-white rounded-xl",4,"ngIf"],[1,"border","rounded-xl","p-6","hover:shadow-md","transition-all","duration-200"],[1,"flex","items-start","space-x-4"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","flex-shrink-0"],["class","w-6 h-6","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-lg"],[1,"flex","items-center","space-x-2"],[1,"px-2","py-1","text-xs","font-medium","rounded-full"],[1,"text-sm","text-gray-500"],[1,"text-gray-600","mb-3"],[1,"flex","items-center","space-x-4"],["class","text-blue-600 hover:text-blue-800 text-sm font-medium",3,"click",4,"ngIf"],["class","text-gray-500 hover:text-gray-700 text-sm font-medium",3,"click",4,"ngIf"],["class","w-3 h-3 bg-blue-500 rounded-full flex-shrink-0",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-blue-600","hover:text-blue-800","text-sm","font-medium",3,"click"],[1,"text-gray-500","hover:text-gray-700","text-sm","font-medium",3,"click"],[1,"w-3","h-3","bg-blue-500","rounded-full","flex-shrink-0"],[1,"text-center","py-12","bg-white","rounded-xl"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-300","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-5 5v-5zM21 7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h14a2 2 0 012 2v2z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"button",4),ge("click",function(){return o.goBack()}),ue(),_(5,"svg",5),te(6,"path",6),C()(),ye(),_(7,"h1",7),O(8,"Notifications"),C()()()(),_(9,"main",8)(10,"div",9)(11,"h2",10),O(12,"Notifications & Alerts"),C(),_(13,"p",11),O(14,"Stay updated with warranty, inspection, and security alerts"),C()(),_(15,"div",12),xe(16,qne,23,23,"div",13)(17,Kne,7,0,"div",14),C()()()),i&2&&(U(16),oe("ngForOf",o.notifications),U(),oe("ngIf",o.notifications.length===0))},dependencies:[yn,Oi,Tn,ka,_o],encapsulation:2});let n=e;return n})();function Yne(n,e){if(n&1){let t=Nt();_(0,"button",18),ge("click",function(){let i=at(t).$implicit,o=Pe();return ct(o.setActiveFilter(i.key))}),O(1),_(2,"span",19),O(3),C()()}if(n&2){let t=e.$implicit,r=Pe();It(r.activeFilter===t.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),U(),Qe(" ",t.label," "),U(),It(r.activeFilter===t.key?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-900"),U(),Qe(" ",t.count," ")}}function Xne(n,e){if(n&1){let t=Nt();_(0,"div",20),ge("click",function(){let i=at(t).$implicit,o=Pe();return ct(o.viewCertificate(i.id))}),_(1,"div",21)(2,"div",22),O(3),C(),_(4,"div",23)(5,"h3",24),O(6),C(),_(7,"p",25),O(8),C()()(),_(9,"div",26)(10,"div",27)(11,"div")(12,"p",28),O(13,"Product ID"),C(),_(14,"p",29),O(15),C()(),_(16,"div")(17,"p",28),O(18,"Certificate Number"),C(),_(19,"p",29),O(20),C()(),_(21,"div",30)(22,"div")(23,"p",28),O(24,"Warranty"),C(),_(25,"p",31),O(26),C()(),_(27,"div")(28,"p",28),O(29,"Days Left"),C(),_(30,"p",32),O(31),C()()(),_(32,"div")(33,"p",28),O(34,"Last Updated"),C(),_(35,"p",33),O(36),Ot(37,"date"),C()()(),_(38,"div",34)(39,"div",35)(40,"button",36),ge("click",function(i){let o=at(t).$implicit,s=Pe();return ct(s.downloadCertificate(o.id,i))}),O(41," Download "),C(),_(42,"button",37),ge("click",function(i){let o=at(t).$implicit,s=Pe();return ct(s.shareCertificate(o.id,i))}),O(43," Share "),C()()()()()}if(n&2){let t=e.$implicit;U(2),It(t.isAuthentic?"bg-green-500":"bg-red-500"),U(),Qe(" ",t.isAuthentic?"Verified":"Suspicious"," "),U(3),_e(t.name),U(2),_e(t.manufacturer.company),U(7),_e(t.id),U(5),_e(t.certificate.certificateNumber),U(5),It(t.warranty.isActive?"text-green-600":"text-red-600"),U(),Qe(" ",t.warranty.isActive?"Active":"Expired"," "),U(5),_e(t.warranty.daysLeft),U(5),_e(Vn(37,12,t.updatedAt,"short"))}}function Qne(n,e){if(n&1){let t=Nt();_(0,"div",38),ue(),_(1,"svg",39),te(2,"path",40),C(),ye(),_(3,"h3",41),O(4,"No certificates found"),C(),_(5,"p",42),O(6,"Start scanning QR codes to build your certificate history"),C(),_(7,"button",43),ge("click",function(){at(t);let i=Pe();return ct(i.startScanning())}),O(8," Start Scanning "),C()()}}var h8=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.productService=i,this.authService=o,this.certificates=[],this.filteredCertificates=[],this.activeFilter="all",this.filterTabs=[{key:"all",label:"All",count:0},{key:"verified",label:"Verified",count:0},{key:"expired",label:"Expired",count:0},{key:"pending",label:"Pending",count:0}]}ngOnInit(){this.loadCertificates()}loadCertificates(){return E(this,null,function*(){try{let r=this.authService.getCurrentUser();r?this.certificates=(yield this.productService.getUserCertificates(r.uid).toPromise())||[]:this.certificates=[],this.updateFilterCounts(),this.filterCertificates()}catch(r){console.error("Error loading certificates:",r),this.certificates=[],this.updateFilterCounts(),this.filterCertificates()}})}updateFilterCounts(){this.filterTabs[0].count=this.certificates.length,this.filterTabs[1].count=this.certificates.filter(r=>r.isAuthentic).length,this.filterTabs[2].count=this.certificates.filter(r=>!r.warranty.isActive).length,this.filterTabs[3].count=this.certificates.filter(r=>r.inspection.status==="pending").length}setActiveFilter(r){this.activeFilter=r,this.filterCertificates()}filterCertificates(){switch(this.activeFilter){case"verified":this.filteredCertificates=this.certificates.filter(r=>r.isAuthentic);break;case"expired":this.filteredCertificates=this.certificates.filter(r=>!r.warranty.isActive);break;case"pending":this.filteredCertificates=this.certificates.filter(r=>r.inspection.status==="pending");break;default:this.filteredCertificates=this.certificates}}goBack(){this.router.navigate(["/dashboard"])}viewCertificate(r){this.router.navigate(["/product",r])}downloadCertificate(r,i){i.stopPropagation(),alert(`Downloading certificate for ${r}`)}shareCertificate(r,i){i.stopPropagation(),alert(`Sharing certificate for ${r}`)}startScanning(){this.router.navigate(["/scanner"])}};e.\u0275fac=function(i){return new(i||e)(J(rt),J(kl),J(Hn))},e.\u0275cmp=Kt({type:e,selectors:[["app-certificates"]],decls:22,vars:3,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","items-center","h-16"],[1,"mr-4","p-2","rounded-md","text-gray-400","hover:text-gray-600","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","font-bold","text-gray-900"],[1,"max-w-6xl","mx-auto","py-8","px-4","sm:px-6","lg:px-8"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"border-b","border-gray-200"],[1,"-mb-px","flex","space-x-8"],["class","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200",3,"class","click",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105",3,"click",4,"ngFor","ngForOf"],["class","col-span-full text-center py-12 bg-white rounded-xl",4,"ngIf"],[1,"whitespace-nowrap","py-2","px-1","border-b-2","font-medium","text-sm","transition-colors","duration-200",3,"click"],[1,"ml-2","py-0.5","px-2.5","rounded-full","text-xs","font-medium"],[1,"bg-white","rounded-xl","shadow-md","hover:shadow-lg","transition-all","duration-300","cursor-pointer","transform","hover:scale-105",3,"click"],[1,"relative"],[1,"absolute","top-4","right-4","text-white","px-3","py-1","rounded-full","text-xs","font-medium","z-10"],[1,"bg-gradient-to-r","from-blue-500","to-blue-600","p-6","text-white"],[1,"font-semibold","text-lg","truncate","pr-20"],[1,"text-blue-100","text-sm"],[1,"p-6"],[1,"space-y-3"],[1,"text-xs","text-gray-500","uppercase","tracking-wide"],[1,"font-mono","text-sm","text-gray-900"],[1,"grid","grid-cols-2","gap-4"],[1,"text-sm","font-medium"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"flex","space-x-2"],[1,"flex-1","bg-blue-100","hover:bg-blue-200","text-blue-700","py-2","px-3","rounded-lg","text-sm","font-medium","transition-colors","duration-200",3,"click"],[1,"flex-1","bg-teal-100","hover:bg-teal-200","text-teal-700","py-2","px-3","rounded-lg","text-sm","font-medium","transition-colors","duration-200",3,"click"],[1,"col-span-full","text-center","py-12","bg-white","rounded-xl"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-300","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"bg-blue-600","hover:bg-blue-700","text-white","py-2","px-4","rounded-lg","font-medium","transition-colors","duration-200",3,"click"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"button",4),ge("click",function(){return o.goBack()}),ue(),_(5,"svg",5),te(6,"path",6),C()(),ye(),_(7,"h1",7),O(8,"My Certificates"),C()()()(),_(9,"main",8)(10,"div",9)(11,"h2",10),O(12,"Certificate History"),C(),_(13,"p",11),O(14,"View and manage your verified product certificates"),C()(),_(15,"div",9)(16,"div",12)(17,"nav",13),xe(18,Yne,4,6,"button",14),C()()(),_(19,"div",15),xe(20,Xne,44,15,"div",16)(21,Qne,9,0,"div",17),C()()()),i&2&&(U(18),oe("ngForOf",o.filterTabs),U(2),oe("ngForOf",o.filteredCertificates),U(),oe("ngIf",o.filteredCertificates.length===0))},dependencies:[yn,Oi,Tn,_o],encapsulation:2});let n=e;return n})();function Zne(n,e){if(n&1&&(_(0,"div",69),O(1),C()),n&2){let t=Pe().$implicit;U(),Qe(" ",t.answer," ")}}function Jne(n,e){if(n&1){let t=Nt();_(0,"div",64)(1,"button",65),ge("click",function(){let i=at(t).$implicit;return ct(i.isOpen=!i.isOpen)}),_(2,"span",36),O(3),C(),ue(),_(4,"svg",66),te(5,"path",67),C()(),xe(6,Zne,2,1,"div",68),C()}if(n&2){let t=e.$implicit;U(3),_e(t.question),U(),It(t.isOpen?"transform rotate-180":""),U(2),oe("ngIf",t.isOpen)}}var p8=(()=>{let e=class e{constructor(r){this.router=r,this.faqs=[{question:"How do I scan a QR code?",answer:"Use the QR scanner from the dashboard. Point your camera at the QR code and ensure it fits within the scanning frame. The app will automatically detect and process the code.",isOpen:!1},{question:"What should I do if a product shows as fake?",answer:"If a product is flagged as potentially counterfeit, immediately contact our emergency support line and do not use the product. Document the QR code and report it through the app.",isOpen:!1},{question:"How often should products be inspected?",answer:"Inspection frequency varies by product type and regulatory requirements. Check the product certificate for the next scheduled inspection date.",isOpen:!1},{question:"Can I download certificates offline?",answer:"Yes, you can download PDF certificates for offline viewing. However, real-time verification requires an internet connection.",isOpen:!1}]}goBack(){this.router.navigate(["/dashboard"])}reportFake(){alert("Fake product reporting feature would be implemented here")}requestInspection(){alert("Inspection request feature would be implemented here")}technicalSupport(){alert("Technical support chat/form would be implemented here")}};e.\u0275fac=function(i){return new(i||e)(J(rt))},e.\u0275cmp=Kt({type:e,selectors:[["app-support"]],decls:129,vars:1,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","items-center","h-16"],[1,"mr-4","p-2","rounded-md","text-gray-400","hover:text-gray-600","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","font-bold","text-gray-900"],[1,"max-w-4xl","mx-auto","py-8","px-4","sm:px-6","lg:px-8"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"bg-red-50","border-2","border-red-200","rounded-xl","p-6","mb-8"],[1,"text-lg","font-semibold","text-red-800","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["href","tel:+91-1800-123-4567",1,"flex","items-center","p-4","bg-white","rounded-lg","border","border-red-300","hover:bg-red-50","transition-colors","duration-200","group"],[1,"bg-red-100","group-hover:bg-red-200","rounded-full","p-3","mr-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],[1,"font-semibold","text-red-800"],[1,"text-red-600"],[1,"text-sm","text-red-500"],["href","mailto:emergency@safetech.com",1,"flex","items-center","p-4","bg-white","rounded-lg","border","border-red-300","hover:bg-red-50","transition-colors","duration-200","group"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-8"],[1,"bg-white","rounded-xl","shadow-md","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-4"],["href","tel:+91-120-4567890",1,"flex","items-center","p-3","bg-blue-50","hover:bg-blue-100","rounded-lg","transition-colors","duration-200","group"],[1,"bg-blue-100","group-hover:bg-blue-200","rounded-full","p-2","mr-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-blue-600"],["href","mailto:tech@safetech.com",1,"flex","items-center","p-3","bg-blue-50","hover:bg-blue-100","rounded-lg","transition-colors","duration-200","group"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["href","tel:+91-120-9876543",1,"flex","items-center","p-3","bg-green-50","hover:bg-green-100","rounded-lg","transition-colors","duration-200","group"],[1,"bg-green-100","group-hover:bg-green-200","rounded-full","p-2","mr-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],[1,"text-sm","text-green-600"],["href","mailto:sales@safetech.com",1,"flex","items-center","p-3","bg-green-50","hover:bg-green-100","rounded-lg","transition-colors","duration-200","group"],[1,"bg-white","rounded-xl","shadow-md","p-6","mb-8"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","items-center","p-4","bg-red-50","hover:bg-red-100","rounded-lg","transition-colors","duration-200","group","text-left",3,"click"],[1,"font-medium","text-red-800"],[1,"text-sm","text-red-600"],[1,"flex","items-center","p-4","bg-blue-50","hover:bg-blue-100","rounded-lg","transition-colors","duration-200","group","text-left",3,"click"],[1,"bg-blue-100","group-hover:bg-blue-200","rounded-full","p-3","mr-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],[1,"font-medium","text-blue-800"],[1,"flex","items-center","p-4","bg-purple-50","hover:bg-purple-100","rounded-lg","transition-colors","duration-200","group","text-left",3,"click"],[1,"bg-purple-100","group-hover:bg-purple-200","rounded-full","p-3","mr-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-medium","text-purple-800"],[1,"text-sm","text-purple-600"],["class","border-b border-gray-200 pb-4 last:border-b-0 last:pb-0",4,"ngFor","ngForOf"],[1,"border-b","border-gray-200","pb-4","last:border-b-0","last:pb-0"],[1,"w-full","text-left","flex","items-center","justify-between","py-2","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-500","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","mt-2 text-gray-600 text-sm leading-relaxed",4,"ngIf"],[1,"mt-2","text-gray-600","text-sm","leading-relaxed"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"button",4),ge("click",function(){return o.goBack()}),ue(),_(5,"svg",5),te(6,"path",6),C()(),ye(),_(7,"h1",7),O(8,"Support & Contact"),C()()()(),_(9,"main",8)(10,"div",9)(11,"h2",10),O(12,"Get Help & Support"),C(),_(13,"p",11),O(14,"Contact our team for assistance with product verification and technical support"),C()(),_(15,"div",12)(16,"h3",13),ue(),_(17,"svg",14),te(18,"path",15),C(),O(19," Emergency Support "),C(),ye(),_(20,"div",16)(21,"a",17)(22,"div",18),ue(),_(23,"svg",19),te(24,"path",20),C()(),ye(),_(25,"div")(26,"p",21),O(27,"Emergency Hotline"),C(),_(28,"p",22),O(29,"+91-1800-123-4567"),C(),_(30,"p",23),O(31,"24/7 Available"),C()()(),_(32,"a",24)(33,"div",18),ue(),_(34,"svg",19),te(35,"path",25),C()(),ye(),_(36,"div")(37,"p",21),O(38,"Emergency Email"),C(),_(39,"p",22),O(40,"emergency@safetech.com"),C(),_(41,"p",23),O(42,"Priority Response"),C()()()()(),_(43,"div",26)(44,"div",27)(45,"h3",28),ue(),_(46,"svg",29),te(47,"path",30)(48,"path",31),C(),O(49," Technical Support "),C(),ye(),_(50,"div",32)(51,"a",33)(52,"div",34),ue(),_(53,"svg",35),te(54,"path",20),C()(),ye(),_(55,"div")(56,"p",36),O(57,"Tech Support"),C(),_(58,"p",37),O(59,"+91-120-4567890"),C()()(),_(60,"a",38)(61,"div",34),ue(),_(62,"svg",35),te(63,"path",25),C()(),ye(),_(64,"div")(65,"p",36),O(66,"Email Support"),C(),_(67,"p",37),O(68,"tech@safetech.com"),C()()()()(),_(69,"div",27)(70,"h3",28),ue(),_(71,"svg",39),te(72,"path",40),C(),O(73," Sales & Vendor Support "),C(),ye(),_(74,"div",32)(75,"a",41)(76,"div",42),ue(),_(77,"svg",43),te(78,"path",20),C()(),ye(),_(79,"div")(80,"p",36),O(81,"Sales Team"),C(),_(82,"p",44),O(83,"+91-120-9876543"),C()()(),_(84,"a",45)(85,"div",42),ue(),_(86,"svg",43),te(87,"path",25),C()(),ye(),_(88,"div")(89,"p",36),O(90,"Sales Email"),C(),_(91,"p",44),O(92,"sales@safetech.com"),C()()()()()(),_(93,"div",46)(94,"h3",47),O(95,"Quick Actions"),C(),_(96,"div",48)(97,"button",49),ge("click",function(){return o.reportFake()}),_(98,"div",18),ue(),_(99,"svg",19),te(100,"path",15),C()(),ye(),_(101,"div")(102,"p",50),O(103,"Report Fake Product"),C(),_(104,"p",51),O(105,"Submit counterfeit alert"),C()()(),_(106,"button",52),ge("click",function(){return o.requestInspection()}),_(107,"div",53),ue(),_(108,"svg",54),te(109,"path",55),C()(),ye(),_(110,"div")(111,"p",56),O(112,"Request Inspection"),C(),_(113,"p",37),O(114,"Schedule quality check"),C()()(),_(115,"button",57),ge("click",function(){return o.technicalSupport()}),_(116,"div",58),ue(),_(117,"svg",59),te(118,"path",60),C()(),ye(),_(119,"div")(120,"p",61),O(121,"Technical Help"),C(),_(122,"p",62),O(123,"App & scanning issues"),C()()()()(),_(124,"div",27)(125,"h3",47),O(126,"Frequently Asked Questions"),C(),_(127,"div",32),xe(128,Jne,7,4,"div",63),C()()()()),i&2&&(U(128),oe("ngForOf",o.faqs))},dependencies:[yn,Oi,Tn],encapsulation:2});let n=e;return n})();var ea=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i}canActivate(){return this.authService.currentUser$.pipe(_r(1),we(r=>r?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(i){return new(i||e)(fe(Hn),fe(rt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var g8=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i}canActivate(r){let i=r.data.roles;return this.authService.currentUser$.pipe(_r(1),we(o=>o?!i||i.length===0||this.authService.hasAnyRole(i)?!0:(this.router.navigate(["/dashboard"]),!1):(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(i){return new(i||e)(fe(Hn),fe(rt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var m8=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:kF},{path:"signup",component:FF},{path:"dashboard",component:LF,canActivate:[ea]},{path:"scanner",component:gT,canActivate:[ea]},{path:"search",component:gT,canActivate:[ea]},{path:"product/:id",component:d8,canActivate:[ea]},{path:"notifications",component:f8,canActivate:[ea]},{path:"certificates",component:h8,canActivate:[ea,g8],data:{roles:["admin","inspector"]}},{path:"support",component:p8,canActivate:[ea]},{path:"**",redirectTo:"/login"}];var Vh={production:!1,firebase:{apiKey:"AIzaSyCSOIbA90PuMoNGwmkVgQukpT0VIAi9DiA",authDomain:"sih-project-2a482.firebaseapp.com",projectId:"sih-project-2a482",storageBucket:"sih-project-2a482.firebasestorage.app",messagingSenderId:"27434700873",appId:"1:27434700873:web:7b1f1130f36545759b6f98",measurementId:"G-DXYFT0HXRM"},firebaseConfig:{experimentalForceLongPolling:!1,cacheSizeBytes:52428800,realtimeUpdateInterval:5e3}};var ere=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Kt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){i&1&&te(0,"router-outlet")},dependencies:[ff],encapsulation:2});let n=e;return n})();Cw(ere,{providers:[Qw(m8),IP(()=>CP(Vh.firebase)),hk(()=>gk()),Z4(()=>{let n=J4();try{let e=n;e&&e.settings&&e.settings({cacheSizeBytes:Vh.firebaseConfig.cacheSizeBytes,experimentalForceLongPolling:Vh.firebaseConfig.experimentalForceLongPolling,maxConcurrentConnections:5,experimentalAutoDetectLongPolling:!0,realtimeUpdateInterval:Vh.firebaseConfig.realtimeUpdateInterval})}catch(e){console.error("Error applying Firestore optimizations:",e)}return n})]});export{ere as App};
